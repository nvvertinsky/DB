# CLUSTER


### Описание
Кластерами называют две или более таблиц, которые объединены одним или несколькими общими столбцами.
Причем данные из этих таблиц хранятся в одном блоке вместе с кластерным ключом.


### Принцип работы
  - Создается новый объект (сегмент) - кластер с общим столбцом
  - Создается индекс на кластер
  - В кластер добавляются 2 или более таблиц с общим столбцом
  - В блоках сегмента хранятся данные из общего столбца (ключ) и данные из этих таблиц по каждому ключу.
  - Пользователь делает запрос. Читаем блок где хранится нужное значение
  - И в этом же блоке уже есть все необходимые данные из таблиц
  

### Преймущества
  - Читаем всего 1 блок в сегменте кластера. А не каждый блок сегмента отдельной таблицы


### Пример создания обычного кластера
````
CREATE CLUSTER emp_dept(deptno NUMBER(3)) TABLESPACE users;
CREATE INDEX emp_dept_ix ON CLUSTER emp_dept;

CREATE TABLE dept(deptno NUMBER(3) PRIMARY KEY) CLUSTER emp_dept (deptno);
CREATE TABLE emp(empno NUMBER(5) PRIMARY KEY, ename VARCHAR2(15) NOT NULL, deptno NUMBER(3) REFERENCES dept) CLUSTER emp_dept(deptno);
````

### Пример создания хеш кластера
````
CREATE CLUSTER emp_dept(deptno NUMBER(3)) TABLESPACE users HASH IS deptno HASHKEYS 200;
````

### Недостатки 
 - Однако кластеры понижают производительность операторов INSERT, поскольку для хранения данных нескольких таблиц требуется больше блоков.
 
 
