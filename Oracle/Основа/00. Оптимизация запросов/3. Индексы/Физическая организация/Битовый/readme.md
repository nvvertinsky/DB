# Bitmap

### Описание: 	
  - В этом индексе БД хранит битовую карту для каждого значения. Битовая карта указывает в каких строках таблицы находится это значение.

### Особенности:
  - Если индексированный столбец обновляется, то БД блокирует запись с ключем VALUE_1. 
  - А так как ключ указывает на несколько строк, то все эти строки блокируются.
  - Поэтому bitmap не подходят для OLTP.

### Где используются:
  - Для стобцов, которые содержат мало уникальных значений.
  - Таблица либо доступна только на чтение либо над ней совершается редко DML операции.
  - В хранилищах данных. То есть там где редко выполняются DML операции.

### Как это работает:
  1. Value;Row1;Row2;Row3;Row4;Row5
  2. M;1;0;1;1;0
  3. F,0;1;0;0;1
  
  - Есть значения ключа M или F. 
  - Строим битовую карту, где указываем 1 - есть значение в строке, 0 - нет значения в строке.
  - Функция сопоставления преобразует каждый бит (1,0) в rowid.
  - Если 2 и больше битовых индексов и в запросе участвуют все проиндексированные столбцы, то Oracle объединяет эти индексы.

### Пример: 
  - Самый типичный пример, который приведен в документации - это колонка пол человека.
  - Два значения: Мужской и Женский.

### Плюсы: 
  - Меньше весят. Для хранилищ это хорошо.
  - Хорошо работают с низкоселективными столбцами.
  - Хранят null и ссылки на эти строки.
 
### Минусы: 
  - Плохо ведут себя в OLTP системах. Потому что одна запись битового индекса указывает на множество строк. И если сеанс модифицирует проиндексированные данные, то все строки на которые указывает запись индекса блокируется. Блокируется не каждая строка, но многие из них. Это уменьшает параллельный доступ.
