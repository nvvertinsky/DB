<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0073)https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/ -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru-RU"><!--<![endif]--><head profile="http://gmpg.org/xfn/11"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>Подсказки (Oracle Hints) | Oracle mechanics</title>

	<style type="text/css" media="screen">
		@import url( https://s0.wp.com/wp-content/themes/pub/rubric/style.css );
	</style>

	<link rel="pingback" href="https://iusoltsev.wordpress.com/xmlrpc.php">
	<meta name="robots" content="max-image-preview:large">
<meta name="google-site-verification" content="TE2aeoqVpQnFcbWjWektaWCaamDVBLJdEw-DuCSn3Wk">
<link rel="dns-prefetch" href="https://s0.wp.com/">
<link href="https://fonts.gstatic.com/" crossorigin="" rel="preconnect">
<link rel="alternate" type="application/rss+xml" title="Oracle mechanics » Лента" href="https://iusoltsev.wordpress.com/feed/">
<link rel="alternate" type="application/rss+xml" title="Oracle mechanics » Лента комментариев" href="https://iusoltsev.wordpress.com/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="Oracle mechanics » Лента комментариев к «Подсказки (Oracle Hints)»" href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/feed/">
	<script type="text/javascript">
		/* <![CDATA[ */
		function addLoadEvent(func) {
			var oldonload = window.onload;
			if (typeof window.onload != 'function') {
				window.onload = func;
			} else {
				window.onload = function () {
					oldonload();
					func();
				}
			}
		}
		/* ]]> */
	</script>
	<script type="text/javascript">
window._wpemojiSettings = {"baseUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/s0.wp.com\/wp-includes\/js\/wp-emoji-release.min.js?m=1652185836h&ver=6.2-alpha-54936"}};
/*! This file is auto-generated */
!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode,e=(p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0),i.toDataURL());return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(p&&p.fillText)switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([129777,127995,8205,129778,127999],[129777,127995,8203,129778,127999])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(e=t.source||{}).concatemoji?c(e.concatemoji):e.wpemoji&&e.twemoji&&(c(e.twemoji),c(e.wpemoji)))}(window,document,window._wpemojiSettings);
</script><script src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/wp-emoji-release.min.js.Без названия" type="text/javascript" defer=""></script>
<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 0.07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link crossorigin="anonymous" rel="stylesheet" id="all-css-0-1" href="./Подсказки (Oracle Hints) _ Oracle mechanics_files/saved_resource(1)" type="text/css" media="all">
<style id="wp-block-library-inline-css">
.has-text-align-justify {
	text-align:justify;
}
.wp-block-cover__image-background.has-parallax {
	background-size: cover;
}
</style>
<style id="global-styles-inline-css">
body{--wp--preset--shadow--natural: 0 .2rem .3rem 0 rgba(0,0,0, 0.3), 0 .5rem .6rem 0 rgba(0,0,0, 0.4);--wp--preset--shadow--sharp: .5rem .5rem 0 0 rgba(0,0,0, 0.4);--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--duotone--dark-grayscale: url('#wp-duotone-dark-grayscale');--wp--preset--duotone--grayscale: url('#wp-duotone-grayscale');--wp--preset--duotone--purple-yellow: url('#wp-duotone-purple-yellow');--wp--preset--duotone--blue-red: url('#wp-duotone-blue-red');--wp--preset--duotone--midnight: url('#wp-duotone-midnight');--wp--preset--duotone--magenta-yellow: url('#wp-duotone-magenta-yellow');--wp--preset--duotone--purple-green: url('#wp-duotone-purple-green');--wp--preset--duotone--blue-orange: url('#wp-duotone-blue-orange');--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;}:where(.is-layout-flex){gap: 0.5em;}body .is-layout-flow > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-flow > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-flow > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-constrained > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-constrained > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > :where(:not(.alignleft):not(.alignright):not(.alignfull)){max-width: var(--wp--style--global--content-size);margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignwide{max-width: var(--wp--style--global--wide-size);}body .is-layout-flex{display: flex;}body .is-layout-flex{flex-wrap: wrap;align-items: center;}body .is-layout-flex > *{margin: 0;}:where(.wp-block-columns.is-layout-flex){gap: 2em;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
:where(.wp-block-columns.is-layout-flex){gap: 2em;}
.wp-block-pullquote{font-size: 1.5em;line-height: 1.6;}
.wp-block-navigation a:where(:not(.wp-element-button)){color: inherit;}
</style>
<link crossorigin="anonymous" rel="stylesheet" id="all-css-2-1" href="./Подсказки (Oracle Hints) _ Oracle mechanics_files/saved_resource(2)" type="text/css" media="all">
<style id="jetpack-global-styles-frontend-style-inline-css">
:root { --font-headings: unset; --font-base: unset; --font-headings-default: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif; --font-base-default: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;}
</style>
<link crossorigin="anonymous" rel="stylesheet" id="all-css-4-1" href="./Подсказки (Oracle Hints) _ Oracle mechanics_files/saved_resource(3)" type="text/css" media="all">
<script id="wpcom-actionbar-placeholder-js-extra">
var actionbardata = {"siteID":"4124168","siteURL":"http:\/\/iusoltsev.wordpress.com","xhrURL":"https:\/\/iusoltsev.wordpress.com\/wp-admin\/admin-ajax.php","nonce":"b431ac405c","isLoggedIn":"","statusMessage":"","subsEmailDefault":"instantly","proxyScriptUrl":"https:\/\/s0.wp.com\/wp-content\/js\/wpcom-proxy-request.js?ver=20211021","shortlink":"https:\/\/wp.me\/PhiSQ-89","i18n":{"followedText":"New posts from this site will now appear in your <a href=\"https:\/\/wordpress.com\/read\">Reader<\/a>","foldBar":"\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u044d\u0442\u0443 \u043f\u0430\u043d\u0435\u043b\u044c","unfoldBar":"\u0420\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u044d\u0442\u0443 \u043f\u0430\u043d\u0435\u043b\u044c"}};
</script>
<script crossorigin="anonymous" type="text/javascript" src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/saved_resource(4)"></script>
<script type="text/javascript">
	window.addEventListener( 'DOMContentLoaded', function() {
		rltInitialize( {"token":null,"iframeOrigins":["https:\/\/widgets.wp.com"]} );
	} );
</script>
<link crossorigin="anonymous" rel="stylesheet" id="all-css-0-2" href="./Подсказки (Oracle Hints) _ Oracle mechanics_files/style(1).css" type="text/css" media="all">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://iusoltsev.wordpress.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://s0.wp.com/wp-includes/wlwmanifest.xml">
<meta name="generator" content="WordPress.com">
<link rel="canonical" href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/">
<link rel="shortlink" href="https://wp.me/PhiSQ-89">
<link rel="alternate" type="application/json+oembed" href="https://public-api.wordpress.com/oembed/?format=json&amp;url=https%3A%2F%2Fiusoltsev.wordpress.com%2Fprofile%2Findividual-sql-and-cbo%2Fcbo-hints%2F&amp;for=wpcom-auto-discovery"><link rel="alternate" type="application/xml+oembed" href="https://public-api.wordpress.com/oembed/?format=xml&amp;url=https%3A%2F%2Fiusoltsev.wordpress.com%2Fprofile%2Findividual-sql-and-cbo%2Fcbo-hints%2F&amp;for=wpcom-auto-discovery">
<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article">
<meta property="og:title" content="Подсказки (Oracle Hints)">
<meta property="og:url" content="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/">
<meta property="og:description" content="SQL Hints в документации Oracle 8.1.7 9.2 10.2 11.1 11.2 12.1 12.2 Ссылки Oracle SQL Hints by Wei Huang Oracle 12c new SQL Hints by Wei Huang Замечания QREF: SQL Statement HINTS [ID 29236.1]: &amp;#171…">
<meta property="article:published_time" content="2008-10-28T16:07:48+00:00">
<meta property="article:modified_time" content="2018-02-09T17:03:59+00:00">
<meta property="og:site_name" content="Oracle mechanics">
<meta property="og:image" content="https://iusoltsev.files.wordpress.com/2018/08/oracle_mechanics.png?w=120">
<meta property="og:image:width" content="200">
<meta property="og:image:height" content="200">
<meta property="og:image:alt" content="">
<meta property="og:locale" content="ru_RU">
<meta property="fb:app_id" content="249643311490">
<meta property="article:publisher" content="https://www.facebook.com/WordPresscom">
<meta name="twitter:creator" content="@OracleMechanics">
<meta name="twitter:site" content="@OracleMechanics">
<meta name="twitter:text:title" content="Подсказки (Oracle Hints)">
<meta name="twitter:image" content="https://iusoltsev.files.wordpress.com/2018/08/oracle_mechanics.png?w=120">
<meta name="twitter:card" content="summary">

<!-- End Jetpack Open Graph Tags -->
<link rel="openid.server" href="https://iusoltsev.wordpress.com/?openidserver=1">
<link rel="openid.delegate" href="https://iusoltsev.wordpress.com/">
<link rel="search" type="application/opensearchdescription+xml" href="https://iusoltsev.wordpress.com/osd.xml" title="Oracle mechanics">
<link rel="search" type="application/opensearchdescription+xml" href="https://s1.wp.com/opensearch.xml" title="WordPress.com">
		<style id="wpcom-hotfix-masterbar-style">
			@media screen and (min-width: 783px) {
				#wpadminbar .quicklinks li#wp-admin-bar-my-account.with-avatar > a img {
					margin-top: 5px;
				}
			}
		</style>
		<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>		<style type="text/css">
			.recentcomments a {
				display: inline !important;
				padding: 0 !important;
				margin: 0 !important;
			}

			table.recentcommentsavatartop img.avatar, table.recentcommentsavatarend img.avatar {
				border: 0px;
				margin: 0;
			}

			table.recentcommentsavatartop a, table.recentcommentsavatarend a {
				border: 0px !important;
				background-color: transparent !important;
			}

			td.recentcommentsavatarend, td.recentcommentsavatartop {
				padding: 0px 0px 1px 0px;
				margin: 0px;
			}

			td.recentcommentstextend {
				border: none !important;
				padding: 0px 0px 2px 10px;
			}

			.rtl td.recentcommentstextend {
				padding: 0px 10px 2px 0px;
			}

			td.recentcommentstexttop {
				border: none;
				padding: 0px 0px 0px 10px;
			}

			.rtl td.recentcommentstexttop {
				padding: 0px 10px 0px 0px;
			}
		</style>
				<script type="text/javascript">
		function __ATA_CC() {var v = document.cookie.match('(^|;) ?personalized-ads-consent=([^;]*)(;|$)');return v ? 1 : 0;}
		var __ATA_PP = { pt: 2, ht: 0, tn: 'rubric', amp: false, siteid: 8982, blogid: 4124168, consent: __ATA_CC(), uloggedin: 0, flag: 2 };
		var __ATA = __ATA || {};
		__ATA.cmd = __ATA.cmd || [];
		</script>
		<script type="text/javascript">
		(function(){var g=Date.now||function(){return+new Date};function h(a,b){a:{for(var c=a.length,d="string"==typeof a?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:"string"==typeof a?a.charAt(b):a[b]};function k(a,b,c){c=null!=c?"="+encodeURIComponent(String(c)):"";if(b+=c){c=a.indexOf("#");0>c&&(c=a.length);var d=a.indexOf("?");if(0>d||d>c){d=c;var e=""}else e=a.substring(d+1,c);a=[a.substr(0,d),e,a.substr(c)];c=a[1];a[1]=b?c?c+"&"+b:b:c;a=a[0]+(a[1]?"?"+a[1]:"")+a[2]}return a};var l=0;function m(a,b){var c=document.createElement("script");c.src=a;c.onload=function(){b&&b(void 0)};c.onerror=function(){b&&b("error")};a=document.getElementsByTagName("head");var d;a&&0!==a.length?d=a[0]:d=document.documentElement;d.appendChild(c)}function n(a){var b=void 0===b?document.cookie:b;return(b=h(b.split("; "),function(c){return-1!=c.indexOf(a+"=")}))?b.split("=")[1]:""}function p(a){return"string"==typeof a&&0<a.length}
		function r(a,b,c){b=void 0===b?"":b;c=void 0===c?".":c;var d=[];Object.keys(a).forEach(function(e){var f=a[e],q=typeof f;"object"==q&&null!=f||"function"==q?d.push(r(f,b+e+c)):null!==f&&void 0!==f&&(e=encodeURIComponent(b+e),d.push(e+"="+encodeURIComponent(f)))});return d.filter(p).join("&")}function t(a,b){a||((window.__ATA||{}).config=b.c,m(b.url))}var u=Math.floor(1E13*Math.random()),v=window.__ATA||{};window.__ATA=v;window.__ATA.cmd=v.cmd||[];v.rid=u;v.createdAt=g();var w=window.__ATA||{},x="s.pubmine.com";
		w&&w.serverDomain&&(x=w.serverDomain);var y="//"+x+"/conf",z=window.top===window,A=window.__ATA_PP&&window.__ATA_PP.gdpr_applies,B="boolean"===typeof A?Number(A):null,C=window.__ATA_PP||null,D=z?document.referrer?document.referrer:null:null,E=z?window.location.href:document.referrer?document.referrer:null,F,G=n("__ATA_tuuid");F=G?G:null;var H=window.innerWidth+"x"+window.innerHeight,I=n("usprivacy"),J=r({gdpr:B,pp:C,rid:u,src:D,ref:E,tuuid:F,vp:H,us_privacy:I?I:null},"",".");
		(function(a){var b=void 0===b?"cb":b;l++;var c="callback__"+g().toString(36)+"_"+l.toString(36);a=k(a,b,c);window[c]=function(d){t(void 0,d)};m(a,function(d){d&&t(d)})})(y+"?"+J);}).call(this);
		</script><script src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/conf"></script>		<script type="text/javascript">

			window.doNotSellCallback = function() {

				var linkElements = [
					'a[href="https://wordpress.com/?ref=footer_blog"]',
					'a[href="https://wordpress.com/?ref=footer_website"]',
					'a[href="https://wordpress.com/?ref=vertical_footer"]',
					'a[href^="https://wordpress.com/?ref=footer_segment_"]',
				].join(',');

				var dnsLink = document.createElement( 'a' );
				dnsLink.href = 'https://wordpress.com/ru/advertising-program-optout/';
				dnsLink.classList.add( 'do-not-sell-link' );
				dnsLink.rel = 'nofollow';
				dnsLink.style.marginLeft = '0.5em';
				dnsLink.textContent = 'Отказ от продажи персональных данных и их передачи третьим лицам';

				var creditLinks = document.querySelectorAll( linkElements );

				if ( 0 === creditLinks.length ) {
					return false;
				}

				Array.prototype.forEach.call( creditLinks, function( el ) {
					el.insertAdjacentElement( 'afterend', dnsLink );
				});

				return true;
			};

		</script>
		<meta name="application-name" content="Oracle mechanics"><meta name="msapplication-window" content="width=device-width;height=device-height"><meta name="msapplication-tooltip" content="Производительность СУБД и смежные вопросы"><meta name="msapplication-task" content="name=Подписаться;action-uri=https://iusoltsev.wordpress.com/feed/;icon-uri=https://iusoltsev.files.wordpress.com/2018/08/oracle_mechanics.png?w=16"><meta name="msapplication-task" content="name=Зарегистрируйтесь и начните вести бесплатный блог;action-uri=http://wordpress.com/signup/;icon-uri=https://s0.wp.com/i/favicon.ico"><meta name="msapplication-task" content="name=Поддержка WordPress.com;action-uri=http://support.wordpress.com/;icon-uri=https://s0.wp.com/i/favicon.ico"><meta name="msapplication-task" content="name=Форумы WordPress.com;action-uri=http://forums.wordpress.com/;icon-uri=https://s0.wp.com/i/favicon.ico"><meta name="description" content="SQL Hints в документации Oracle 8.1.7 9.2 10.2 11.1 11.2 12.1 12.2 Ссылки Oracle SQL Hints by Wei Huang Oracle 12c new SQL Hints by Wei Huang Замечания QREF: SQL Statement HINTS [ID 29236.1]: &quot;О синтаксисе: /*+ HINT HINT ... */ в PL/SQL пробел между &quot;+&quot; и первой буквой подсказки имеет значение, в случае отсутствия…">
<style type="text/css">
#header{
	background: url(https://iusoltsev.files.wordpress.com/2009/12/cropped-mem1.jpg) no-repeat top right;
}
#header a {
	color:#B54141;
}
</style>
<link rel="icon" href="https://iusoltsev.files.wordpress.com/2018/08/oracle_mechanics.png?w=32" sizes="32x32">
<link rel="icon" href="https://iusoltsev.files.wordpress.com/2018/08/oracle_mechanics.png?w=120" sizes="192x192">
<link rel="apple-touch-icon" href="https://iusoltsev.files.wordpress.com/2018/08/oracle_mechanics.png?w=120">
<meta name="msapplication-TileImage" content="https://iusoltsev.files.wordpress.com/2018/08/oracle_mechanics.png?w=120">
<link rel="stylesheet" type="text/css" href="./Подсказки (Oracle Hints) _ Oracle mechanics_files/shCore.css"><link rel="stylesheet" type="text/css" href="./Подсказки (Oracle Hints) _ Oracle mechanics_files/shThemeDefault.css"><link rel="stylesheet" type="text/css" id="gravatar-card-css" href="./Подсказки (Oracle Hints) _ Oracle mechanics_files/hovercard.min.css"><link rel="stylesheet" type="text/css" id="gravatar-card-services-css" href="./Подсказки (Oracle Hints) _ Oracle mechanics_files/services.min.css"><link href="./Подсказки (Oracle Hints) _ Oracle mechanics_files/actionbar.css" type="text/css" rel="stylesheet"></head>

<body class="page-template-default page page-id-505 page-child parent-pageid-226 customizer-styles-applied highlander-enabled highlander-light">
<div id="rap">
<h1 id="header"><a href="https://iusoltsev.wordpress.com/">Oracle mechanics</a></h1>

<div id="content">
<!-- end header -->


<div class="post post-505 page type-page status-publish hentry" id="post-505">
	 <h3 class="storytitle"><a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/" rel="bookmark">Подсказки (Oracle Hints)</a></h3>
	<div class="meta"></div>

	<div class="storycontent">
		<h4>SQL Hints в документации Oracle</h4>
<ul>
<li><a href="http://docs.oracle.com/cd/A87860_01/doc/server.817/a85397/sql_elem.htm#8477">8.1.7</a></li>
<li><a href="http://docs.oracle.com/cd/B10500_01/server.920/a96533/hintsref.htm">9.2</a></li>
<li><a href="http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements006.htm#i35922">10.2</a></li>
<li><a href="http://docs.oracle.com/cd/B28359_01/server.111/b28286/sql_elements006.htm#SQLRF00219">11.1</a></li>
<li><a href="http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements006.htm#SQLRF51101">11.2</a></li>
<li><a href="http://docs.oracle.com/cd/E16655_01/server.121/e17209/sql_elements006.htm#SQLRF51108">12.1</a></li>
<li><a href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/sqlrf/Comments.html">12.2</a></li>
</ul>
<h4>Ссылки</h4>
<p style="padding-left:30px;"><a title="www.hellodba.com" href="http://www.hellodba.com/Download/OracleSQLHints.pdf">Oracle SQL Hints by Wei Huang</a><br>
<a title="www.hellodba.com" href="http://www.hellodba.com/reader.php?ID=220&amp;lang=EN">Oracle 12c new SQL Hints by Wei Huang</a></p>
<h4>Замечания</h4>
<p style="padding-left:30px;"><a title="support.oracle.com" href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=29236.1" target="_blank">QREF: SQL Statement HINTS [ID 29236.1]</a>:</p>
<blockquote>
<ul>
<li>«О синтаксисе: /*+ HINT HINT … */ в PL/SQL пробел между «+» и первой буквой подсказки имеет значение, в случае отсутствия пробела подсказка может быть игнорирована, т.е. <strong>/*+ ALL_ROWS */</strong> правильное использование, а <strong>/*+ALL_ROWS */</strong> — неправильное</li>
<li>Подсказки всегда «форсируют» использование стоимостной оптимизации (<strong>cost based optimizer</strong>) — кроме подсказки <strong>RULE</strong></li>
<li>Если в запросе используются псевдонимы (<strong>table alias</strong>), в подсказках также должны использоваться псевдонимы вместо названий таблиц:</li>
</ul>
</blockquote>
<div><div id="highlighter_465400" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">SELECT</code> <code class="sql comments">/*+ FULL ( emp )&nbsp;&nbsp;&nbsp;&nbsp; */</code> <code class="sql plain">empno </code><code class="sql keyword">FROM</code> <code class="sql plain">emp myalias </code><code class="sql keyword">WHERE</code> <code class="sql plain">empno &gt; 10; </code><code class="sql comments">-- НЕправильно</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">SELECT</code> <code class="sql comments">/*+ FULL ( myalias ) */</code> <code class="sql plain">empno </code><code class="sql keyword">FROM</code> <code class="sql plain">emp myalias </code><code class="sql keyword">WHERE</code> <code class="sql plain">empno &gt; 10; </code><code class="sql comments">-- правильно</code></div></div></td></tr></tbody></table></div></div>
<blockquote>
<ul>
<li>В посказках не должно быть указания названия схемы:</li>
</ul>
</blockquote>
<div><div id="highlighter_534124" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">SELECT</code> <code class="sql comments">/*+ index(scott.emp emp1) */</code><code class="sql plain">...</code></div></div></td></tr></tbody></table></div></div>
<blockquote>
<ul>
<li>Некорректные подсказки (<strong>invalid hints</strong>) игнорируются без предупреждений… некорректность подсказки может быть неочевидна, например:</li>
</ul>
</blockquote>
<blockquote>
<blockquote>
<ul>
<li>указание подсказки <strong>FIRST_ROWS</strong> (для получения первых строк) для запроса с ORDER BY (поскольку данные должны быть отсортированы прежде, чем будут возвращены первые строки запроса, использование <strong>first_rows</strong> может не дать желаемого результата)</li>
<li>указанные в подсказке <a title="iusoltsev.wordpress.com" href="https://iusoltsev.wordpress.com/home/individual-sql-and-cbo/cbo-access-path/" target="_self">операции с данными</a> (<strong>access path</strong>) должны быть доступны Например: подсказка <strong>INDEX</strong>с указанием несуществующего индекса будет проигнорирована без сообщений об ошибках…»</li>
</ul>
</blockquote>
</blockquote>
<p style="padding-left:30px;">Подсказка, указанная  после некорректной (например, синтаксически) подсказки или текста в том же комментарии также может быть проигнорирована</p>
<h4>Подсказки</h4>
<p style="padding-left:30px;">— общие цели оптимизатора</p>
<p style="padding-left:30px;"><a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#RULE">/*+ RULE */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#ALL_ROWS">/*+ ALL_ROWS */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#FIRST_ROWS">/*+ FIRST_ROWS */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#FIRST_ROWS_N">/*+ FIRST_ROWS(n) */</a></p>
<p style="padding-left:30px;">— порядок доступа</p>
<p style="padding-left:30px;"><a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#LEADING">/*+ LEADING */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#ORDERED">/*+ ORDERED */</a></p>
<p style="padding-left:30px;">— методы соединения</p>
<p style="padding-left:30px;"><a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#USE_HASH">/*+ USE_HASH */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#USE_NL">/*+ USE_NL */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#USE_MERGE">/*+ USE_MERGE */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#USE_HASH_AGGREGATION">/*+ USE_HASH_AGGREGATION */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#NATIVE_FULL_OUTER_JOIN">/*+ NATIVE_FULL_OUTER_JOIN */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#INDEX_JOIN">/*+ INDEX_JOIN */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#INDEX_COMBINE">/*+ INDEX_COMBINE */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#NUM_INDEX_KEYS">/*+ NUM_INDEX_KEYS */</a></p>
<p style="padding-left:30px;">— способы выполнения [под]запроса</p>
<p style="padding-left:30px;"><a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#DRIVING_SITE">/*+ DRIVING_SITE */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#MATERIALIZE">/*+ MATERIALIZE */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#INLINE">/*+ INLINE */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#PRECOMPUTE_SUBQUERY">/*+ PRECOMPUTE_SUBQUERY */</a></p>
<p style="padding-left:30px;">— статистика объектов</p>
<p style="padding-left:30px;"><a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#DYNAMIC_SAMPLING">/*+ DYNAMIC_SAMPLING */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#DYNAMIC_SAMPLING_EST_CDN">/*+ DYNAMIC_SAMPLING_EST_CDN */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#CARDINALITY">/*+ CARDINALITY */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#OPT_ESTIMATE">/*+ OPT_ESTIMATE */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#TABLE_STATS">/*+ TABLE_STATS | INDEX_STATS | COLUMN_STATS */</a></p>
<p style="padding-left:30px;">— трансформации [под]запросов</p>
<p style="padding-left:30px;"><a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#NO_QUERY_TRANSFORMATION">/*+ NO_QUERY_TRANSFORMATION */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#PUSH_SUBQ">/*+ PUSH_SUBQ */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#NO_UNNEST">/*+ NO_UNNEST */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#UNNEST">/*+ UNNEST */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#NO_ELIMINATE_OBY">/*+ NO_ELIMINATE_OBY */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#MERGE">/*+ MERGE */ /*+ NO_MERGE */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#USE_CONCAT">/*+ USE_CONCAT */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#NO_EXPAND">/*+ NO_EXPAND */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#PUSH_PRED">/*+ PUSH_PRED */ /*+ NO_PUSH_PRED */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#FACTORIZE_JOIN">/*+ FACTORIZE_JOIN */ /*+ NO_FACTORIZE_JOIN */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#OR_EXPAND">/*+ OR_EXPAND */</a></p>
<p style="padding-left:30px;">— использование курсоров</p>
<p style="padding-left:30px;"><a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#CURSOR_SHARING_EXACT">/*+ CURSOR_SHARING_EXACT */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#BIND_AWARE">/*+ BIND_AWARE */ /*+ NO_BIND_AWARE */</a></p>
<p style="padding-left:30px;">— параллельное выполнение</p>
<p style="padding-left:30px;"><a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#PARALLEL">/*+ PARALLEL */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#SHARED">/*+ SHARED */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#STATEMENT_QUEUING">/*+ STATEMENT_QUEUING */ /*+ NO_STATEMENT_QUEUING */</a></p>
<p style="padding-left:30px;">— прочие</p>
<p style="padding-left:30px;"><a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#QB_NAME">/*+ QB_NAME */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#GATHER_PLAN_STATISTICS">/*+ GATHER_PLAN_STATISTICS */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#OPT_PARAM">/*+ OPT_PARAM */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#OPTIMIZER_FEATURES_ENABLE">/*+ OPTIMIZER_FEATURES_ENABLE */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#APPEND">/*+ APPEND */ /*+ NOAPPEND */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#APPEND_VALUES">/*+ APPEND_VALUES */</a><br>
<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#RESULT_CACHE">/*+ RESULT_CACHE */ /*+ NO_RESULT_CACHE */</a><br>
<a href="https://iusoltsev.wordpress.com/2013/12/29/ignore_row_on_dupkey_index/">/*+ IGNORE_ROW_ON_DUPKEY_INDEX */</a></p>
<p style="padding-left:30px;">—</p>
<p><span id="more-505"></span></p>
<h4><strong>Optimization Goals and Approaches hints</strong></h4>
<p style="padding-left:30px;">Подсказки,определяющие общие цели и подходы для оптимизации плана выполнения запроса, включая правила и методы доступа к данным. Соответсвуют (почти) описаниям значений параметра <a title="https://iusoltsev.wordpress.com/" href="https://iusoltsev.wordpress.com/home/individual-sql-and-cbo/oracle-parameters/#optimizer_mode" target="_self">OPTIMIZER_MODE</a></p>
<h5><a id="RULE"></a>/*+ RULE */</h5>
<p style="padding-left:30px;">Официально не поддерживается, начиная с Oracle 10, используется оптимизация по точно оределённым правилам (Rule Based Optimization) без учёта статистики объектов бд. Описание применяемых правил для инилизационного параметра <a title="iusoltsev.wordpress.com" href="https://iusoltsev.wordpress.com/home/individual-sql-and-cbo/oracle-parameters/#rule" target="_self">optimizer_mode = rule</a></p>
<p style="padding-left:30px;">В Oracle 11gR2 введены <a title="Why was the RULE hint ignored? " href="http://blogs.oracle.com/optimizer/entry/why_was_the_rule_hint">дополнительные ограничения использования подсказки /*+ rule*/</a></p>
<p style="padding-left:30px;">В частности, несмотря на использование подсказки <strong>RULE </strong>Oracle будет использовать <strong>Cost-Based Optimization</strong>, если:</p>
<blockquote>
<ul>
<li>кроме <strong>RULE</strong> в запросе используются другие подсказки</li>
<li>запрос использует партицированные или таблицы, организованные в виде индекса (IOT), или материализованные представления (mview)</li>
<li>в запросе используются кляузы SAMPLE, SPREADSHEET, конструкции GROUPING SETS</li>
<li>в запросе используются ANSI <strong>left|full outer join</strong></li>
<li>запрос выполняется параллельно</li>
<li>используется <strong>Flashback cursor (as of [scn|timestamp])</strong></li>
<li>…</li>
</ul>
<p>В 11.2 при использовании <strong>RBO</strong> может формироваться трейс оптимизатора и использоваться некоторые преобразования запросов за исключением <strong>Cost-Based Query Transformation</strong> (что логично:) — см. замечания в <a href="https://iusoltsev.wordpress.com/2011/07/01/%D0%B8%D0%BD%D0%B4%D0%B5%D0%BA%D1%81-unusable-hint-index-rbo-11-2/#RBO">Индекс в статусе unusable, подсказка INDEX и обновлённый RBO в Oracle 11.2</a></p></blockquote>
<h5><a id="ALL_ROWS"></a>/*+ ALL_ROWS */</h5>
<p style="padding-left:30px;">«Подсказка <strong>ALL_ROWS</strong> определяет целью скорейшее выполнение всего запроса с минимальным расходом ресурсов (<strong>best throughput</strong> при извлечении всего результирующего набора данных). При одновременном с ALL_ROWS или FIRST_ROWS указании подсказок, определяющих методы доступа к данным (NO_INDEX_SS, INDEX_COMBINE,..) или указывающие методы объединения объектов БД (LEADING, USE_NL_WITH_INDEX,..), оптимизатор отдаёт предпочтение подсказкам методов доступа и объединения»</p>
<h5><a id="FIRST_ROWS"></a>/*+ FIRST_ROWS */</h5>
<p style="padding-left:30px;">Из документации Oracle 8: «Подсказка <strong>FIRST_ROWS</strong> определяет стоимостной подход (<strong>cost-based approach</strong>) для оптимизации блоков запроса (<strong>statement block</strong>) с целью лучшего времени отклика (<strong>response time</strong>, минимального расхода ресурсов для возвращения первых строк запроса). В соответствии с этой подсказкой оптимизатор делает следующие предпочтения [в выборе операций доступа к данным и методов соединения]:</p>
<blockquote>
<ul>
<li>При наличии оптимизатор использует сканирование по индексу <em>(</em><strong>index scan</strong>) вместо полного сканирования таблицы (<strong>full table scan</strong>)</li>
<li>Если доступно сканирование по индексу <em>(</em><strong>index scan</strong>), оптимизатор выбирает <strong><a title="https://iusoltsev.wordpress.com/" href="https://iusoltsev.wordpress.com/home/individual-sql-and-cbo/cbo-access-path/#nested_loops" target="_self">nested loops join</a></strong> вместо <strong><a title="https://iusoltsev.wordpress.com/" href="https://iusoltsev.wordpress.com/home/individual-sql-and-cbo/cbo-access-path/#sort_merge_join" target="_self">sort-merge join</a></strong> в случае, когда сканируемая индексированная таблица может быть использована как ведомая таблица (<strong>inner table</strong>) для операции <strong>nested loops</strong></li>
<li>Если использование индекса <em>(</em><strong>index scan</strong>) может быть использовано для получения отсортированных данных (в порядке, определённом фразой ORDER BY), оптимизатор выбирает индексный доступ во избежание дополнительной сортировки»</li>
</ul>
</blockquote>
<p style="padding-left:30px;">Начиная с Oracle 9i: «Подсказка FIRST_ROWS указанная без аргументов, предназначенная для оптимизации плана выполнения с целью скорейшего возвращения первой строки запроса, сохраняется только для обратной совместимости (<strong>backward compatibility</strong>) и стабильности планов выполнения (<strong>plan stability</strong>)»</p>
<p style="padding-left:30px;">Значение инилизационного параметра OPTIMIZER_MODE=FIRST_ROWS (что равносильно применению подсказки FIRST_ROWS для всех запросов) аннонсируется в документации вплоть до версии <a title="Oracle 11.2 docs" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10820/initparams165.htm#REFRN10145" target="_blank">Oracle 11.2</a></p>
<h5><a id="FIRST_ROWS_N"></a>/*+ FIRST_ROWS(n) */</h5>
<p style="padding-left:30px;">Оптимизация, основанная на стоимости (<strong>Cost Based Optimization</strong>) + использование правил (предпочтений в выборе плана) с целью получения лучшего времени отклика для получения первых n строк. План рассчитывается с учётом значения n, как целевого количества выбранных запросом строк (<strong>query cardinality</strong>).</p>
<p style="padding-left:30px;">См. описание правил для параметра <a title="iusoltsev.wordpress.com" href="https://iusoltsev.wordpress.com/home/individual-sql-and-cbo/oracle-parameters/#first_rows" target="_self">optimizer_mode = first_rows</a></p>
<p style="padding-left:30px;"><del>Не совсем понятная</del> фраза в <a title="Oracle docs" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10592/sql_elements006.htm#SQLRF50302" target="_blank">документации</a>: «<span style="text-decoration:underline;">Оптимизатор игнорирует эту подсказку</span> в SQL предложениях DELETE и UPDATE и <span style="text-decoration:underline;">в запросах SELECT, включающих блокирующие операции, такие как сортировки и группировки</span>. Такие SQL предложения не могут быть оптимизированы с целью наименьшего времени отклика (<strong>best response time</strong>), поскольку Oracle должен обработать все строки запроса до того, как вернуть первую строку результата. При указании этой подсказки запросы указанного типа оптимизируются с целью лучшего времени получения всех строк запроса с минимальным расходом ресурсов (<strong>best throughput</strong>, как при использовании подсказки ALL_ROWS)»</p>
<p style="padding-left:30px;"><a href="http://dioncho.wordpress.com/2009/01/30/89/">Oracle always uses <strong>ALL_ROWS mode internally</strong> for DML statement</a> — в блоге Dion Cho есть показательный пример для версии 10.2</p>
<p style="padding-left:30px;">В Oracle 11.2 ничего не изменилось — независимо от количества обновляемых строк (<strong>Rows</strong>), устанавливаемого функцией <strong>rownum</strong> ни планы выполнения (кроме дополнительной операции <strong>COUNT STOPKEY</strong>), ни стоимость, ни ожидаемое время (<strong>Time</strong>) не меняются:</p>
<div><div id="highlighter_32874" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql comments">-- План при обновлении ВСЕХ строк таблицы</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="sql plain">11.2.0.3@SQL&gt; </code><code class="sql keyword">update</code> <code class="sql plain">T</code></div><div class="line number4 index3 alt1"><code class="sql plain">...</code></div><div class="line number5 index4 alt2"><code class="sql plain">5&nbsp; /</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="sql comments">-------------------------------------------------------------------------------</code></div><div class="line number8 index7 alt1"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number9 index8 alt2"><code class="sql comments">-------------------------------------------------------------------------------</code></div><div class="line number10 index9 alt1"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">UPDATE</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp; 1129K|&nbsp;&nbsp;&nbsp; 43M|&nbsp; 5751K (20)| 17:34:32 |</code></div><div class="line number11 index10 alt2"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; </code><code class="sql keyword">UPDATE</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number12 index11 alt1"><code class="sql plain">|*&nbsp; 2 |&nbsp;&nbsp; HASH </code><code class="sql color1">JOIN</code> <code class="sql plain">SEMI&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp; 1129K|&nbsp;&nbsp;&nbsp; 43M|&nbsp;&nbsp; 105K&nbsp; (1)| 00:19:26 |</code></div><div class="line number13 index12 alt2"><code class="sql plain">|&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">BY</code> <code class="sql keyword">INDEX</code> <code class="sql plain">ROWID|&nbsp; 1129K|&nbsp;&nbsp;&nbsp; 33M| 75115&nbsp;&nbsp; (1)| 00:13:47 |</code></div><div class="line number14 index13 alt1"><code class="sql plain">|*&nbsp; 4 |&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql plain">RANGE SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp; 1129K|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp; 5531&nbsp;&nbsp; (1)| 00:01:01 |</code></div><div class="line number15 index14 alt2"><code class="sql plain">|*&nbsp; 5 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql plain">FAST </code><code class="sql keyword">FULL</code> <code class="sql plain">SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 11M|&nbsp;&nbsp;&nbsp; 95M| 16079&nbsp;&nbsp; (1)| 00:02:57 |</code></div><div class="line number16 index15 alt1"><code class="sql plain">|&nbsp;&nbsp; 6 |&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">BY</code> <code class="sql keyword">INDEX</code> <code class="sql plain">ROWID |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp; 9 |&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number17 index16 alt2"><code class="sql plain">|*&nbsp; 7 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql keyword">UNIQUE</code> <code class="sql plain">SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number18 index17 alt1"><code class="sql comments">-------------------------------------------------------------------------------</code></div><div class="line number19 index18 alt2">&nbsp;</div><div class="line number20 index19 alt1"><code class="sql comments">-- План при обновлении ОДНОЙ строки таблицы</code></div><div class="line number21 index20 alt2">&nbsp;</div><div class="line number22 index21 alt1"><code class="sql plain">11.2.0.3@SQL&gt; </code><code class="sql keyword">update</code> <code class="sql plain">T</code></div><div class="line number23 index22 alt2"><code class="sql plain">...</code></div><div class="line number24 index23 alt1"><code class="sql plain">5&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">rownum 6&nbsp; /</code></div><div class="line number25 index24 alt2">&nbsp;</div><div class="line number26 index25 alt1"><code class="sql comments">--------------------------------------------------------------------------------</code></div><div class="line number27 index26 alt2"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number28 index27 alt1"><code class="sql comments">--------------------------------------------------------------------------------</code></div><div class="line number29 index28 alt2"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">UPDATE</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 40 |&nbsp; 5751K (20)| 17:34:32 |</code></div><div class="line number30 index29 alt1"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; </code><code class="sql keyword">UPDATE</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number31 index30 alt2"><code class="sql plain">|*&nbsp; 2 |&nbsp;&nbsp; </code><code class="sql color2">COUNT</code> <code class="sql plain">STOPKEY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number32 index31 alt1"><code class="sql plain">|*&nbsp; 3 |&nbsp;&nbsp;&nbsp; HASH </code><code class="sql color1">JOIN</code> <code class="sql plain">SEMI&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp; 1129K|&nbsp;&nbsp;&nbsp; 43M|&nbsp;&nbsp; 105K&nbsp; (1)| 00:19:26 |</code></div><div class="line number33 index32 alt2"><code class="sql plain">|&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">BY</code> <code class="sql keyword">INDEX</code> <code class="sql plain">ROWID|&nbsp; 1129K|&nbsp;&nbsp;&nbsp; 33M| 75115&nbsp;&nbsp; (1)| 00:13:47 |</code></div><div class="line number34 index33 alt1"><code class="sql plain">|*&nbsp; 5 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql plain">RANGE SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp; 1129K|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp; 5531&nbsp;&nbsp; (1)| 00:01:01 |</code></div><div class="line number35 index34 alt2"><code class="sql plain">|*&nbsp; 6 |&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql plain">FAST </code><code class="sql keyword">FULL</code> <code class="sql plain">SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 11M|&nbsp;&nbsp;&nbsp; 95M| 16079&nbsp;&nbsp; (1)| 00:02:57 |</code></div><div class="line number36 index35 alt1"><code class="sql plain">|&nbsp;&nbsp; 7 |&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">BY</code> <code class="sql keyword">INDEX</code> <code class="sql plain">ROWID&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp; 9 |&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number37 index36 alt2"><code class="sql plain">|*&nbsp; 8 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql keyword">UNIQUE</code> <code class="sql plain">SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number38 index37 alt1"><code class="sql comments">--------------------------------------------------------------------------------</code></div></div></td></tr></tbody></table></div></div>
<p style="padding-left:30px;">— при попытке обновить только одну строку Oracle выбирает тот же план с недешёвой операцией <strong>HASH JOIN SEMI</strong> (в запроса используется конструкция <strong>EXISTS</strong>) — более подходящей для получения всех строк обновляемой таблицы (<strong>ALL_ROWS mode</strong>)</p>
<p style="padding-left:30px;">Простой тест для показывает, как по-разному режимы <strong>ALL_ROWS</strong>, <strong>FIRST_ROWS</strong> и <strong>FIRST_ROWS(n)</strong> влияют на поведение оптимизатора: собственно, планы выполнения и методы доступа к данным + Cost + Rows :) на примерах сортировки или группировки при использовании бессмысленного условия <strong>object_id &gt; 1</strong> — которому удовлетворяют все строки таблицы T1 — по условию создания таблицы <strong>min(object_id)=2</strong>)*:</p>
<div><div id="highlighter_540250" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">11.2.0.3.@SQL&gt; show parameter optimizer_mode</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="sql keyword">NAME</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">TYPE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; VALUE</code></div><div class="line number4 index3 alt1"><code class="sql comments">------------------------------------ ----------- ------------------------------</code></div><div class="line number5 index4 alt2"><code class="sql plain">optimizer_mode&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ALL_ROWS</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">create</code> <code class="sql keyword">table</code> <code class="sql plain">T1 </code><code class="sql keyword">as</code> <code class="sql keyword">select</code> <code class="sql plain">* </code><code class="sql keyword">from</code> <code class="sql plain">dba_objects</code></div><div class="line number8 index7 alt1"><code class="sql plain">2&nbsp; /</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="sql keyword">Table</code> <code class="sql plain">created.</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="sql plain">SQL&gt; </code><code class="sql keyword">create</code> <code class="sql keyword">index</code> <code class="sql plain">T1_IDX </code><code class="sql keyword">on</code> <code class="sql plain">T1(OBJECT_ID)</code></div><div class="line number13 index12 alt2"><code class="sql plain">2&nbsp; /</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="sql keyword">Index</code> <code class="sql plain">created.</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">exec</code> <code class="sql plain">dbms_stats.gather_table_stats(</code><code class="sql string">''</code><code class="sql plain">,</code><code class="sql string">'T1'</code><code class="sql plain">);</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="sql plain">PL/SQL </code><code class="sql keyword">procedure</code> <code class="sql plain">successfully completed.</code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="sql plain">SQL&gt; </code><code class="sql comments">----------------------------------------------------------- ORDER BY</code></div><div class="line number22 index21 alt1"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql comments">/*+ ALL_ROWS*/</code></div><div class="line number23 index22 alt2"><code class="sql plain">2&nbsp;&nbsp; *</code></div><div class="line number24 index23 alt1"><code class="sql plain">3&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">t1</code></div><div class="line number25 index24 alt2"><code class="sql plain">4&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql plain">object_name </code><code class="sql color1">like</code> <code class="sql string">'%#%'</code></div><div class="line number26 index25 alt1"><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">object_id &gt; 1</code></div><div class="line number27 index26 alt2"><code class="sql plain">6&nbsp;&nbsp; </code><code class="sql keyword">order</code> <code class="sql keyword">by</code> <code class="sql plain">object_id;</code></div><div class="line number28 index27 alt1">&nbsp;</div><div class="line number29 index28 alt2"><code class="sql plain">30 </code><code class="sql keyword">rows</code> <code class="sql plain">selected.</code></div><div class="line number30 index29 alt1">&nbsp;</div><div class="line number31 index30 alt2"><code class="sql comments">---------------------------------------------------------------------------</code></div><div class="line number32 index31 alt1"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code> <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number33 index32 alt2"><code class="sql comments">---------------------------------------------------------------------------</code></div><div class="line number34 index33 alt1"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp; 2952 |&nbsp;&nbsp; 279K|&nbsp;&nbsp; 164&nbsp;&nbsp; (2)| 00:00:01 |</code></div><div class="line number35 index34 alt2"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; SORT </code><code class="sql keyword">ORDER</code> <code class="sql keyword">BY</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp; 2952 |&nbsp;&nbsp; 279K|&nbsp;&nbsp; 164&nbsp;&nbsp; (2)| 00:00:01 |</code></div><div class="line number36 index35 alt1"><code class="sql plain">|*&nbsp; 2 |&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code><code class="sql plain">| T1&nbsp;&nbsp; |&nbsp; 2952 |&nbsp;&nbsp; 279K|&nbsp;&nbsp; 163&nbsp;&nbsp; (1)| 00:00:01 |</code></div><div class="line number37 index36 alt2"><code class="sql comments">---------------------------------------------------------------------------</code></div><div class="line number38 index37 alt1">&nbsp;</div><div class="line number39 index38 alt2"><code class="sql plain">Predicate Information (identified </code><code class="sql keyword">by</code> <code class="sql plain">operation id):</code></div><div class="line number40 index39 alt1"><code class="sql comments">---------------------------------------------------</code></div><div class="line number41 index40 alt2">&nbsp;</div><div class="line number42 index41 alt1"><code class="sql plain">2 - filter(</code><code class="sql string">"OBJECT_NAME"</code> <code class="sql color1">LIKE</code> <code class="sql string">'%#%'</code> <code class="sql color1">AND</code> <code class="sql string">"OBJECT_NAME"</code> <code class="sql keyword">IS</code> <code class="sql color1">NOT</code> <code class="sql color1">NULL</code></div><div class="line number43 index42 alt2"><code class="sql color1">AND</code> <code class="sql string">"OBJECT_ID"</code><code class="sql plain">&gt;1)</code></div><div class="line number44 index43 alt1">&nbsp;</div><div class="line number45 index44 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql comments">/*+ FIRST_ROWS*/</code></div><div class="line number46 index45 alt1"><code class="sql plain">2&nbsp;&nbsp; *</code></div><div class="line number47 index46 alt2"><code class="sql plain">3&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">t1</code></div><div class="line number48 index47 alt1"><code class="sql plain">4&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql plain">object_name </code><code class="sql color1">like</code> <code class="sql string">'%#%'</code></div><div class="line number49 index48 alt2"><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">object_id &gt; 1</code></div><div class="line number50 index49 alt1"><code class="sql plain">6&nbsp;&nbsp; </code><code class="sql keyword">order</code> <code class="sql keyword">by</code> <code class="sql plain">object_id;</code></div><div class="line number51 index50 alt2">&nbsp;</div><div class="line number52 index51 alt1"><code class="sql plain">30 </code><code class="sql keyword">rows</code> <code class="sql plain">selected.</code></div><div class="line number53 index52 alt2">&nbsp;</div><div class="line number54 index53 alt1"><code class="sql plain">Execution Plan</code></div><div class="line number55 index54 alt2"><code class="sql comments">----------------------------------------------------------</code></div><div class="line number56 index55 alt1"><code class="sql plain">Plan hash value: 546753835</code></div><div class="line number57 index56 alt2">&nbsp;</div><div class="line number58 index57 alt1"><code class="sql comments">--------------------------------------------------------------------------------------</code></div><div class="line number59 index58 alt2"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code>&nbsp;&nbsp; <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number60 index59 alt1"><code class="sql comments">--------------------------------------------------------------------------------------</code></div><div class="line number61 index60 alt2"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp; 2952 |&nbsp;&nbsp; 279K|&nbsp;&nbsp; 553&nbsp;&nbsp; (1)| 00:00:01 | </code><code class="sql comments">-- при тех же ожидаемых Rows=2952 - изменились план и стоимость</code></div><div class="line number62 index61 alt1"><code class="sql plain">|*&nbsp; 1 |&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">BY</code> <code class="sql keyword">INDEX</code> <code class="sql plain">ROWID| T1&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp; 2952 |&nbsp;&nbsp; 279K|&nbsp;&nbsp; 553&nbsp;&nbsp; (1)| 00:00:01 | </code><code class="sql comments">-- исключена сортировка</code></div><div class="line number63 index62 alt2"><code class="sql plain">|*&nbsp; 2 |&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql plain">RANGE SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | T1_IDX | 59030 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 66&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number64 index63 alt1"><code class="sql comments">--------------------------------------------------------------------------------------</code></div><div class="line number65 index64 alt2">&nbsp;</div><div class="line number66 index65 alt1"><code class="sql plain">Predicate Information (identified </code><code class="sql keyword">by</code> <code class="sql plain">operation id):</code></div><div class="line number67 index66 alt2"><code class="sql comments">---------------------------------------------------</code></div><div class="line number68 index67 alt1">&nbsp;</div><div class="line number69 index68 alt2"><code class="sql plain">1 - filter(</code><code class="sql string">"OBJECT_NAME"</code> <code class="sql color1">LIKE</code> <code class="sql string">'%#%'</code> <code class="sql color1">AND</code> <code class="sql string">"OBJECT_NAME"</code> <code class="sql keyword">IS</code> <code class="sql color1">NOT</code> <code class="sql color1">NULL</code><code class="sql plain">)</code></div><div class="line number70 index69 alt1"><code class="sql plain">2 - access(</code><code class="sql string">"OBJECT_ID"</code><code class="sql plain">&gt;1)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql comments">-- бессмысленное условие: INDEX RANGE SCAN только экономит на сортировке</code></div><div class="line number71 index70 alt2">&nbsp;</div><div class="line number72 index71 alt1"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql comments">/*+ FIRST_ROWS(10)*/</code></div><div class="line number73 index72 alt2"><code class="sql plain">2&nbsp;&nbsp; *</code></div><div class="line number74 index73 alt1"><code class="sql plain">3&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">t1</code></div><div class="line number75 index74 alt2"><code class="sql plain">4&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql plain">object_name </code><code class="sql color1">like</code> <code class="sql string">'%#%'</code></div><div class="line number76 index75 alt1"><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">object_id &gt; 1</code></div><div class="line number77 index76 alt2"><code class="sql plain">6&nbsp;&nbsp; </code><code class="sql keyword">order</code> <code class="sql keyword">by</code> <code class="sql plain">object_id;</code></div><div class="line number78 index77 alt1">&nbsp;</div><div class="line number79 index78 alt2"><code class="sql plain">30 </code><code class="sql keyword">rows</code> <code class="sql plain">selected.</code></div><div class="line number80 index79 alt1">&nbsp;</div><div class="line number81 index80 alt2"><code class="sql plain">Execution Plan</code></div><div class="line number82 index81 alt1"><code class="sql comments">----------------------------------------------------------</code></div><div class="line number83 index82 alt2"><code class="sql plain">Plan hash value: 546753835</code></div><div class="line number84 index83 alt1">&nbsp;</div><div class="line number85 index84 alt2"><code class="sql comments">--------------------------------------------------------------------------------------</code></div><div class="line number86 index85 alt1"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code>&nbsp;&nbsp; <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number87 index86 alt2"><code class="sql comments">--------------------------------------------------------------------------------------</code></div><div class="line number88 index87 alt1"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 10 |&nbsp;&nbsp; 970 |&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp; (0)| 00:00:01 | </code><code class="sql comments">-- абс.тот же план (Plan hash value) рассчитан по-другому:</code></div><div class="line number89 index88 alt2"><code class="sql plain">|*&nbsp; 1 |&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">BY</code> <code class="sql keyword">INDEX</code> <code class="sql plain">ROWID| T1&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 10 |&nbsp;&nbsp; 970 |&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp; (0)| 00:00:01 | </code><code class="sql comments">-- изменились Cardinality (Rows) и итоговая стоимость</code></div><div class="line number90 index89 alt1"><code class="sql plain">|*&nbsp; 2 |&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql plain">RANGE SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | T1_IDX |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number91 index90 alt2"><code class="sql comments">--------------------------------------------------------------------------------------</code></div><div class="line number92 index91 alt1">&nbsp;</div><div class="line number93 index92 alt2"><code class="sql plain">Predicate Information (identified </code><code class="sql keyword">by</code> <code class="sql plain">operation id):</code></div><div class="line number94 index93 alt1"><code class="sql comments">---------------------------------------------------</code></div><div class="line number95 index94 alt2">&nbsp;</div><div class="line number96 index95 alt1"><code class="sql plain">1 - filter(</code><code class="sql string">"OBJECT_NAME"</code> <code class="sql color1">LIKE</code> <code class="sql string">'%#%'</code> <code class="sql color1">AND</code> <code class="sql string">"OBJECT_NAME"</code> <code class="sql keyword">IS</code> <code class="sql color1">NOT</code> <code class="sql color1">NULL</code><code class="sql plain">)</code></div><div class="line number97 index96 alt2"><code class="sql plain">2 - access(</code><code class="sql string">"OBJECT_ID"</code><code class="sql plain">&gt;1)</code></div><div class="line number98 index97 alt1">&nbsp;</div><div class="line number99 index98 alt2"><code class="sql plain">SQL&gt; </code><code class="sql comments">----------------------------------------------------------- GROUP BY</code></div><div class="line number100 index99 alt1"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql comments">/*+ ALL_ROWS*/</code></div><div class="line number101 index100 alt2"><code class="sql plain">2&nbsp;&nbsp; object_id, </code><code class="sql color2">count</code><code class="sql plain">(*)</code></div><div class="line number102 index101 alt1"><code class="sql plain">3&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">t1</code></div><div class="line number103 index102 alt2"><code class="sql plain">4&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql plain">object_name </code><code class="sql color1">like</code> <code class="sql string">'%#%'</code></div><div class="line number104 index103 alt1"><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">object_id &gt; 1</code></div><div class="line number105 index104 alt2"><code class="sql plain">6&nbsp;&nbsp; </code><code class="sql keyword">group</code> <code class="sql keyword">by</code> <code class="sql plain">object_id;</code></div><div class="line number106 index105 alt1">&nbsp;</div><div class="line number107 index106 alt2"><code class="sql plain">30 </code><code class="sql keyword">rows</code> <code class="sql plain">selected.</code></div><div class="line number108 index107 alt1">&nbsp;</div><div class="line number109 index108 alt2"><code class="sql comments">---------------------------------------------------------------------------</code></div><div class="line number110 index109 alt1"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code> <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number111 index110 alt2"><code class="sql comments">---------------------------------------------------------------------------</code></div><div class="line number112 index111 alt1"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp; 2952 | 88560 |&nbsp;&nbsp; 164&nbsp;&nbsp; (2)| 00:00:01 |</code></div><div class="line number113 index112 alt2"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; HASH </code><code class="sql keyword">GROUP</code> <code class="sql keyword">BY</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp; 2952 | 88560 |&nbsp;&nbsp; 164&nbsp;&nbsp; (2)| 00:00:01 |</code></div><div class="line number114 index113 alt1"><code class="sql plain">|*&nbsp; 2 |&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code><code class="sql plain">| T1&nbsp;&nbsp; |&nbsp; 2952 | 88560 |&nbsp;&nbsp; 163&nbsp;&nbsp; (1)| 00:00:01 |</code></div><div class="line number115 index114 alt2"><code class="sql comments">---------------------------------------------------------------------------</code></div><div class="line number116 index115 alt1">&nbsp;</div><div class="line number117 index116 alt2"><code class="sql plain">Predicate Information (identified </code><code class="sql keyword">by</code> <code class="sql plain">operation id):</code></div><div class="line number118 index117 alt1"><code class="sql comments">---------------------------------------------------</code></div><div class="line number119 index118 alt2">&nbsp;</div><div class="line number120 index119 alt1"><code class="sql plain">2 - filter(</code><code class="sql string">"OBJECT_NAME"</code> <code class="sql color1">LIKE</code> <code class="sql string">'%#%'</code> <code class="sql color1">AND</code> <code class="sql string">"OBJECT_NAME"</code> <code class="sql keyword">IS</code> <code class="sql color1">NOT</code> <code class="sql color1">NULL</code></div><div class="line number121 index120 alt2"><code class="sql color1">AND</code> <code class="sql string">"OBJECT_ID"</code><code class="sql plain">&gt;1)</code></div><div class="line number122 index121 alt1">&nbsp;</div><div class="line number123 index122 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql comments">/*+ FIRST_ROWS*/</code></div><div class="line number124 index123 alt1"><code class="sql plain">2&nbsp;&nbsp; object_id, </code><code class="sql color2">count</code><code class="sql plain">(*)</code></div><div class="line number125 index124 alt2"><code class="sql plain">3&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">t1</code></div><div class="line number126 index125 alt1"><code class="sql plain">4&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql plain">object_name </code><code class="sql color1">like</code> <code class="sql string">'%#%'</code></div><div class="line number127 index126 alt2"><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">object_id &gt; 1</code></div><div class="line number128 index127 alt1"><code class="sql plain">6&nbsp;&nbsp; </code><code class="sql keyword">group</code> <code class="sql keyword">by</code> <code class="sql plain">object_id;</code></div><div class="line number129 index128 alt2">&nbsp;</div><div class="line number130 index129 alt1"><code class="sql plain">30 </code><code class="sql keyword">rows</code> <code class="sql plain">selected.</code></div><div class="line number131 index130 alt2">&nbsp;</div><div class="line number132 index131 alt1"><code class="sql comments">---------------------------------------------------------------------------</code></div><div class="line number133 index132 alt2"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code> <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number134 index133 alt1"><code class="sql comments">---------------------------------------------------------------------------</code></div><div class="line number135 index134 alt2"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp; 2952 | 88560 |&nbsp;&nbsp; 164&nbsp;&nbsp; (2)| 00:00:01 |</code></div><div class="line number136 index135 alt1"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; HASH </code><code class="sql keyword">GROUP</code> <code class="sql keyword">BY</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp; 2952 | 88560 |&nbsp;&nbsp; 164&nbsp;&nbsp; (2)| 00:00:01 |</code></div><div class="line number137 index136 alt2"><code class="sql plain">|*&nbsp; 2 |&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code><code class="sql plain">| T1&nbsp;&nbsp; |&nbsp; 2952 | 88560 |&nbsp;&nbsp; 163&nbsp;&nbsp; (1)| 00:00:01 |</code></div><div class="line number138 index137 alt1"><code class="sql comments">---------------------------------------------------------------------------</code></div><div class="line number139 index138 alt2">&nbsp;</div><div class="line number140 index139 alt1"><code class="sql plain">Predicate Information (identified </code><code class="sql keyword">by</code> <code class="sql plain">operation id):</code></div><div class="line number141 index140 alt2"><code class="sql comments">---------------------------------------------------</code></div><div class="line number142 index141 alt1">&nbsp;</div><div class="line number143 index142 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">2 - filter(</code><code class="sql string">"OBJECT_NAME"</code> <code class="sql color1">LIKE</code> <code class="sql string">'%#%'</code> <code class="sql color1">AND</code> <code class="sql string">"OBJECT_NAME"</code> <code class="sql keyword">IS</code> <code class="sql color1">NOT</code> <code class="sql color1">NULL</code></div><div class="line number144 index143 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql color1">AND</code> <code class="sql string">"OBJECT_ID"</code><code class="sql plain">&gt;1)</code></div><div class="line number145 index144 alt2">&nbsp;</div><div class="line number146 index145 alt1"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql comments">/*+ FIRST_ROWS(10)*/</code></div><div class="line number147 index146 alt2"><code class="sql plain">2&nbsp;&nbsp; object_id, </code><code class="sql color2">count</code><code class="sql plain">(*)</code></div><div class="line number148 index147 alt1"><code class="sql plain">3&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">t1</code></div><div class="line number149 index148 alt2"><code class="sql plain">4&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql plain">object_name </code><code class="sql color1">like</code> <code class="sql string">'%#%'</code></div><div class="line number150 index149 alt1"><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">object_id &gt; 1</code></div><div class="line number151 index150 alt2"><code class="sql plain">6&nbsp;&nbsp; </code><code class="sql keyword">group</code> <code class="sql keyword">by</code> <code class="sql plain">object_id;</code></div><div class="line number152 index151 alt1">&nbsp;</div><div class="line number153 index152 alt2"><code class="sql plain">30 </code><code class="sql keyword">rows</code> <code class="sql plain">selected.</code></div><div class="line number154 index153 alt1">&nbsp;</div><div class="line number155 index154 alt2"><code class="sql comments">---------------------------------------------------------------------------------------</code></div><div class="line number156 index155 alt1"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code>&nbsp;&nbsp; <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number157 index156 alt2"><code class="sql comments">---------------------------------------------------------------------------------------</code></div><div class="line number158 index157 alt1"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 10 |&nbsp;&nbsp; 300 |&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp; (0)| 00:00:01 | </code><code class="sql comments">-- абсолютно другой план - дешевле и с более точной оценкой Rows</code></div><div class="line number159 index158 alt2"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; SORT </code><code class="sql keyword">GROUP</code> <code class="sql keyword">BY</code> <code class="sql plain">NOSORT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 10 |&nbsp;&nbsp; 300 |&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp; (0)| 00:00:01 | </code><code class="sql comments">-- вместо HASH GROUP BY используется SORT GROUP BY NOSORT,</code></div><div class="line number160 index159 alt1"><code class="sql plain">|*&nbsp; 2 |&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">BY</code> <code class="sql keyword">INDEX</code> <code class="sql plain">ROWID| T1&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 10 |&nbsp;&nbsp; 300 |&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp; (0)| 00:00:01 | </code><code class="sql comments">-- благодаря индексному доступу к отсортированным данным</code></div><div class="line number161 index160 alt2"><code class="sql plain">|*&nbsp; 3 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql plain">RANGE SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | T1_IDX |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number162 index161 alt1"><code class="sql comments">---------------------------------------------------------------------------------------</code></div><div class="line number163 index162 alt2">&nbsp;</div><div class="line number164 index163 alt1"><code class="sql plain">Predicate Information (identified </code><code class="sql keyword">by</code> <code class="sql plain">operation id):</code></div><div class="line number165 index164 alt2"><code class="sql comments">---------------------------------------------------</code></div><div class="line number166 index165 alt1">&nbsp;</div><div class="line number167 index166 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">2 - filter(</code><code class="sql string">"OBJECT_NAME"</code> <code class="sql color1">LIKE</code> <code class="sql string">'%#%'</code> <code class="sql color1">AND</code> <code class="sql string">"OBJECT_NAME"</code> <code class="sql keyword">IS</code> <code class="sql color1">NOT</code> <code class="sql color1">NULL</code><code class="sql plain">)</code></div><div class="line number168 index167 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">3 - access(</code><code class="sql string">"OBJECT_ID"</code><code class="sql plain">&gt;1)</code></div></div></td></tr></tbody></table></div></div>
<p style="padding-left:30px;">*) статистика для таблицы T1 актуальна и оптимизатор прекрасно «знает» о минимальном и максимальном значении T1.Object_id:</p>
<div><div id="highlighter_559584" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">set</code> <code class="sql plain">serveroutput </code><code class="sql keyword">on</code></div><div class="line number2 index1 alt1"><code class="sql plain">SQL&gt; </code><code class="sql keyword">declare</code></div><div class="line number3 index2 alt2"><code class="sql plain">2&nbsp;&nbsp;&nbsp; low_value_raw&nbsp; RAW(2000);</code></div><div class="line number4 index3 alt1"><code class="sql plain">3&nbsp;&nbsp;&nbsp; high_value_raw RAW(2000);</code></div><div class="line number5 index4 alt2"><code class="sql plain">4&nbsp;&nbsp;&nbsp; low_value_num&nbsp; number;</code></div><div class="line number6 index5 alt1"><code class="sql plain">5&nbsp;&nbsp;&nbsp; high_value_num number;</code></div><div class="line number7 index6 alt2"><code class="sql plain">6&nbsp; </code><code class="sql keyword">begin</code></div><div class="line number8 index7 alt1"><code class="sql plain">7&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">select</code> <code class="sql plain">low_value, high_value</code></div><div class="line number9 index8 alt2"><code class="sql plain">8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">into</code> <code class="sql plain">low_value_raw, high_value_raw</code></div><div class="line number10 index9 alt1"><code class="sql plain">9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">user_tab_col_statistics</code></div><div class="line number11 index10 alt2"><code class="sql plain">10&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql plain">table_name = </code><code class="sql string">'T1'</code></div><div class="line number12 index11 alt1"><code class="sql plain">11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">column_name = </code><code class="sql string">'OBJECT_ID'</code><code class="sql plain">;</code></div><div class="line number13 index12 alt2"><code class="sql plain">12&nbsp;&nbsp;&nbsp; dbms_stats.convert_raw_value(low_value_raw, low_value_num);</code></div><div class="line number14 index13 alt1"><code class="sql plain">13&nbsp;&nbsp;&nbsp; dbms_stats.convert_raw_value(high_value_raw, high_value_num);</code></div><div class="line number15 index14 alt2"><code class="sql plain">14&nbsp;&nbsp;&nbsp; dbms_output.put_line(</code><code class="sql string">'Low value T1.OBJECT_ID = '</code> <code class="sql plain">|| low_value_num);</code></div><div class="line number16 index15 alt1"><code class="sql plain">15&nbsp;&nbsp;&nbsp; dbms_output.put_line(</code><code class="sql string">'High value T1.OBJECT_ID = '</code> <code class="sql plain">|| high_value_num);</code></div><div class="line number17 index16 alt2"><code class="sql plain">16&nbsp; </code><code class="sql keyword">end</code><code class="sql plain">;</code></div><div class="line number18 index17 alt1"><code class="sql plain">17&nbsp; /</code></div><div class="line number19 index18 alt2">&nbsp;</div><div class="line number20 index19 alt1"><code class="sql plain">Low value T1.OBJECT_ID = 2</code></div><div class="line number21 index20 alt2"><code class="sql plain">High value T1.OBJECT_ID = 107516</code></div></div></td></tr></tbody></table></div></div>
<p style="padding-left:30px;">или так, попроще:</p>
<div><div id="highlighter_385950" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql plain">UTL_RAW.CAST_TO_NUMBER(LOW_VALUE) </code><code class="sql keyword">as</code> <code class="sql string">"LOW"</code><code class="sql plain">,</code></div><div class="line number2 index1 alt1"><code class="sql plain">2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; UTL_RAW.CAST_TO_NUMBER(HIGH_VALUE) </code><code class="sql keyword">as</code> <code class="sql string">"HIGH"</code></div><div class="line number3 index2 alt2"><code class="sql plain">3&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">user_tab_col_statistics</code></div><div class="line number4 index3 alt1"><code class="sql plain">4&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql plain">table_name = </code><code class="sql string">'T1'</code></div><div class="line number5 index4 alt2"><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">column_name = </code><code class="sql string">'OBJECT_ID'</code><code class="sql plain">;</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">LOW&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; HIGH</code></div><div class="line number8 index7 alt1"><code class="sql comments">---------- ----------</code></div><div class="line number9 index8 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">2&nbsp;&nbsp;&nbsp;&nbsp; 107516</code></div></div></td></tr></tbody></table></div></div>
<h4>Access Path Hints</h4>
<p style="padding-left:30px;">Подсказки,определяющие конкретные способы доступа к данным, порядок и применяемые методы объединения промежуточных наборов данных (<strong>result sets</strong>)*</p>
<p style="padding-left:30px;">Том Кайт называет эти подсказки <a title="Ask Tom" href="http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:1197547100346966797" target="_blank">плохими (bad hints)</a>:</p>
<p style="padding-left:60px;">«Плохие подсказки указывают оптимизатору как следует действовать [при выполнении запроса], какой индекс использовать, в каком порядке обрабатывать таблицы, с помощью какой операции (<strong>join technique</strong>) производить соединение [источников данных]»</p>
<p style="padding-left:30px;">*) Перед применение необходимо учитывать вероятность изменения статистики системы и объектов (таблиц и индексов), используемых в запросе со временем и, как следствие, возможную неоптимальность указываемых операций для будущих наборов данных. План выполнения, оптимизированный с помощью подсказок этого типа в среде разработки, может оказаться далеко не оптимальным для боевой бд (<strong>production system</strong>) из-за отличающихся наборов данных и характеристик системы («железо»)</p>
<h5><a id="LEADING"></a>/*+ LEADING( [@query_block] [tablespec],[tablespec],.. ) */</h5>
<p style="padding-left:30px;">«Подсказка LEADING указывает оптимизатору использовать перечисленный порядок доступа к таблицам при построении плана выполнения запроса… более гибкая, чем ORDERED… Полностью игнорируются при использовании двух или более конфликтующих подсказок LEADING. Для оптимизатора подсказка ORDERED имеет преимущество против LEADING»</p>
<p style="padding-left:30px;">В версии 11.2 может игнорироваться оптимизатором при выполнении преобразований, основанных на стоимости (Cost-Based Query Transformation), например, <a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-access-path/#TE"><strong>Table Expansion</strong></a><strong></strong></p>
<h5><a id="ORDERED"></a>/*+ ORDERED */</h5>
<p style="padding-left:30px;">«Подсказка ORDERED указывает Oracle [при выполнении запроса] проводить соединение таблиц в том же порядке, в котором таблицы перечислены в конструкции FROM. Oracle рекомендует вместо ORDERED использовать подсказку LEADING, обладающую большей гибкостью…», т.е. дающей оптимизатору больше возможностей в выборе плана выполнения</p>
<h5><a id="USE_HASH"></a>/*+ USE_HASH( [@query_block] [tablespec] [tablespec]… ) */</h5>
<h5>/*+ NO_USE_HASH( [@query_block] [tablespec] [tablespec]… ) */</h5>
<p style="padding-left:30px;">…указывает оптимизатору использовать / не использовать операцию <strong>hash join</strong> для соединения каждой указанной таблицы с прочими источниками данных <a href="https://iusoltsev.wordpress.com/home/individual-sql-and-cbo/cbo-access-path/#hash_join">Операции CBO: Hash Join</a></p>
<h5><a id="USE_NL"></a>/*+ USE_NL ( [@query_block] [inner_table] ) */</h5>
<p style="padding-left:30px;"><a title="Постоянная ссылка: Индексный доступ к таблицам удалённого обзора" href="https://iusoltsev.wordpress.com/2013/10/15/remote-view-table-index-scan/" rel="bookmark">Индексный доступ к таблицам удалённого обзора</a></p>
<h5>/*+ NO_USE_NL ( [@query_block] [inner_table] ) */</h5>
<h5>/*+ USE_NL_WITH_INDEX ( [@query_block] inner_table [indexspec]) */</h5>
<p style="padding-left:30px;"><a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-access-path/#nested_loops">Операции CBO: Nested Loop Join</a></p>
<h5><a id="USE_MERGE"></a>/*+ USE_MERGE( [@query_block] [tablespec] … ) */</h5>
<h5>/*+ NO_USE_MERGE( [@query_block] [tablespec] … ) */</h5>
<p style="padding-left:30px;"><a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-access-path/#sort_merge_join">Операции CBO: Sort Merge Join</a></p>
<h5><a id="USE_HASH_AGGREGATION"></a>/*+ USE_HASH_AGGREGATION([@query_block]) */</h5>
<h5>/*+ NO_USE_HASH_AGGREGATION([@query_block]) */</h5>
<p style="padding-left:30px;">указывают оптимизатору использовать или не использовать вместо классической операции <strong>Sort group by</strong> относительно «новую» операцию группировки <a title="iusoltsev.wordpress.com" href="https://iusoltsev.wordpress.com/home/individual-sql-and-cbo/cbo-access-path/#hash_group_by" target="_self">Hash Group By</a></p>
<h5><a id="NATIVE_FULL_OUTER_JOIN"></a>/*+ NATIVE_FULL_OUTER_JOIN*/<br>
/*+ NO_NATIVE_FULL_OUTER_JOIN*/</h5>
<p style="padding-left:30px;">управление использованием механизма <a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-access-path/#Native_FOJ">Native Full Outer Join</a></p>
<h5><a id="INDEX_JOIN"></a>/*+ INDEX_JOIN ( [@query_block] tablespec [indexspec],… ) */</h5>
<p style="padding-left:30px;">использовать для получения результатов запроса временный индекс, получающийся в рез-те объединения существующих индексов методом Index [Hash] Join</p>
<h5><a id="INDEX_COMBINE"></a>/*+ INDEX_COMBINE ( [@query_block] tablespec [indexspec],… ) */</h5>
<p style="padding-left:30px;">использовать для получения результатов запроса Bitmap операции с ROWID, полученными при индексном доступе.</p>
<p style="padding-left:30px;">Сравнение 2-х последних методов: <a href="https://iusoltsev.wordpress.com/2013/03/03/index-join-index-bitmap-db-file-parallel-read-table-access/">Index Join vs Index Bitmap и использование db file parallel read при доступе к блокам таблицы</a></p>
<h5><a id="NUM_INDEX_KEYS"></a>/*+ NUM_INDEX_KEYS( table index numkeys ) */</h5>
<p style="padding-left:30px;">добавлен в версии 10.2 для управления кол-вом индексных ключей, используемых в INLIST ITERATOR с индексом по нескольким полям <a href="https://support.oracle.com/epmos/faces/DocContentDisplay?id=5152325.8">Bug 5152325  Enh: Add NUM_INDEX_KEYS hint</a><br>
Функционал подсказки исправлен для 11.2.0.3 и зафиксирован в 12.2 — <a href="http://orasql.org/2013/03/14/unresolved-quiz-avoiding-in-list-iterator/">Unresolved quiz: Avoiding in-list iterator</a></p>
<h5><a id="DRIVING_SITE"></a>/*+ DRIVING_SITE ( [@query_block] [tablespec] ) */</h5>
<p style="padding-left:30px;">«… подсказка указывает оптимизатору выполнять запрос на сайте [сайте таблицы, указанной в хинте], отличном от выбранного бд [Oracle]. Хинт полезен для оптимизации выполнения распределённых запросов»</p>
<p style="padding-left:30px;">В зависимости от подсказки запрос выполняется полностью на удалённом сайте — при указании удалённой таблицы в хинте <strong>DRIVING_SITE(e)</strong>:</p>
<div><div id="highlighter_948853" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code><code class="sql comments">--+ DRIVING_SITE(e)</code></div><div class="line number2 index1 alt1"><code class="sql plain">2&nbsp;&nbsp; </code><code class="sql color2">count</code><code class="sql plain">(*)</code></div><div class="line number3 index2 alt2"><code class="sql plain">3&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">emp@loopback_dblink e,</code></div><div class="line number4 index3 alt1"><code class="sql plain">4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dual</code></div><div class="line number5 index4 alt2"><code class="sql plain">5&nbsp; /</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="sql plain">Execution Plan</code></div><div class="line number8 index7 alt1"><code class="sql comments">-----------------------------------------------------------------------------------------</code></div><div class="line number9 index8 alt2"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code>&nbsp;&nbsp; <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">| Inst&nbsp;&nbsp; |</code><code class="sql color1">IN</code><code class="sql plain">-</code><code class="sql keyword">OUT</code><code class="sql plain">|</code></div><div class="line number10 index9 alt1"><code class="sql comments">-----------------------------------------------------------------------------------------</code></div><div class="line number11 index10 alt2"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT REMOTE|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp; (0)| 00:00:01 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql comments">-- ***</code></div><div class="line number12 index11 alt1"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; SORT AGGREGATE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number13 index12 alt2"><code class="sql plain">|&nbsp;&nbsp; 2 |&nbsp;&nbsp; MERGE </code><code class="sql color1">JOIN</code> <code class="sql plain">CARTESIAN |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp; (0)| 00:00:01 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number14 index13 alt1"><code class="sql plain">|&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; REMOTE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | DUAL&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ! | R-&gt;S |</code></div><div class="line number15 index14 alt2"><code class="sql plain">|&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp; BUFFER SORT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp; (0)| 00:00:01 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number16 index15 alt1"><code class="sql plain">|&nbsp;&nbsp; 5 |&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql keyword">FULL</code> <code class="sql plain">SCAN&nbsp;&nbsp;&nbsp; | PK_EMP |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp; (0)| 00:00:01 | ORCL1~ |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number17 index16 alt2"><code class="sql comments">-----------------------------------------------------------------------------------------</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="sql plain">Remote SQL Information (identified </code><code class="sql keyword">by</code> <code class="sql plain">operation id):</code></div><div class="line number20 index19 alt1"><code class="sql comments">----------------------------------------------------</code></div><div class="line number21 index20 alt2">&nbsp;</div><div class="line number22 index21 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">3 - </code><code class="sql keyword">SELECT</code> <code class="sql plain">0 </code><code class="sql keyword">FROM</code> <code class="sql string">"SYS"</code><code class="sql plain">.</code><code class="sql string">"DUAL"</code> <code class="sql string">"A1"</code> <code class="sql plain">(accessing </code><code class="sql string">'!'</code> <code class="sql plain">)</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="sql plain">Note</code></div><div class="line number25 index24 alt2"><code class="sql comments">-----</code></div><div class="line number26 index25 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">- fully remote statement </code><code class="sql comments">-- ***</code></div></div></td></tr></tbody></table></div></div>
<p style="padding-left:30px;">, либо локально, с копированием данных из удалённой таблицы на локальный инстанс — при использовании подсказки <strong>DRIVING_SITE(dual)</strong>, указывающей на локальную таблицу <strong>dual</strong>. В плане указывается операция <strong>REMOTE_TO_SERIAL (R-&gt;S)</strong>:</p>
<div><div id="highlighter_331561" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code><code class="sql comments">--+ DRIVING_SITE(dual)</code></div><div class="line number2 index1 alt1"><code class="sql plain">2&nbsp;&nbsp; </code><code class="sql color2">count</code><code class="sql plain">(*)</code></div><div class="line number3 index2 alt2"><code class="sql plain">3&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">emp@loopback_dblink e,</code></div><div class="line number4 index3 alt1"><code class="sql plain">4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dual</code></div><div class="line number5 index4 alt2"><code class="sql plain">5&nbsp; /</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="sql plain">Execution Plan</code></div><div class="line number8 index7 alt1"><code class="sql comments">---------------------------------------------------------------------------------</code></div><div class="line number9 index8 alt2"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code> <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">| Inst&nbsp;&nbsp; |</code><code class="sql color1">IN</code><code class="sql plain">-</code><code class="sql keyword">OUT</code><code class="sql plain">|</code></div><div class="line number10 index9 alt1"><code class="sql comments">---------------------------------------------------------------------------------</code></div><div class="line number11 index10 alt2"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp; (0)| 00:00:01 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number12 index11 alt1"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; SORT AGGREGATE&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number13 index12 alt2"><code class="sql plain">|&nbsp;&nbsp; 2 |&nbsp;&nbsp; NESTED LOOPS&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp; (0)| 00:00:01 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number14 index13 alt1"><code class="sql plain">|&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; FAST DUAL&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number15 index14 alt2"><code class="sql plain">|&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp; REMOTE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | EMP&nbsp; |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp; (0)| 00:00:01 | LOOPB~ | R-&gt;S | </code><code class="sql comments">-- ***</code></div><div class="line number16 index15 alt1"><code class="sql comments">---------------------------------------------------------------------------------</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="sql plain">Remote SQL Information (identified </code><code class="sql keyword">by</code> <code class="sql plain">operation id):</code></div><div class="line number19 index18 alt2"><code class="sql comments">----------------------------------------------------</code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">4 - </code><code class="sql keyword">SELECT</code> <code class="sql plain">0 </code><code class="sql keyword">FROM</code> <code class="sql string">"EMP"</code> <code class="sql string">"E"</code> <code class="sql plain">(accessing </code><code class="sql string">'LOOPBACK_DBLINK.LOCAL_DOMAIN.COM'</code> <code class="sql plain">)</code></div></div></td></tr></tbody></table></div></div>
<p style="padding-left:30px;"><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;doctype=PROBLEM&amp;id=825677.1">Limitations of DRIVING_SITE Hint (Doc ID 825677.1)</a>:</p>
<blockquote><p>Версии: 9.2.0.1 — 11.2.0.2 … распределённый DML должен выполняться в бд, где расположена целевая таблица DML. Подсказка DRIVING_SITE не меняет этого поведения</p>
<p><span style="text-decoration:underline;"><strong>DRIVING_SITE</strong> предполагает управление выполнением (mapping) всего курсора</span> (а не отдельных подзапросов)… [однако можно перенести выполнение части курсора / подзапроса в удалённый обзор]</p>
<p>Подсказка <strong>DRIVING_SITE</strong> предназначена для оптимизации запросов (SELECT) и не предназначена для DML или DDL</p></blockquote>
<h5><a id="MATERIALIZE"></a>/*+ MATERIALIZE */</h5>
<p style="padding-left:30px;"><a title="http://www.club-oracle.com/" href="http://www.club-oracle.com/articles/sql-with-clause-subquery-factoring-163/#post_message_309" target="_blank">www.club-oracle.com</a>: «<span style="text-decoration:underline;">Подсказка Materialize представляет собой технику оптимизации запросов</span> и может быть особенно полезна для больших наборов данных. Материализация подзапроса означает создание определённого типа динамической временной таблицы (<strong>dynamic temporary table</strong>) для использования во время выполнения запроса»</p>
<p style="padding-left:30px;"><a title="AskTom" href="http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:649529000346677493" target="_blank">Tom Kyte</a>: «… подсказка указывает оптимизатору Oracle «материализовать» блок запроса (<strong>query block</strong>), в котором присутствует подсказка, в виде временной таблицы [только] на время выполнения запроса .., подсказка поддерживается даже в текущей версии 11g»</p>
<div><div id="highlighter_891553" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">with</code> <code class="sql plain">emp_sq </code><code class="sql keyword">as</code></div><div class="line number2 index1 alt1"><code class="sql plain">2&nbsp;&nbsp; (</code><code class="sql keyword">select</code>&nbsp; <code class="sql plain">* </code><code class="sql keyword">from</code> <code class="sql plain">emp </code><code class="sql keyword">where</code> <code class="sql plain">comm &gt; 0)</code></div><div class="line number3 index2 alt2"><code class="sql plain">3&nbsp; </code><code class="sql keyword">select</code> <code class="sql plain">e.ename, d.loc </code><code class="sql keyword">from</code> <code class="sql plain">emp_sq e, dept d </code><code class="sql keyword">where</code> <code class="sql plain">d.deptno = e.deptno</code></div><div class="line number4 index3 alt1"><code class="sql plain">4&nbsp; /</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="sql comments">-----------------------------------------------------------------------------</code></div><div class="line number7 index6 alt2"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code>&nbsp;&nbsp;&nbsp; <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)|</code></div><div class="line number8 index7 alt1"><code class="sql comments">-----------------------------------------------------------------------------</code></div><div class="line number9 index8 alt2"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; 66 |&nbsp;&nbsp;&nbsp;&nbsp; 6&nbsp; (17)|</code></div><div class="line number10 index9 alt1"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; MERGE </code><code class="sql color1">JOIN</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; 66 |&nbsp;&nbsp;&nbsp;&nbsp; 6&nbsp; (17)|</code></div><div class="line number11 index10 alt2"><code class="sql plain">|&nbsp;&nbsp; 2 |&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">BY</code> <code class="sql keyword">INDEX</code> <code class="sql plain">ROWID| DEPT&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp; 44 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)|</code></div><div class="line number12 index11 alt1"><code class="sql plain">|&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql keyword">FULL</code> <code class="sql plain">SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | PK_DEPT |&nbsp;&nbsp;&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp; (0)|</code></div><div class="line number13 index12 alt2"><code class="sql plain">|*&nbsp; 4 |&nbsp;&nbsp; SORT </code><code class="sql color1">JOIN</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; 33 |&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp; (25)|</code></div><div class="line number14 index13 alt1"><code class="sql plain">|*&nbsp; 5 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">| EMP&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; 33 |&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp; (0)|</code></div><div class="line number15 index14 alt2"><code class="sql comments">-----------------------------------------------------------------------------</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="sql keyword">Statistics</code></div><div class="line number18 index17 alt1"><code class="sql comments">----------------------------------------------------------</code></div><div class="line number19 index18 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">1&nbsp; recursive calls</code></div><div class="line number20 index19 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">10&nbsp; consistent gets</code></div><div class="line number21 index20 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">0&nbsp; redo </code><code class="sql keyword">size</code></div><div class="line number22 index21 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">3&nbsp; </code><code class="sql keyword">rows</code> <code class="sql plain">processed</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="sql plain">SQL&gt; </code><code class="sql keyword">with</code> <code class="sql plain">emp_sq </code><code class="sql keyword">as</code></div><div class="line number25 index24 alt2"><code class="sql plain">2&nbsp;&nbsp; (</code><code class="sql keyword">select</code> <code class="sql comments">/*+ MATERIALIZE */</code> <code class="sql plain">* </code><code class="sql keyword">from</code> <code class="sql plain">emp </code><code class="sql keyword">where</code> <code class="sql plain">comm &gt; 0)</code></div><div class="line number26 index25 alt1"><code class="sql plain">3&nbsp; </code><code class="sql keyword">select</code> <code class="sql plain">e.ename, d.loc </code><code class="sql keyword">from</code> <code class="sql plain">emp_sq e, dept d </code><code class="sql keyword">where</code> <code class="sql plain">d.deptno = e.deptno</code></div><div class="line number27 index26 alt2"><code class="sql plain">4&nbsp; /</code></div><div class="line number28 index27 alt1">&nbsp;</div><div class="line number29 index28 alt2"><code class="sql comments">------------------------------------------------------------------------------------------------</code></div><div class="line number30 index29 alt1"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)|</code></div><div class="line number31 index30 alt2"><code class="sql comments">------------------------------------------------------------------------------------------------</code></div><div class="line number32 index31 alt1"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; 93 |&nbsp;&nbsp;&nbsp;&nbsp; 8&nbsp; (13)|</code></div><div class="line number33 index32 alt2"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; </code><code class="sql keyword">TEMP</code> <code class="sql keyword">TABLE</code> <code class="sql plain">TRANSFORMATION&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number34 index33 alt1"><code class="sql plain">|&nbsp;&nbsp; 2 |&nbsp;&nbsp; </code><code class="sql keyword">LOAD</code> <code class="sql keyword">AS</code> <code class="sql keyword">SELECT</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">| SYS_TEMP_0FD9D665D_A5677E |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number35 index34 alt2"><code class="sql plain">|*&nbsp; 3 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">| EMP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp; 114 |&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp; (0)|</code></div><div class="line number36 index35 alt1"><code class="sql plain">|&nbsp;&nbsp; 4 |&nbsp;&nbsp; MERGE </code><code class="sql color1">JOIN</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; 93 |&nbsp;&nbsp;&nbsp;&nbsp; 5&nbsp; (20)|</code></div><div class="line number37 index36 alt2"><code class="sql plain">|&nbsp;&nbsp; 5 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">BY</code> <code class="sql keyword">INDEX</code> <code class="sql plain">ROWID| DEPT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp; 44 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)|</code></div><div class="line number38 index37 alt1"><code class="sql plain">|&nbsp;&nbsp; 6 |&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql keyword">FULL</code> <code class="sql plain">SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | PK_DEPT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp; (0)|</code></div><div class="line number39 index38 alt2"><code class="sql plain">|*&nbsp; 7 |&nbsp;&nbsp;&nbsp; SORT </code><code class="sql color1">JOIN</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; 60 |&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp; (34)|</code></div><div class="line number40 index39 alt1"><code class="sql plain">|&nbsp;&nbsp; 8 |&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">VIEW</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; 60 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)|</code></div><div class="line number41 index40 alt2"><code class="sql plain">|&nbsp;&nbsp; 9 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">| SYS_TEMP_0FD9D665D_A5677E |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp; 114 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)|</code></div><div class="line number42 index41 alt1"><code class="sql comments">------------------------------------------------------------------------------------------------</code></div><div class="line number43 index42 alt2">&nbsp;</div><div class="line number44 index43 alt1"><code class="sql keyword">Statistics</code></div><div class="line number45 index44 alt2"><code class="sql comments">----------------------------------------------------------</code></div><div class="line number46 index45 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">54&nbsp; recursive calls</code></div><div class="line number47 index46 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">56&nbsp; consistent gets</code></div><div class="line number48 index47 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">572&nbsp; redo </code><code class="sql keyword">size</code></div><div class="line number49 index48 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">3&nbsp; </code><code class="sql keyword">rows</code> <code class="sql plain">processed</code></div></div></td></tr></tbody></table></div></div>
<p style="padding-left:30px;">Соответствующий параметр, доступный с версии 11.1:</p>
<div><div id="highlighter_287049" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">11.2.0.1.@SQL&gt; @param_ _with_subquery</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="sql keyword">NAME</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">VALUE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IS_DEF&nbsp;&nbsp; DSC</code></div><div class="line number4 index3 alt1"><code class="sql comments">--------------- ---------- -------- ----------------------------</code></div><div class="line number5 index4 alt2"><code class="sql plain">_with_subquery&nbsp; OPTIMIZER&nbsp; </code><code class="sql keyword">TRUE</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql keyword">WITH</code> <code class="sql plain">subquery transformation</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="sql plain">11.2.0.1.SQL&gt; @pvalid_ _with_subquery</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="sql plain">PARAMETER&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; VALUE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">DEFAULT</code></div><div class="line number10 index9 alt1"><code class="sql comments">-------------------------------------------------- ------------------------------ -------</code></div><div class="line number11 index10 alt2"><code class="sql plain">_with_subquery&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INLINE</code></div><div class="line number12 index11 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">OPTIMIZER&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">DEFAULT</code></div><div class="line number13 index12 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">MATERIALIZE</code></div></div></td></tr></tbody></table></div></div>
<p style="padding-left:30px;"><a href="http://dioncho.wordpress.com/2009/02/09/_with_subquery-parameter-controlling-subquery-factoring/">_with_subquery parameter – controlling subquery factoring</a></p>
<p style="padding-left:30px;"><a href="https://iusoltsev.wordpress.com/2014/09/07/with-xmltype-query/">Материализация XMLTYPE запросов</a></p>
<h5><a id="INLINE"></a>/*+ INLINE */</h5>
<p style="padding-left:30px;">Противоположна по смыслу предыдущей подсказке <strong>/*+ MATERIALIZE*/</strong>:</p>
<div><div id="highlighter_198145" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql keyword">NAME</code><code class="sql plain">, SQL_FEATURE, CLASS, INVERSE, VERSION </code><code class="sql keyword">from</code> <code class="sql plain">v$sql_hint </code><code class="sql keyword">where</code> <code class="sql keyword">name</code> <code class="sql color1">in</code> <code class="sql plain">(</code><code class="sql string">'INLINE'</code><code class="sql plain">,</code><code class="sql string">'MATERIALIZE'</code><code class="sql plain">);</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="sql keyword">NAME</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">SQL_FEATURE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CLASS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INVERSE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; VERSION</code></div><div class="line number4 index3 alt1"><code class="sql comments">------------------------------ ------------------------------ ---------- --------------------------- -------</code></div><div class="line number5 index4 alt2"><code class="sql plain">MATERIALIZE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; QKSFM_TRANSFORMATION&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INLINE&nbsp;&nbsp;&nbsp;&nbsp; INLINE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 9.0.0</code></div><div class="line number6 index5 alt1"><code class="sql plain">INLINE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; QKSFM_TRANSFORMATION&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INLINE&nbsp;&nbsp;&nbsp;&nbsp; MATERIALIZE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 9.0.0</code></div></div></td></tr></tbody></table></div></div>
<p style="padding-left:30px;">Позволяет в случаях, когда Oracle обязан материализовать подзапрос конструкции WITH без подсказок (согласно правилам выполнения <strong>subquery factoring</strong>, например, когда подзапрос используется в основном запросе &gt; 1 раза), не делать этого, рассматривая подзапрос в качестве <strong>inline view</strong>.</p>
<p style="padding-left:30px;">Полезен в случаях, когда материализуемый подзапрос используется <del>редко</del> в соединениях с малым количеством строк и накладные расходы на создание <strong>temporary table</strong>, подразумевающее <strong>ALL ROWS mode</strong>, оказываются больше стоимости нескольких выполнений подзапроса в режиме <strong>FIRST ROWS</strong>, например, с использованием индексов</p>
<p style="padding-left:30px;">На примере тестовой схемы можно видеть как применение подсказки уменьшает полную стоимости всего запроса, используя при выполнении одного из подзапросов WITH созданный индекс:</p>
<div><div id="highlighter_539805" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">11.2.0.3.ORCL112@SCOTT SQL&gt; </code><code class="sql keyword">create</code> <code class="sql keyword">index</code> <code class="sql plain">IDX_EMP_DEPTNO </code><code class="sql keyword">on</code> <code class="sql plain">EMP(DEPTNO);</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="sql keyword">Index</code> <code class="sql plain">created.</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">with</code> <code class="sql plain">emp_sq </code><code class="sql keyword">as</code></div><div class="line number6 index5 alt1"><code class="sql plain">2&nbsp;&nbsp; (</code><code class="sql keyword">select</code> <code class="sql plain">deptno, </code><code class="sql color2">count</code><code class="sql plain">(*) count_by_dept </code><code class="sql keyword">from</code> <code class="sql plain">emp </code><code class="sql keyword">group</code> <code class="sql keyword">by</code> <code class="sql plain">deptno)</code></div><div class="line number7 index6 alt2"><code class="sql plain">3&nbsp; </code><code class="sql keyword">select</code> <code class="sql plain">e.count_by_dept, d.loc</code></div><div class="line number8 index7 alt1"><code class="sql plain">4&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">emp_sq e, dept d</code></div><div class="line number9 index8 alt2"><code class="sql plain">5&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql plain">d.deptno = e.deptno</code></div><div class="line number10 index9 alt1"><code class="sql plain">6&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">d.deptno &gt; (</code><code class="sql keyword">select</code> <code class="sql color2">avg</code><code class="sql plain">(deptno) </code><code class="sql keyword">from</code> <code class="sql plain">emp_sq)</code></div><div class="line number11 index10 alt2"><code class="sql plain">7&nbsp; /</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="sql comments">------------------------------------------------------------------------------------------------</code></div><div class="line number14 index13 alt1"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)|</code></div><div class="line number15 index14 alt2"><code class="sql comments">------------------------------------------------------------------------------------------------</code></div><div class="line number16 index15 alt1"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 37 |&nbsp;&nbsp;&nbsp; 11&nbsp; (19)| </code><code class="sql comments">-- стоимость 11</code></div><div class="line number17 index16 alt2"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; </code><code class="sql keyword">TEMP</code> <code class="sql keyword">TABLE</code> <code class="sql plain">TRANSFORMATION&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql comments">-- TempTable создаётся без подсказок</code></div><div class="line number18 index17 alt1"><code class="sql plain">|&nbsp;&nbsp; 2 |&nbsp;&nbsp; </code><code class="sql keyword">LOAD</code> <code class="sql keyword">AS</code> <code class="sql keyword">SELECT</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">| SYS_TEMP_0FD9D6665_A5677E |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number19 index18 alt2"><code class="sql plain">|&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; HASH </code><code class="sql keyword">GROUP</code> <code class="sql keyword">BY</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp;&nbsp; 9 |&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp; (25)|</code></div><div class="line number20 index19 alt1"><code class="sql plain">|&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">| EMP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp;&nbsp; 42 |&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp; (0)|</code></div><div class="line number21 index20 alt2"><code class="sql plain">|*&nbsp; 5 |&nbsp;&nbsp; HASH </code><code class="sql color1">JOIN</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 37 |&nbsp;&nbsp;&nbsp;&nbsp; 5&nbsp; (20)|</code></div><div class="line number22 index21 alt1"><code class="sql plain">|&nbsp;&nbsp; 6 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">BY</code> <code class="sql keyword">INDEX</code> <code class="sql plain">ROWID| DEPT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 11 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)|</code></div><div class="line number23 index22 alt2"><code class="sql plain">|*&nbsp; 7 |&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql plain">RANGE SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | PK_DEPT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp; (0)|</code></div><div class="line number24 index23 alt1"><code class="sql plain">|&nbsp;&nbsp; 8 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SORT AGGREGATE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 13 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number25 index24 alt2"><code class="sql plain">|&nbsp;&nbsp; 9 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">VIEW</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; 39 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)|</code></div><div class="line number26 index25 alt1"><code class="sql plain">|&nbsp; 10 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">| SYS_TEMP_0FD9D6665_A5677E |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp;&nbsp; 9 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)|</code></div><div class="line number27 index26 alt2"><code class="sql plain">|&nbsp; 11 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">VIEW</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; 78 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)|</code></div><div class="line number28 index27 alt1"><code class="sql plain">|&nbsp; 12 |&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">| SYS_TEMP_0FD9D6665_A5677E |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp;&nbsp; 9 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)|</code></div><div class="line number29 index28 alt2"><code class="sql comments">------------------------------------------------------------------------------------------------</code></div><div class="line number30 index29 alt1">&nbsp;</div><div class="line number31 index30 alt2"><code class="sql plain">Predicate Information (identified </code><code class="sql keyword">by</code> <code class="sql plain">operation id):</code></div><div class="line number32 index31 alt1"><code class="sql comments">---------------------------------------------------</code></div><div class="line number33 index32 alt2">&nbsp;</div><div class="line number34 index33 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">5 - access(</code><code class="sql string">"D"</code><code class="sql plain">.</code><code class="sql string">"DEPTNO"</code><code class="sql plain">=</code><code class="sql string">"E"</code><code class="sql plain">.</code><code class="sql string">"DEPTNO"</code><code class="sql plain">)</code></div><div class="line number35 index34 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">7 - access(</code><code class="sql string">"D"</code><code class="sql plain">.</code><code class="sql string">"DEPTNO"</code><code class="sql plain">&gt; (</code><code class="sql keyword">SELECT</code> <code class="sql color2">AVG</code><code class="sql plain">(</code><code class="sql string">"DEPTNO"</code><code class="sql plain">) </code><code class="sql keyword">FROM</code>&nbsp; <code class="sql plain">(</code><code class="sql keyword">SELECT</code> <code class="sql comments">/*+ CACHE_TEMP_TABLE ("T1") */</code></div><div class="line number36 index35 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql string">"C0"</code> <code class="sql string">"DEPTNO"</code><code class="sql plain">,</code><code class="sql string">"C1"</code> <code class="sql string">"COUNT_BY_DEPT"</code> <code class="sql keyword">FROM</code> <code class="sql string">"SYS"</code><code class="sql plain">.</code><code class="sql string">"SYS_TEMP_0FD9D6665_A5677E"</code> <code class="sql string">"T1"</code><code class="sql plain">) </code><code class="sql string">"EMP_SQ"</code><code class="sql plain">))</code></div><div class="line number37 index36 alt2">&nbsp;</div><div class="line number38 index37 alt1"><code class="sql keyword">Statistics</code></div><div class="line number39 index38 alt2"><code class="sql comments">----------------------------------------------------------</code></div><div class="line number40 index39 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">48&nbsp; recursive calls&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql comments">-- + накладные расходы</code></div><div class="line number41 index40 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">45&nbsp; consistent gets&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql comments">-- - неэффективный план</code></div><div class="line number42 index41 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">576&nbsp; redo </code><code class="sql keyword">size</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql comments">-- + накладные расходы</code></div><div class="line number43 index42 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">1&nbsp; </code><code class="sql keyword">rows</code> <code class="sql plain">processed</code></div><div class="line number44 index43 alt1">&nbsp;</div><div class="line number45 index44 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">with</code> <code class="sql plain">emp_sq </code><code class="sql keyword">as</code></div><div class="line number46 index45 alt1"><code class="sql plain">2&nbsp;&nbsp; (</code><code class="sql keyword">select</code> <code class="sql comments">/*+ INLINE */</code> <code class="sql plain">deptno, </code><code class="sql color2">count</code><code class="sql plain">(*) count_by_dept </code><code class="sql keyword">from</code> <code class="sql plain">emp </code><code class="sql keyword">group</code> <code class="sql keyword">by</code> <code class="sql plain">deptno)</code></div><div class="line number47 index46 alt2"><code class="sql plain">3&nbsp; </code><code class="sql keyword">select</code> <code class="sql plain">e.count_by_dept, d.loc</code></div><div class="line number48 index47 alt1"><code class="sql plain">4&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">emp_sq e, dept d</code></div><div class="line number49 index48 alt2"><code class="sql plain">5&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql plain">d.deptno = e.deptno</code></div><div class="line number50 index49 alt1"><code class="sql plain">6&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">d.deptno &gt; (</code><code class="sql keyword">select</code> <code class="sql color2">avg</code><code class="sql plain">(deptno) </code><code class="sql keyword">from</code> <code class="sql plain">emp_sq)</code></div><div class="line number51 index50 alt2"><code class="sql plain">7&nbsp; /</code></div><div class="line number52 index51 alt1">&nbsp;</div><div class="line number53 index52 alt2"><code class="sql comments">-------------------------------------------------------------------------------------</code></div><div class="line number54 index53 alt1"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)|</code></div><div class="line number55 index54 alt2"><code class="sql comments">-------------------------------------------------------------------------------------</code></div><div class="line number56 index55 alt1"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 23 |&nbsp;&nbsp;&nbsp;&nbsp; 7&nbsp; (29)| </code><code class="sql comments">-- меньшая стоимость 7 против 11</code></div><div class="line number57 index56 alt2"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; HASH </code><code class="sql keyword">GROUP</code> <code class="sql keyword">BY</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 23 |&nbsp;&nbsp;&nbsp;&nbsp; 7&nbsp; (29)|</code></div><div class="line number58 index57 alt1"><code class="sql plain">|&nbsp;&nbsp; 2 |&nbsp;&nbsp; NESTED LOOPS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 23 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)|</code></div><div class="line number59 index58 alt2"><code class="sql plain">|&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">BY</code> <code class="sql keyword">INDEX</code> <code class="sql plain">ROWID| DEPT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 20 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)|</code></div><div class="line number60 index59 alt1"><code class="sql plain">|*&nbsp; 4 |&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql plain">RANGE SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | PK_DEPT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp; (0)|</code></div><div class="line number61 index60 alt2"><code class="sql plain">|&nbsp;&nbsp; 5 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SORT AGGREGATE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 13 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number62 index61 alt1"><code class="sql plain">|&nbsp;&nbsp; 6 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">VIEW</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; 39 |&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp; (25)|</code></div><div class="line number63 index62 alt2"><code class="sql plain">|&nbsp;&nbsp; 7 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SORT </code><code class="sql keyword">GROUP</code> <code class="sql keyword">BY</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp;&nbsp; 9 |&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp; (25)|</code></div><div class="line number64 index63 alt1"><code class="sql plain">|&nbsp;&nbsp; 8 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">| EMP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp;&nbsp; 42 |&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp; (0)|</code></div><div class="line number65 index64 alt2"><code class="sql plain">|*&nbsp; 9 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql plain">RANGE SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | IDX_EMP_DEPTNO |&nbsp;&nbsp;&nbsp;&nbsp; 5 |&nbsp;&nbsp;&nbsp; 15 |&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp; (0)| </code><code class="sql comments">-- индексный доступ</code></div><div class="line number66 index65 alt1"><code class="sql comments">-------------------------------------------------------------------------------------</code></div><div class="line number67 index66 alt2">&nbsp;</div><div class="line number68 index67 alt1"><code class="sql plain">Predicate Information (identified </code><code class="sql keyword">by</code> <code class="sql plain">operation id):</code></div><div class="line number69 index68 alt2"><code class="sql comments">---------------------------------------------------</code></div><div class="line number70 index69 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">4 - access(</code><code class="sql string">"D"</code><code class="sql plain">.</code><code class="sql string">"DEPTNO"</code><code class="sql plain">&gt; (</code><code class="sql keyword">SELECT</code> <code class="sql color2">AVG</code><code class="sql plain">(</code><code class="sql string">"DEPTNO"</code><code class="sql plain">) </code><code class="sql keyword">FROM</code>&nbsp; <code class="sql plain">(</code><code class="sql keyword">SELECT</code> <code class="sql string">"DEPTNO"</code></div><div class="line number71 index70 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql string">"DEPTNO"</code><code class="sql plain">,</code><code class="sql color2">COUNT</code><code class="sql plain">(*) </code><code class="sql string">"COUNT_BY_DEPT"</code> <code class="sql keyword">FROM</code> <code class="sql string">"EMP"</code> <code class="sql string">"EMP"</code> <code class="sql keyword">GROUP</code> <code class="sql keyword">BY</code> <code class="sql string">"DEPTNO"</code><code class="sql plain">) </code><code class="sql string">"EMP_SQ"</code><code class="sql plain">))</code></div><div class="line number72 index71 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">9 - access(</code><code class="sql string">"D"</code><code class="sql plain">.</code><code class="sql string">"DEPTNO"</code><code class="sql plain">=</code><code class="sql string">"DEPTNO"</code><code class="sql plain">)</code></div><div class="line number73 index72 alt2">&nbsp;</div><div class="line number74 index73 alt1"><code class="sql keyword">Statistics</code></div><div class="line number75 index74 alt2"><code class="sql comments">----------------------------------------------------------</code></div><div class="line number76 index75 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">1&nbsp; recursive calls&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql comments">-- - накладные расходы</code></div><div class="line number77 index76 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">10&nbsp; consistent gets&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql comments">-- + эффективный план</code></div><div class="line number78 index77 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">0&nbsp; redo </code><code class="sql keyword">size</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql comments">-- - накладные расходы</code></div><div class="line number79 index78 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">1&nbsp; </code><code class="sql keyword">rows</code> <code class="sql plain">processed</code></div></div></td></tr></tbody></table></div></div>
<h5><a id="PRECOMPUTE_SUBQUERY"></a>/*+ PRECOMPUTE_SUBQUERY */</h5>
<p style="padding-left:30px;">Позволяет выделить выполнение подзапроса в отдельный курсор</p>
<p style="padding-left:30px;">Работает по крайней мере с версии Oracle 10.1 — <a title="http://blog.tanelpoder.com/" href="http://blog.tanelpoder.com/2009/01/23/multipart-cursor-subexecution-and-precompute_subquery-hint/">Tanel Poder. Multipart cursor subexecution and PRECOMPUTE_SUBQUERY hint</a> :</p>
<div><div id="highlighter_629340" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">11.2.@SQL&gt; </code><code class="sql keyword">select</code> <code class="sql plain">* </code><code class="sql keyword">from</code> <code class="sql plain">scott.emp e </code><code class="sql keyword">where</code> <code class="sql plain">e.deptno </code><code class="sql color1">in</code> <code class="sql plain">( </code><code class="sql keyword">select</code> <code class="sql plain">e.deptno </code><code class="sql keyword">from</code> <code class="sql plain">scott.emp e </code><code class="sql keyword">where</code> <code class="sql plain">rownum &lt;= 1);</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="sql comments">---------------------------------------------------------------------------------</code></div><div class="line number4 index3 alt1"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number5 index4 alt2"><code class="sql comments">---------------------------------------------------------------------------------</code></div><div class="line number6 index5 alt1"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 5 (100)|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number7 index6 alt2"><code class="sql plain">|*&nbsp; 1 |&nbsp; HASH </code><code class="sql color1">JOIN</code> <code class="sql plain">SEMI&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 5 |&nbsp;&nbsp; 250 |&nbsp;&nbsp;&nbsp;&nbsp; 5&nbsp; (20)| 00:00:01 |</code></div><div class="line number8 index7 alt1"><code class="sql plain">|&nbsp;&nbsp; 2 |&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code>&nbsp; <code class="sql plain">| EMP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp; 518 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number9 index8 alt2"><code class="sql plain">|&nbsp;&nbsp; 3 |&nbsp;&nbsp; </code><code class="sql keyword">VIEW</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">| VW_NSO_1 |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 13 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number10 index9 alt1"><code class="sql plain">|*&nbsp; 4 |&nbsp;&nbsp;&nbsp; </code><code class="sql color2">COUNT</code> <code class="sql plain">STOPKEY&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number11 index10 alt2"><code class="sql plain">|&nbsp;&nbsp; 5 |&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code><code class="sql plain">| EMP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number12 index11 alt1"><code class="sql comments">---------------------------------------------------------------------------------</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="sql plain">Predicate Information (identified </code><code class="sql keyword">by</code> <code class="sql plain">operation id):</code></div><div class="line number15 index14 alt2"><code class="sql comments">---------------------------------------------------</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">1 - access(</code><code class="sql string">"E"</code><code class="sql plain">.</code><code class="sql string">"DEPTNO"</code><code class="sql plain">=</code><code class="sql string">"DEPTNO"</code><code class="sql plain">)</code></div><div class="line number18 index17 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">4 - filter(ROWNUM&lt;=1)</code></div><div class="line number19 index18 alt2">&nbsp;</div><div class="line number20 index19 alt1"><code class="sql plain">11.2.@SQL&gt; </code><code class="sql keyword">select</code> <code class="sql plain">* </code><code class="sql keyword">from</code> <code class="sql plain">scott.emp e </code><code class="sql keyword">where</code> <code class="sql plain">e.deptno </code><code class="sql color1">in</code> <code class="sql plain">( </code><code class="sql keyword">select</code> <code class="sql comments">/*+ PRECOMPUTE_SUBQUERY */</code> <code class="sql plain">e.deptno </code><code class="sql keyword">from</code> <code class="sql plain">scott.emp e </code><code class="sql keyword">where</code> <code class="sql plain">rownum &lt;= 1);</code></div><div class="line number21 index20 alt2">&nbsp;</div><div class="line number22 index21 alt1"><code class="sql comments">-------------------------------------</code></div><div class="line number23 index22 alt2"><code class="sql plain">SQL_ID&nbsp; c3ng7ryq9agaa, child number 0</code></div><div class="line number24 index23 alt1"><code class="sql comments">-------------------------------------</code></div><div class="line number25 index24 alt2"><code class="sql comments">--------------------------------------------------------------------------</code></div><div class="line number26 index25 alt1"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code> <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number27 index26 alt2"><code class="sql comments">--------------------------------------------------------------------------</code></div><div class="line number28 index27 alt1"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 2 (100)|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql comments">-- план выполнения основного запроса</code></div><div class="line number29 index28 alt2"><code class="sql plain">|*&nbsp; 1 |&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code><code class="sql plain">| EMP&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 5 |&nbsp;&nbsp; 185 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number30 index29 alt1"><code class="sql comments">--------------------------------------------------------------------------</code></div><div class="line number31 index30 alt2">&nbsp;</div><div class="line number32 index31 alt1"><code class="sql plain">Predicate Information (identified </code><code class="sql keyword">by</code> <code class="sql plain">operation id):</code></div><div class="line number33 index32 alt2"><code class="sql comments">---------------------------------------------------</code></div><div class="line number34 index33 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">1 - filter(</code><code class="sql string">"E"</code><code class="sql plain">.</code><code class="sql string">"DEPTNO"</code><code class="sql plain">=20)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql comments">-- фильтр получен при выполнении рекурсивного подзапроса</code></div><div class="line number35 index34 alt2">&nbsp;</div><div class="line number36 index35 alt1"><code class="sql plain">11.2.@SQL&gt; </code><code class="sql keyword">select</code> <code class="sql plain">* </code><code class="sql keyword">from</code> <code class="sql plain">scott.emp e </code><code class="sql keyword">where</code> <code class="sql plain">e.deptno </code><code class="sql color1">in</code> <code class="sql plain">( </code><code class="sql keyword">select</code> <code class="sql comments">/*+ PRECOMPUTE_SUBQUERY */</code> <code class="sql plain">e.deptno </code><code class="sql keyword">from</code> <code class="sql plain">scott.emp e </code><code class="sql keyword">where</code> <code class="sql plain">rownum &lt;= 1);</code></div><div class="line number37 index36 alt2">&nbsp;</div><div class="line number38 index37 alt1"><code class="sql comments">-------------------------------------</code></div><div class="line number39 index38 alt2"><code class="sql plain">SQL_ID&nbsp; c3ng7ryq9agaa, child number 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql comments">-- новый курсор для каждого выполнения с признаком CURSOR_PARTS_MISMATCH</code></div><div class="line number40 index39 alt1"><code class="sql comments">-------------------------------------</code></div><div class="line number41 index40 alt2"><code class="sql comments">--------------------------------------------------------------------------</code></div><div class="line number42 index41 alt1"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code> <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number43 index42 alt2"><code class="sql comments">--------------------------------------------------------------------------</code></div><div class="line number44 index43 alt1"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 2 (100)|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number45 index44 alt2"><code class="sql plain">|*&nbsp; 1 |&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code><code class="sql plain">| EMP&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 5 |&nbsp;&nbsp; 185 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number46 index45 alt1"><code class="sql comments">--------------------------------------------------------------------------</code></div><div class="line number47 index46 alt2">&nbsp;</div><div class="line number48 index47 alt1"><code class="sql plain">Predicate Information (identified </code><code class="sql keyword">by</code> <code class="sql plain">operation id):</code></div><div class="line number49 index48 alt2"><code class="sql comments">---------------------------------------------------</code></div><div class="line number50 index49 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">1 - filter(</code><code class="sql string">"E"</code><code class="sql plain">.</code><code class="sql string">"DEPTNO"</code><code class="sql plain">=20)</code></div><div class="line number51 index50 alt2">&nbsp;</div><div class="line number52 index51 alt1"><code class="sql plain">11.2.@SQL&gt; </code><code class="sql keyword">select</code> <code class="sql plain">* </code><code class="sql keyword">from</code> <code class="sql plain">scott.emp e </code><code class="sql keyword">where</code> <code class="sql plain">e.deptno = ( </code><code class="sql keyword">select</code> <code class="sql comments">/*+ PRECOMPUTE_SUBQUERY */</code> <code class="sql plain">e.deptno </code><code class="sql keyword">from</code> <code class="sql plain">scott.emp e </code><code class="sql keyword">where</code> <code class="sql plain">rownum &lt;= 1);</code></div><div class="line number53 index52 alt2">&nbsp;</div><div class="line number54 index53 alt1"><code class="sql comments">----------------------------------------------------------------------------</code></div><div class="line number55 index54 alt2"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code> <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number56 index55 alt1"><code class="sql comments">----------------------------------------------------------------------------</code></div><div class="line number57 index56 alt2"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 4 (100)|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql comments">-- подсказка работает только с IN/NOT IN</code></div><div class="line number58 index57 alt1"><code class="sql plain">|*&nbsp; 1 |&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code>&nbsp; <code class="sql plain">| EMP&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 5 |&nbsp;&nbsp; 185 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number59 index58 alt2"><code class="sql plain">|*&nbsp; 2 |&nbsp;&nbsp; </code><code class="sql color2">COUNT</code> <code class="sql plain">STOPKEY&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number60 index59 alt1"><code class="sql plain">|&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code><code class="sql plain">| EMP&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number61 index60 alt2"><code class="sql comments">----------------------------------------------------------------------------</code></div><div class="line number62 index61 alt1">&nbsp;</div><div class="line number63 index62 alt2"><code class="sql plain">Predicate Information (identified </code><code class="sql keyword">by</code> <code class="sql plain">operation id):</code></div><div class="line number64 index63 alt1"><code class="sql comments">---------------------------------------------------</code></div><div class="line number65 index64 alt2">&nbsp;</div><div class="line number66 index65 alt1"><code class="sql plain">1 - filter(</code><code class="sql string">"E"</code><code class="sql plain">.</code><code class="sql string">"DEPTNO"</code><code class="sql plain">=)</code></div><div class="line number67 index66 alt2"><code class="sql plain">2 - filter(ROWNUM&lt;=1)</code></div></div></td></tr></tbody></table></div></div>
<p style="padding-left:30px;">Подсказка недокументирована и может быть использована в боевых условиях только по согласованию с техподдежкой во избежание <a href="https://iusoltsev.wordpress.com/2012/11/11/ora-00600-kglunkeephandle/">ORA-00600: [kglUnKeepHandle] при превышении лимита количества дочерних курсоров</a></p>
<p style="padding-left:30px;"><a href="http://orasql.org/2014/08/28/precompute_subquery-hint/">По крайней мере с 11.2 подсказка допускает указание блока запроса в форме /*+ PRECOMPUTE_SUBQUERY(@QB_NAME)*/</a></p>
<h4>Подсказки, динамически влияющие на статистику оптимизатора</h4>
<h5><a id="DYNAMIC_SAMPLING"></a>/*+ DYNAMIC_SAMPLING ( [@query_block] [tablespec] degree_of_sampling ) */</h5>
<p style="padding-left:30px;">Описание механизма -&gt; <a title="Параметры" href="https://iusoltsev.wordpress.com/home/individual-sql-and-cbo/oracle-parameters/#optimizer_dynamic_sampling" target="_self">OPTIMIZER_DYNAMIC_SAMPLING</a></p>
<p style="padding-left:30px;">При использовании подсказки <strong>DYNAMIC_SAMPLIN</strong>G:</p>
<p style="padding-left:60px;">Если в бд для таблицы имеется [актуальная] статистика по количеству строк,…, оптимизатор использует эту статистику. Иначе запросы <strong>dynamic sampling</strong> будет выполнены для оценки этой статистики. Если в подсказке указана таблица и имеется [актуальная] статистика по количеству строк:</p>
<blockquote>
<ul>
<li>Если в условиях WHERE нет условий только для этой таблицы (<strong>single-table predicate</strong>), оптимизатор доверяет существующей статистике и игнорирует подсказку</li>
<li>Если в условиях WHERE есть условия для одной этой таблицы (…WHERE DEPT.LOCATION=’CHICAGO’…), оптимизатор использует существующую статистику по количеству строк (<strong>cardinality statistic</strong>) и [динамически] оценивает избирательность условий (<strong>selectivity of the predicate</strong>), используя в том числе имеющиеся статистические данные</li>
</ul>
</blockquote>
<p style="padding-left:30px;">Значения параметра подсказки <span style="text-decoration:underline;"><em>degree_of_sampling</em></span><a title="Параметры" href="https://iusoltsev.wordpress.com/home/individual-sql-and-cbo/oracle-parameters/#optimizer_dynamic_sampling" target="_self"><em>:</em></a></p>
<blockquote>
<ul>
<li>0: Механизм dynamic sampling не используется</li>
</ul>
<ul>
<li>1: Для анализа оптимизатором используется количество блоков по умолчанию (32, значение параметра <strong>_optimizer_dyn_smp_blks</strong>)</li>
</ul>
<ul>
<li>2, 3, 4, 5, 6, 7, 8, и 9: Для анализа оптимизатором используется количество боков по умолчанию, умноженное на 2, 4, 8, 16, 32, 64, 128, или 256 соответственно</li>
</ul>
<ul>
<li>10: Читаются ВСЕ блоки таблицы»</li>
</ul>
</blockquote>
<p style="padding-left:30px;">Можно использовать для таблиц, для которых, по вашему мнению, оптимизатор ошибочно определяет избирательность по условиям запроса, например , в случае отсутствии гистограм для столбцов с неравномерно распределёнными значениями (<strong>skewed columns</strong>)</p>
<p style="padding-left:30px;">Подсказка подходит для оптимизации отчётных запросов с длительным временем выполнения, в случаях, когда время выполнения запроса (например, десятки секунд) много больше времени подготовки запроса (<strong>SQL hard parse</strong>, включающего в себя <strong>dynamic sampling</strong> и выбор плана выполнения запроса с учётом результатов), составляющее миллисекунды при значении уровня degree_of_sampling &lt;= 4</p>
<p style="padding-left:30px;">По умолчанию значение параметра <strong>OPTIMIZER_DYNAMIC_SAMPLING=2</strong>, начиная с Oracle 10g (точнее, при значении параметра <a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/oracle-parameters/#optimizer_features_enable">OPTIMIZER_FEATURES_ENABLE</a> &gt;= 10.0.0), т.е. <strong>dynamic sampling</strong> применяется, но только для таблиц без собранной статистики, этого должно быть достаточно для быстрых запросов в OLTP системах, когда увеличение времени подготовки запроса (<strong>hard parse</strong>) может заметно увеличить общее время выполнения. Рекомендуется применять с точным указанием таблицы или синонима — такой синтаксис указывает оптимизатору использовать <strong>dynamic sampling</strong> для указанной таблицы в безусловном порядке:</p>
<pre style="padding-left:60px;font-size:medium;">SQL&gt; select /*+ DYNAMIC_SAMPLING(e 3)*/ ... from emp e, dept d ...</pre>
<p style="padding-left:30px;">поскольку применение в упрощённом виде (что эквивалентно установке соотв.значения параметра <a title="Параметры" href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/home/individual-sql-and-cbo/oracle-parameters/#optimizer_dynamic_sampling" target="_self">OPTIMIZER_DYNAMIC_SAMPLING</a> для запроса)</p>
<pre style="padding-left:60px;font-size:medium;">SQL&gt; select /*+ DYNAMIC_SAMPLING(3)*/ ... from emp e, dept d ...</pre>
<p style="padding-left:30px;">— которое, должно вызывать применение механизма для всех таблиц запроса, может приводить к неожиданному результату</p>
<p style="padding-left:30px;">Например, в Oracle 10.2.0.4 — CBO может вообще не применять динамического анализа, <a title="http://jonathanlewis.wordpress.com/" href="http://jonathanlewis.wordpress.com/2010/02/23/dynamic-sampling/#comment-36520">либо может применять, но не использовать результатов</a></p>
<p style="padding-left:30px;">Применение механизма <strong>DYNAMIC SAMPLING</strong> можно проконтролировать по записям в трейс файлах <a href="https://iusoltsev.wordpress.com/home/oracle_tools/trace-events/#10053" target="_self">10053 event</a>:</p>
<p style="padding-left:30px;">механизм запускается (TRUE) только при использовании /*+ DYNAMIC_SAMPLING(e 3)*/</p>
<pre style="padding-left:60px;font-size:medium;">** Performing dynamic sampling initial checks. **
Column (#13): MY_COLUMN(NUMBER)
AvgLen: 0.00 NDV: 0 Nulls: 0 Density: 0 Min: 0 Max: 100000
<strong> ** Dynamic sampling initial checks returning TRUE (level = 3)</strong></pre>
<p style="padding-left:30px;">и не запускается (FALSE) в случае использования подсказки в виде /*+ DYNAMIC_SAMPLING(3)*/либо /*+ DYNAMIC_SAMPLING(@query_block 3)*/</p>
<pre style="padding-left:60px;font-size:medium;">** Performing dynamic sampling initial checks. **
Column (#13): MY_COLUMN(NUMBER)
AvgLen: 0.00 NDV: 0 Nulls: 0 Density: 0 Min: 0 Max: 100000
<strong> ** Dynamic sampling initial checks returning FALSE</strong></pre>
<p style="padding-left:30px;">Запросы с комментарием <strong>/* OPT_DYN_SAMP */</strong> в файле <strong>SQL trace</strong>:</p>
<div><div id="highlighter_526257" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">** Generated </code><code class="sql keyword">dynamic</code> <code class="sql plain">sampling query:</code></div><div class="line number2 index1 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">query text :</code></div><div class="line number3 index2 alt2"><code class="sql keyword">SELECT</code> <code class="sql comments">/* OPT_DYN_SAMP */</code> <code class="sql comments">/*+ ALL_ROWS IGNORE_WHERE_CLAUSE NO_PARALLEL(SAMPLESUB) opt_param('parallel_execution_enabled', 'false') NO_PARALLEL_INDEX(SAMPLESUB) NO_SQL_TUNE */</code></div><div class="line number4 index3 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">NVL(</code><code class="sql color2">SUM</code><code class="sql plain">(C1), 0), NVL(</code><code class="sql color2">SUM</code><code class="sql plain">(C2), 0)</code></div><div class="line number5 index4 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql keyword">FROM</code> <code class="sql plain">(</code><code class="sql keyword">SELECT</code> <code class="sql comments">/*+ IGNORE_WHERE_CLAUSE NO_PARALLEL("T_FACT") FULL("T_FACT") NO_PARALLEL_INDEX("T_FACT") */</code></div><div class="line number6 index5 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">1 </code><code class="sql keyword">AS</code> <code class="sql plain">C1,</code></div><div class="line number7 index6 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql color2">CASE</code> <code class="sql keyword">WHEN</code> <code class="sql string">"T_FACT"</code><code class="sql plain">.</code><code class="sql string">"DT"</code> <code class="sql plain">&gt; TO_DATE(</code><code class="sql string">' 2011-03-17 04:48:02'</code><code class="sql plain">, </code><code class="sql string">'syyyy-mm-dd hh24:mi:ss'</code><code class="sql plain">) </code><code class="sql color1">AND</code> <code class="sql string">"T_FACT"</code><code class="sql plain">.</code><code class="sql string">"STATUS"</code> <code class="sql plain">&lt; 4 </code><code class="sql keyword">THEN</code> <code class="sql plain">1 </code><code class="sql keyword">ELSE</code> <code class="sql plain">0 </code><code class="sql keyword">END</code> <code class="sql keyword">AS</code> <code class="sql plain">C2</code></div><div class="line number8 index7 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql keyword">FROM</code> <code class="sql string">"BO"</code><code class="sql plain">.</code><code class="sql string">"T_FACT"</code> <code class="sql plain">SAMPLE BLOCK(0.016795, 1) SEED(1) </code><code class="sql string">"T_FACT"</code><code class="sql plain">) SAMPLESUB</code></div></div></td></tr></tbody></table></div></div>
<h5><a id="DYNAMIC_SAMPLING_EST_CDN"></a>/*+ DYNAMIC_SAMPLING_EST_CDN( [@query_block] [tablespec] ) */</h5>
<p style="padding-left:30px;"><a title="AskTom" href="http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:30752265185078" target="_blank">AskTom</a>:</p>
<blockquote>
<p style="padding-left:30px;">To force cardinality estimation even for an analyzed table, you can use a further hint, <strong>dynamic_sampling_est_cdn</strong></p>
</blockquote>
<p style="padding-left:30px;">Подсказка оптимизатору — заново оценить количество строк в таблице (<strong>cardinality</strong>), независимо от состояния статистики таблицы</p>
<p style="padding-left:30px;">Может успешно применяться для уточнения избирательности запросов с условиями по множеству столбцов (<strong>complex predicates</strong>) при наличии правильных индексов, в случаях когда обычный механизм <strong>Dynamic Sampling</strong> (стимулируемый параметром <strong>optimizer_dynamic_sampling</strong>) неэффективен — <a href="http://allthingsoracle.com/dynamic-sampling-iii-real-life-data-part-ii/">Randolf Geist.Dynamic Sampling (III) – Real-Life Data – Part II</a></p>
<h5><a id="CARDINALITY"></a>/*+ CARDINALITY( objectname [,] integer ) */</h5>
<p style="padding-left:30px;">Подсказка применяется для явного указания оптимизатору количества строк (<strong>cardinality</strong>), возвращаемых объектом бд или из набора данных для расчётов плана выполнения.</p>
<p style="padding-left:30px;">Объектом может быть обычная (heap) таблица, глобальная временная таблица (global temporary table), табличные функции (<a href="http://orcasoracle.squarespace.com/oracle-rdbms/2008/8/4/cardinality-and-pipelined-functions-ugly.html" target="_self">pipelined function)</a>, подзапрос и т.д.</p>
<p style="padding-left:30px;">Вместе с другими методами (использование механизма DYNAMIC SAMPLING для сбора статистики «на лету», «ручного» ввода статистических данных с помощью процедур пакета DBMS_STATS и др.) рекомендуется для оптимизации запросов с участием объектов, для которых отсутствует (или не может быть собрана, или для целей оптимизации требуется изменённая) статистика по количеству строк — <a title="Metalink" href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=356540.1" target="_blank">Metalink Note 356540.1: How to workaround issues with objects that have no statistics</a>.</p>
<p style="padding-left:30px;">Пример с сайта lazydba.com:</p>
<div><div id="highlighter_499567" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">set</code> <code class="sql plain">autotrace </code><code class="sql keyword">on</code></div><div class="line number2 index1 alt1"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql plain">* </code><code class="sql keyword">from</code> <code class="sql keyword">table</code><code class="sql plain">(</code><code class="sql keyword">select</code> <code class="sql plain">collect(empno) </code><code class="sql keyword">from</code> <code class="sql plain">emp) x;</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="sql plain">14 </code><code class="sql keyword">rows</code> <code class="sql plain">selected.</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="sql comments">--------------------------------------------------------------------------------------------</code></div><div class="line number7 index6 alt2"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code>&nbsp;&nbsp; <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number8 index7 alt1"><code class="sql comments">--------------------------------------------------------------------------------------------</code></div><div class="line number9 index8 alt2"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp; 8168 | 16336 |&nbsp;&nbsp;&nbsp; 29&nbsp;&nbsp; (0)| 00:00:01 | </code><code class="sql comments">-- стандартная оценка Rows для Pipelined Function</code></div><div class="line number10 index9 alt1"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; COLLECTION ITERATOR PICKLER </code><code class="sql keyword">FETCH</code><code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number11 index10 alt2"><code class="sql plain">|&nbsp;&nbsp; 2 |&nbsp;&nbsp; SORT AGGREGATE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number12 index11 alt1"><code class="sql plain">|&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql keyword">FULL</code> <code class="sql plain">SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | PK_EMP |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp;&nbsp; 56 |&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number13 index12 alt2"><code class="sql comments">--------------------------------------------------------------------------------------------</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code><code class="sql comments">/*+ CARDINALITY(x, 144) */</code> <code class="sql plain">* </code><code class="sql keyword">from</code> <code class="sql keyword">table</code><code class="sql plain">(</code><code class="sql keyword">select</code> <code class="sql plain">collect(empno) </code><code class="sql keyword">from</code> <code class="sql plain">scott.emp) x;</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="sql plain">14 </code><code class="sql keyword">rows</code> <code class="sql plain">selected.</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="sql comments">--------------------------------------------------------------------------------------------------</code></div><div class="line number20 index19 alt1"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number21 index20 alt2"><code class="sql comments">--------------------------------------------------------------------------------------------------</code></div><div class="line number22 index21 alt1"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp; 144 |&nbsp;&nbsp; 288 |&nbsp;&nbsp;&nbsp; 29&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number23 index22 alt2"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; COLLECTION ITERATOR PICKLER </code><code class="sql keyword">FETCH</code><code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp; 144 |&nbsp;&nbsp; 288 |&nbsp;&nbsp;&nbsp; 29&nbsp;&nbsp; (0)| 00:00:01 | </code><code class="sql comments">-- оценка Rows из подсказки CARDINALITY</code></div><div class="line number24 index23 alt1"><code class="sql plain">|&nbsp;&nbsp; 2 |&nbsp;&nbsp; SORT AGGREGATE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number25 index24 alt2"><code class="sql plain">|&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql keyword">FULL</code> <code class="sql plain">SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | SYS_C0093796 |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp;&nbsp; 56 |&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number26 index25 alt1"><code class="sql comments">--------------------------------------------------------------------------------------------------</code></div></div></td></tr></tbody></table></div></div>
<p style="padding-left:30px;">Механизм <strong>DYNAMIC SAMPLING</strong> с табличной функцией не работает до версии 11.1.0.7:</p>
<div><div id="highlighter_794643" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">10.2.0.4.@ SQL&gt; </code><code class="sql keyword">select</code> <code class="sql comments">/*+ DYNAMIC_SAMPLING(x 10) */</code> <code class="sql plain">* </code><code class="sql keyword">from</code> <code class="sql keyword">table</code><code class="sql plain">(</code><code class="sql keyword">select</code> <code class="sql plain">collect(empno) </code><code class="sql keyword">from</code> <code class="sql plain">emp) x;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="sql plain">14 </code><code class="sql keyword">rows</code> <code class="sql plain">selected.</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="sql comments">--------------------------------------------------------------------------------------------</code></div><div class="line number6 index5 alt1"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code>&nbsp;&nbsp; <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number7 index6 alt2"><code class="sql comments">--------------------------------------------------------------------------------------------</code></div><div class="line number8 index7 alt1"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp; 8168 | 16336 |&nbsp;&nbsp;&nbsp; 29&nbsp;&nbsp; (0)| 00:00:01 | </code><code class="sql comments">-- стандартная оценка Rows, в 10.2 DYNAMIC SAMPLING не работает</code></div><div class="line number9 index8 alt2"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; COLLECTION ITERATOR PICKLER </code><code class="sql keyword">FETCH</code><code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number10 index9 alt1"><code class="sql plain">|&nbsp;&nbsp; 2 |&nbsp;&nbsp; SORT AGGREGATE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number11 index10 alt2"><code class="sql plain">|&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql keyword">FULL</code> <code class="sql plain">SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | PK_EMP |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp;&nbsp; 56 |&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number12 index11 alt1"><code class="sql comments">--------------------------------------------------------------------------------------------</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="sql plain">11.2.0.3.@ SQL&gt; </code><code class="sql keyword">select</code><code class="sql comments">/*+ DYNAMIC_SAMPLING(x 10) */</code> <code class="sql plain">* </code><code class="sql keyword">from</code> <code class="sql keyword">table</code><code class="sql plain">(</code><code class="sql keyword">select</code>&nbsp; <code class="sql plain">collect(empno) </code><code class="sql keyword">from</code> <code class="sql plain">scott.emp) x;</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="sql plain">14 </code><code class="sql keyword">rows</code> <code class="sql plain">selected.</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="sql plain">Elapsed: 00:00:00.04</code></div><div class="line number19 index18 alt2">&nbsp;</div><div class="line number20 index19 alt1"><code class="sql plain">Execution Plan</code></div><div class="line number21 index20 alt2"><code class="sql comments">----------------------------------------------------------</code></div><div class="line number22 index21 alt1"><code class="sql plain">Plan hash value: 3266006369</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="sql comments">--------------------------------------------------------------------------------------------------</code></div><div class="line number25 index24 alt2"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number26 index25 alt1"><code class="sql comments">--------------------------------------------------------------------------------------------------</code></div><div class="line number27 index26 alt2"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp;&nbsp; 28 |&nbsp;&nbsp;&nbsp; 11&nbsp;&nbsp; (0)| 00:00:01 | </code><code class="sql comments">-- правильная оценка, DYNAMIC SAMPLING работает</code></div><div class="line number28 index27 alt1"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; COLLECTION ITERATOR PICKLER </code><code class="sql keyword">FETCH</code><code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp;&nbsp; 28 |&nbsp;&nbsp;&nbsp; 11&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number29 index28 alt2"><code class="sql plain">|&nbsp;&nbsp; 2 |&nbsp;&nbsp; SORT AGGREGATE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number30 index29 alt1"><code class="sql plain">|&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql keyword">FULL</code> <code class="sql plain">SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | SYS_C0093796 |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp;&nbsp; 56 |&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number31 index30 alt2"><code class="sql comments">--------------------------------------------------------------------------------------------------</code></div><div class="line number32 index31 alt1">&nbsp;</div><div class="line number33 index32 alt2"><code class="sql plain">Note</code></div><div class="line number34 index33 alt1"><code class="sql comments">-----</code></div><div class="line number35 index34 alt2"><code class="sql plain">- </code><code class="sql keyword">dynamic</code> <code class="sql plain">sampling used </code><code class="sql keyword">for</code> <code class="sql plain">this statement (</code><code class="sql keyword">level</code><code class="sql plain">=2)</code></div></div></td></tr></tbody></table></div></div>
<p style="padding-left:30px;">Рекомендуется  в качестве workaround при некоторых багах оптимизатора, например Bug 11826450 : WRONG CARDINALITY WITH CONNECT BY PRIOR IN 10.2.0.4</p>
<h5><a id="OPT_ESTIMATE"></a>/*+ OPT_ESTIMATE( [query block] operation_type identifier adjustment ) */</h5>
<p style="padding-left:30px;"><a href="http://www.pythian.com/news/13469/oracles-opt_estimate-hint-usage-guide/">Превосходное неофициальное описание от Christo Kutrovsky</a></p>
<p style="padding-left:30px;">Предназначен для влияния на план выполнения через корректировку оценки кол-ва строк (<strong>cardinality</strong>), получаемых в результате операций доступа к данным и, как следствие, стоимости плана выполнения</p>
<p style="padding-left:30px;">Часто используется при создании <a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/#SQL_Profiles">SQL Profile</a>, является развитием / замещением подсказки <strong>CARDINALITY</strong></p>
<p style="padding-left:30px;">Параметры:</p>
<blockquote>
<ul>
<li><strong>query block</strong></li>
<li><strong>operation_type</strong>: QUERY_BLOCK / TABLE / INDEX_FILTER / INDEX_SCAN | INDEX_SKIP_SCAN / JOIN</li>
<li><strong>identifier</strong>: TABLES / INDEX / JOINS</li>
<li><strong>adjustment</strong>: ROWS / SCALE_ROWS / MIN / MAX</li>
</ul>
</blockquote>
<h4>Управления преобразованиями, выполняемыми в процессе оптимизации запросов</h4>
<h5><a id="NO_QUERY_TRANSFORMATION"></a>/*+ NO_QUERY_TRANSFORMATION*/</h5>
<p style="padding-left:30px;">«… инструктирует оптимизатор пропустить весь этап преобразований запроса (<strong>query transformations</strong>), влючая, но не ограничиваясь <strong>OR-expansion</strong>, <strong>view merging</strong>, <strong>subquery unnesting</strong>, <strong>star transformation</strong>, <strong>materialized view rewrite</strong> …»</p>
<p style="padding-left:30px;">Кроме собственно улучшения плана выполнения за счёт исключения неоптимальных операций/трансформаций, может быть полезет для сокращения времени разбора (<strong>parse time</strong>) запросов с [очень] большим количеством таблиц</p>
<h5><a id="PUSH_SUBQ"></a>/*+ PUSH_SUBQ( [@query_block] ) */</h5>
<p style="padding-left:30px;">«Указывает оптимизатору выполнять непреобразованный подзапрос (<strong>nonmerged subqueries</strong>) на самом раннем возможном шаге плана выполнения запроса. В то время, как обычно, непреобразованные подзапросы (<strong>nonmerged subqueries</strong>) выполняются на последнем шаге плана выполнения. Раннее выполнение подзапроса может значительно ускорить производительность, если подзапрос относительно лёгок и может значительно уменьшить количество обрабатываемых строк»</p>
<p style="padding-left:30px;"><a title="Jonathan Lewis blog" href="http://jonathanlewis.wordpress.com/2007/03/09/push_subq/" target="_blank">По мнению Дж.Льюиса,  начиная с Oracle 10g подсказка может быть успешно использована в следующих видах:</a></p>
<blockquote>
<ul>
<li>на примере запроса, который без подсказок сначала соединяет таблицы головного запроса (<strong>HASH JOIN</strong>), и только затем обращается к таблице DEPT из подзапроса EXISTS (<strong>HASH JOIN SEMI</strong>):</li>
</ul>
</blockquote>
<div><div id="highlighter_416221" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code></div><div class="line number2 index1 alt1"><code class="sql plain">2&nbsp;&nbsp; ename</code></div><div class="line number3 index2 alt2"><code class="sql plain">3&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">scott.emp, scott.dept</code></div><div class="line number4 index3 alt1"><code class="sql plain">4&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql plain">emp.sal </code><code class="sql color1">between</code> <code class="sql plain">1001 </code><code class="sql color1">and</code> <code class="sql plain">2200</code></div><div class="line number5 index4 alt2"><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">dept.deptno = emp.deptno</code></div><div class="line number6 index5 alt1"><code class="sql plain">6&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">dept.dname &gt;= </code><code class="sql string">'C'</code></div><div class="line number7 index6 alt2"><code class="sql plain">7&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">exists (</code><code class="sql keyword">select</code></div><div class="line number8 index7 alt1"><code class="sql plain">8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">null</code></div><div class="line number9 index8 alt2"><code class="sql plain">9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">scott.dept</code></div><div class="line number10 index9 alt1"><code class="sql plain">10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql plain">deptno = emp.deptno</code></div><div class="line number11 index10 alt2"><code class="sql plain">11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">loc &gt;= </code><code class="sql string">'2'</code><code class="sql plain">)</code></div><div class="line number12 index11 alt1"><code class="sql plain">12&nbsp; /</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="sql comments">----------------------------------------------------------------------------</code></div><div class="line number15 index14 alt2"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code> <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number16 index15 alt1"><code class="sql comments">----------------------------------------------------------------------------</code></div><div class="line number17 index16 alt2"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 6 |&nbsp;&nbsp; 222 |&nbsp;&nbsp;&nbsp;&nbsp; 7&nbsp; (15)| 00:00:01 | </code><code class="sql comments">-- более точная оценка</code></div><div class="line number18 index17 alt1"><code class="sql plain">|*&nbsp; 1 |&nbsp; HASH </code><code class="sql color1">JOIN</code> <code class="sql plain">SEMI&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 6 |&nbsp;&nbsp; 222 |&nbsp;&nbsp;&nbsp;&nbsp; 7&nbsp; (15)| 00:00:01 | </code><code class="sql comments">-- EXISTS subquery</code></div><div class="line number19 index18 alt2"><code class="sql plain">|*&nbsp; 2 |&nbsp;&nbsp; HASH </code><code class="sql color1">JOIN</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 6 |&nbsp;&nbsp; 156 |&nbsp;&nbsp;&nbsp;&nbsp; 5&nbsp; (20)| 00:00:01 |</code></div><div class="line number20 index19 alt1"><code class="sql plain">|*&nbsp; 3 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code><code class="sql plain">| DEPT |&nbsp;&nbsp;&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp; 52 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number21 index20 alt2"><code class="sql plain">|*&nbsp; 4 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code><code class="sql plain">| EMP&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 6 |&nbsp;&nbsp;&nbsp; 78 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number22 index21 alt1"><code class="sql plain">|*&nbsp; 5 |&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code> <code class="sql plain">| DEPT |&nbsp;&nbsp;&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp; 44 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number23 index22 alt2"><code class="sql comments">----------------------------------------------------------------------------</code></div><div class="line number24 index23 alt1">&nbsp;</div><div class="line number25 index24 alt2"><code class="sql plain">Predicate Information (identified </code><code class="sql keyword">by</code> <code class="sql plain">operation id):</code></div><div class="line number26 index25 alt1"><code class="sql comments">---------------------------------------------------</code></div><div class="line number27 index26 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">1 - access(</code><code class="sql string">"DEPTNO"</code><code class="sql plain">=</code><code class="sql string">"EMP"</code><code class="sql plain">.</code><code class="sql string">"DEPTNO"</code><code class="sql plain">)</code></div><div class="line number28 index27 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">2 - access(</code><code class="sql string">"DEPT"</code><code class="sql plain">.</code><code class="sql string">"DEPTNO"</code><code class="sql plain">=</code><code class="sql string">"EMP"</code><code class="sql plain">.</code><code class="sql string">"DEPTNO"</code><code class="sql plain">)&nbsp;&nbsp;&nbsp; 3 - filter(</code><code class="sql string">"DEPT"</code><code class="sql plain">.</code><code class="sql string">"DNAME"</code><code class="sql plain">&gt;=</code><code class="sql string">'C'</code><code class="sql plain">)</code></div><div class="line number29 index28 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">4 - filter(</code><code class="sql string">"EMP"</code><code class="sql plain">.</code><code class="sql string">"SAL"</code><code class="sql plain">&lt;=2200 </code><code class="sql color1">AND</code> <code class="sql string">"EMP"</code><code class="sql plain">.</code><code class="sql string">"SAL"</code><code class="sql plain">&gt;=1001)</code></div><div class="line number30 index29 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">5 - filter(</code><code class="sql string">"LOC"</code><code class="sql plain">&gt;=</code><code class="sql string">'2'</code><code class="sql plain">)</code></div><div class="line number31 index30 alt2">&nbsp;</div><div class="line number32 index31 alt1"><code class="sql keyword">Statistics</code></div><div class="line number33 index32 alt2"><code class="sql comments">----------------------------------------------------------</code></div><div class="line number34 index33 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">...</code></div><div class="line number35 index34 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">5&nbsp; </code><code class="sql keyword">rows</code> <code class="sql plain">processed</code></div></div></td></tr></tbody></table></div></div>
<blockquote>
<ul>
<li>на уровне всего запроса в виде <strong>/*+ PUSH_SUBQ( @query_block ) */</strong> с указанием блока, определяемого подсказкой <strong>QB_NAME</strong>:</li>
</ul>
</blockquote>
<div><div id="highlighter_511451" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">11.2.0.3@ SQL&gt; </code><code class="sql keyword">select</code> <code class="sql comments">/*+ push_subq(@subq1) */</code></div><div class="line number2 index1 alt1"><code class="sql plain">2&nbsp;&nbsp; ename</code></div><div class="line number3 index2 alt2"><code class="sql plain">3&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">scott.emp, scott.dept</code></div><div class="line number4 index3 alt1"><code class="sql plain">4&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql plain">emp.sal </code><code class="sql color1">between</code> <code class="sql plain">1001 </code><code class="sql color1">and</code> <code class="sql plain">2200</code></div><div class="line number5 index4 alt2"><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">dept.deptno = emp.deptno</code></div><div class="line number6 index5 alt1"><code class="sql plain">6&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">dept.dname &gt;= </code><code class="sql string">'C'</code></div><div class="line number7 index6 alt2"><code class="sql plain">7&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">exists (</code><code class="sql keyword">select</code> <code class="sql comments">/*+ qb_name(subq1) no_unnest*/</code></div><div class="line number8 index7 alt1"><code class="sql plain">8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">null</code></div><div class="line number9 index8 alt2"><code class="sql plain">9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">scott.dept</code></div><div class="line number10 index9 alt1"><code class="sql plain">10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql plain">deptno = emp.deptno</code></div><div class="line number11 index10 alt2"><code class="sql plain">11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">loc &gt;= </code><code class="sql string">'2'</code><code class="sql plain">)</code></div><div class="line number12 index11 alt1"><code class="sql plain">12&nbsp; /</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="sql plain">Execution Plan</code></div><div class="line number15 index14 alt2"><code class="sql comments">----------------------------------------------------------</code></div><div class="line number16 index15 alt1"><code class="sql plain">Plan hash value: 3414739439</code></div><div class="line number17 index16 alt2"><code class="sql comments">-----------------------------------------------------------------------------------------------</code></div><div class="line number18 index17 alt1"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number19 index18 alt2"><code class="sql comments">-----------------------------------------------------------------------------------------------</code></div><div class="line number20 index19 alt1"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 26 |&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp; (0)| 00:00:01 | </code><code class="sql comments">-- менее точная оценка Rows, и, как следствие, Cost</code></div><div class="line number21 index20 alt2"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; NESTED LOOPS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number22 index21 alt1"><code class="sql plain">|&nbsp;&nbsp; 2 |&nbsp;&nbsp; NESTED LOOPS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 26 |&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number23 index22 alt2"><code class="sql plain">|*&nbsp; 3 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">| EMP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 13 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number24 index23 alt1"><code class="sql plain">|*&nbsp; 4 |&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">BY</code> <code class="sql keyword">INDEX</code> <code class="sql plain">ROWID| DEPT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 11 |&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number25 index24 alt2"><code class="sql plain">|*&nbsp; 5 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql keyword">UNIQUE</code> <code class="sql plain">SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | SYS_C0093797 |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number26 index25 alt1"><code class="sql plain">|*&nbsp; 6 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql keyword">UNIQUE</code> <code class="sql plain">SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | SYS_C0093797 |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number27 index26 alt2"><code class="sql plain">|*&nbsp; 7 |&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">BY</code> <code class="sql keyword">INDEX</code> <code class="sql plain">ROWID&nbsp; | DEPT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 13 |&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number28 index27 alt1"><code class="sql comments">-----------------------------------------------------------------------------------------------</code></div><div class="line number29 index28 alt2">&nbsp;</div><div class="line number30 index29 alt1"><code class="sql plain">Predicate Information (identified </code><code class="sql keyword">by</code> <code class="sql plain">operation id):</code></div><div class="line number31 index30 alt2"><code class="sql comments">---------------------------------------------------</code></div><div class="line number32 index31 alt1">&nbsp;</div><div class="line number33 index32 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">3 - filter(</code><code class="sql string">"EMP"</code><code class="sql plain">.</code><code class="sql string">"SAL"</code><code class="sql plain">&lt;=2200 </code><code class="sql color1">AND</code> <code class="sql string">"EMP"</code><code class="sql plain">.</code><code class="sql string">"SAL"</code><code class="sql plain">&gt;=1001 </code><code class="sql color1">AND</code>&nbsp; <code class="sql plain">EXISTS (</code><code class="sql keyword">SELECT</code> <code class="sql comments">/*+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- шикарный FILTER, указывающий</code></div><div class="line number34 index33 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql comments">PUSH_SUBQ NO_UNNEST QB_NAME ("SUBQ1") */</code> <code class="sql plain">0 </code><code class="sql keyword">FROM</code> <code class="sql string">"SCOTT"</code><code class="sql plain">.</code><code class="sql string">"DEPT"</code> <code class="sql string">"DEPT"</code> <code class="sql keyword">WHERE</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql comments">-- следующий метод использования PUSH_SUBQ</code></div><div class="line number35 index34 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql string">"DEPTNO"</code><code class="sql plain">=:B1 </code><code class="sql color1">AND</code> <code class="sql string">"LOC"</code><code class="sql plain">&gt;=</code><code class="sql string">'2'</code><code class="sql plain">))</code></div><div class="line number36 index35 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">4 - filter(</code><code class="sql string">"LOC"</code><code class="sql plain">&gt;=</code><code class="sql string">'2'</code><code class="sql plain">)</code></div><div class="line number37 index36 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">5 - access(</code><code class="sql string">"DEPTNO"</code><code class="sql plain">=:B1)</code></div><div class="line number38 index37 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">6 - access(</code><code class="sql string">"DEPT"</code><code class="sql plain">.</code><code class="sql string">"DEPTNO"</code><code class="sql plain">=</code><code class="sql string">"EMP"</code><code class="sql plain">.</code><code class="sql string">"DEPTNO"</code><code class="sql plain">)</code></div><div class="line number39 index38 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">7 - filter(</code><code class="sql string">"DEPT"</code><code class="sql plain">.</code><code class="sql string">"DNAME"</code><code class="sql plain">&gt;=</code><code class="sql string">'C'</code><code class="sql plain">)</code></div><div class="line number40 index39 alt1">&nbsp;</div><div class="line number41 index40 alt2"><code class="sql keyword">Statistics</code></div><div class="line number42 index41 alt1"><code class="sql comments">----------------------------------------------------------</code></div><div class="line number43 index42 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">...</code></div><div class="line number44 index43 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">5&nbsp; </code><code class="sql keyword">rows</code> <code class="sql plain">processed</code></div></div></td></tr></tbody></table></div></div>
<blockquote>
<ul>
<li>прямо в подзапросе без указания блока <strong>/*+ PUSH_SUBQ NO_UNNEST */</strong></li>
</ul>
</blockquote>
<div><div id="highlighter_680046" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">11.2.0.3.OEBS2@SYS SQL&gt; </code><code class="sql keyword">select</code></div><div class="line number2 index1 alt1"><code class="sql plain">2&nbsp;&nbsp; ename</code></div><div class="line number3 index2 alt2"><code class="sql plain">3&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">scott.emp, scott.dept</code></div><div class="line number4 index3 alt1"><code class="sql plain">4&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql plain">emp.sal </code><code class="sql color1">between</code> <code class="sql plain">1001 </code><code class="sql color1">and</code> <code class="sql plain">2200</code></div><div class="line number5 index4 alt2"><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">dept.deptno = emp.deptno</code></div><div class="line number6 index5 alt1"><code class="sql plain">6&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">dept.dname &gt;= </code><code class="sql string">'C'</code></div><div class="line number7 index6 alt2"><code class="sql plain">7&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">exists (</code><code class="sql keyword">select</code> <code class="sql comments">/*+ no_unnest push_subq*/</code></div><div class="line number8 index7 alt1"><code class="sql plain">8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">null</code></div><div class="line number9 index8 alt2"><code class="sql plain">9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">scott.dept</code></div><div class="line number10 index9 alt1"><code class="sql plain">10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql plain">deptno = emp.deptno</code></div><div class="line number11 index10 alt2"><code class="sql plain">11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">loc &gt;= </code><code class="sql string">'2'</code><code class="sql plain">)</code></div><div class="line number12 index11 alt1"><code class="sql plain">12&nbsp; /</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="sql plain">Execution Plan</code></div><div class="line number15 index14 alt2"><code class="sql comments">----------------------------------------------------------</code></div><div class="line number16 index15 alt1"><code class="sql plain">Plan hash value: 3414739439&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql comments">-- план совпадает с предыдущим</code></div></div></td></tr></tbody></table></div></div>
<p style="padding-left:30px;">При указании на уровне всего запроса в виде <strong>/*+ PUSH_SUBQ */</strong> без указания блока подсказка не работает, начиная с версии Oracle 10g, хотя план и изменился по сравнению с оригинальным из-за действия подсказки <strong>/*+ NO_UNNEST*/</strong>:</p>
<div><div id="highlighter_573028" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">11.2.0.3.OEBS2@SYS SQL&gt; </code><code class="sql keyword">select</code> <code class="sql comments">/*+ push_subq */</code></div><div class="line number2 index1 alt1"><code class="sql plain">2&nbsp;&nbsp; ename</code></div><div class="line number3 index2 alt2"><code class="sql plain">3&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">scott.emp, scott.dept</code></div><div class="line number4 index3 alt1"><code class="sql plain">4&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql plain">emp.sal </code><code class="sql color1">between</code> <code class="sql plain">1001 </code><code class="sql color1">and</code> <code class="sql plain">2200</code></div><div class="line number5 index4 alt2"><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">dept.deptno = emp.deptno</code></div><div class="line number6 index5 alt1"><code class="sql plain">6&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">dept.dname &gt;= </code><code class="sql string">'C'</code></div><div class="line number7 index6 alt2"><code class="sql plain">7&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">exists (</code><code class="sql keyword">select</code> <code class="sql comments">/*+ no_unnest */</code></div><div class="line number8 index7 alt1"><code class="sql plain">8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">null</code></div><div class="line number9 index8 alt2"><code class="sql plain">9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">scott.dept</code></div><div class="line number10 index9 alt1"><code class="sql plain">10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql plain">deptno = emp.deptno</code></div><div class="line number11 index10 alt2"><code class="sql plain">11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">loc &gt;= </code><code class="sql string">'2'</code><code class="sql plain">)</code></div><div class="line number12 index11 alt1"><code class="sql plain">12&nbsp; /</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="sql comments">---------------------------------------------------------------------------------------------</code></div><div class="line number15 index14 alt2"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number16 index15 alt1"><code class="sql comments">---------------------------------------------------------------------------------------------</code></div><div class="line number17 index16 alt2"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 2 |&nbsp;&nbsp;&nbsp; 52 |&nbsp;&nbsp;&nbsp;&nbsp; 7&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number18 index17 alt1"><code class="sql plain">|*&nbsp; 1 |&nbsp; FILTER&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql comments">-- исчез HASH JOIN SEMI</code></div><div class="line number19 index18 alt2"><code class="sql plain">|*&nbsp; 2 |&nbsp;&nbsp; HASH </code><code class="sql color1">JOIN</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 6 |&nbsp;&nbsp; 156 |&nbsp;&nbsp;&nbsp;&nbsp; 5&nbsp; (20)| 00:00:01 |</code></div><div class="line number20 index19 alt1"><code class="sql plain">|*&nbsp; 3 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">| DEPT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp; 52 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number21 index20 alt2"><code class="sql plain">|*&nbsp; 4 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">| EMP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 6 |&nbsp;&nbsp;&nbsp; 78 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number22 index21 alt1"><code class="sql plain">|*&nbsp; 5 |&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">BY</code> <code class="sql keyword">INDEX</code> <code class="sql plain">ROWID| DEPT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 11 |&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp; (0)| 00:00:01 | </code><code class="sql comments">-- EXISTS подзапрос выполняется отдельно от основного NO-UNNESTING</code></div><div class="line number23 index22 alt2"><code class="sql plain">|*&nbsp; 6 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql keyword">UNIQUE</code> <code class="sql plain">SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | SYS_C0093797 |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number24 index23 alt1"><code class="sql comments">---------------------------------------------------------------------------------------------</code></div></div></td></tr></tbody></table></div></div>
<p style="padding-left:30px;">Таким образом можно точно указать оптимизатору какие подзапросы должны и будут выполняться на ранних этапах плана выполнения, а какие на последних — соответственно, с помощью следующей подсказки</p>
<h5><a id="NO_PUSH_SUBQ"></a>/*+ NO_PUSH_SUBQ( [@query_block] ) */</h5>
<p style="padding-left:30px;">«Указывает оптимизатору выполнять непреобразованный подзапрос (<em>nonmerged subqueries</em>) на последнем шаге плана выполнения запроса [т.е. так, как это обычно делает оптимизатор — видимо, имеет смысл при каком-то необычном поведении оптимизатора]. Может положительно влиять на производительность, если подзапрос относительно тяжёлый или незначительно уменьшает количество строк»</p>
<p style="padding-left:30px;">Синтаксис аналогичен синтаксису подсказки <strong>/*+ PUSH_SUBQ */</strong></p>
<h5><a id="NO_UNNEST"></a>/*+ NO_UNNEST*/</h5>
<p style="padding-left:30px;">Добавляется к подзапросу для предотвращения операции объединения подзапроса с головным запросом (<strong>subquery unnesting</strong>)</p>
<p style="padding-left:30px;">Пример с <a href="http://www.jlcomp.demon.co.uk/hinted_sql.html">сайта Jonathan Lewis-а</a> — без хинтов оптимизатор объединяет подзапрос с основным запросом, используя условия запроса (через <strong>access predicate</strong> и <strong>filter</strong>) только на последнем шаге выполнения:</p>
<div><div id="highlighter_841332" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql color1">outer</code><code class="sql plain">.*</code></div><div class="line number2 index1 alt1"><code class="sql plain">2&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">scott.emp </code><code class="sql color1">outer</code></div><div class="line number3 index2 alt2"><code class="sql plain">3&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql color1">outer</code><code class="sql plain">.sal &gt;</code></div><div class="line number4 index3 alt1"><code class="sql plain">4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (</code><code class="sql keyword">select</code></div><div class="line number5 index4 alt2"><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color2">avg</code><code class="sql plain">(</code><code class="sql keyword">inner</code><code class="sql plain">.sal)</code></div><div class="line number6 index5 alt1"><code class="sql plain">6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">scott.emp </code><code class="sql keyword">inner</code></div><div class="line number7 index6 alt2"><code class="sql plain">7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql keyword">inner</code><code class="sql plain">.deptno = </code><code class="sql color1">outer</code><code class="sql plain">.deptno)</code></div><div class="line number8 index7 alt1"><code class="sql plain">8&nbsp; /</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="sql comments">--------------------------------------------------------------------------------</code></div><div class="line number11 index10 alt2"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code>&nbsp;&nbsp;&nbsp; <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number12 index11 alt1"><code class="sql comments">--------------------------------------------------------------------------------</code></div><div class="line number13 index12 alt2"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 63 |&nbsp;&nbsp;&nbsp;&nbsp; 6&nbsp; (34)| 00:00:01 |</code></div><div class="line number14 index13 alt1"><code class="sql plain">|*&nbsp; 1 |&nbsp; HASH </code><code class="sql color1">JOIN</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 63 |&nbsp;&nbsp;&nbsp;&nbsp; 6&nbsp; (34)| 00:00:01 |</code></div><div class="line number15 index14 alt2"><code class="sql plain">|&nbsp;&nbsp; 2 |&nbsp;&nbsp; </code><code class="sql keyword">VIEW</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">| VW_SQ_1 |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; 78 |&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp; (34)| 00:00:01 |</code></div><div class="line number16 index15 alt1"><code class="sql plain">|&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; HASH </code><code class="sql keyword">GROUP</code> <code class="sql keyword">BY</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; 21 |&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp; (34)| 00:00:01 |</code></div><div class="line number17 index16 alt2"><code class="sql plain">|&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code><code class="sql plain">| EMP&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp;&nbsp; 98 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number18 index17 alt1"><code class="sql plain">|&nbsp;&nbsp; 5 |&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code>&nbsp; <code class="sql plain">| EMP&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp; 518 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number19 index18 alt2"><code class="sql comments">--------------------------------------------------------------------------------</code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="sql plain">Predicate Information (identified </code><code class="sql keyword">by</code> <code class="sql plain">operation id):</code></div><div class="line number22 index21 alt1"><code class="sql comments">---------------------------------------------------</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">1 - access(</code><code class="sql string">"ITEM_1"</code><code class="sql plain">=</code><code class="sql string">"OUTER"</code><code class="sql plain">.</code><code class="sql string">"DEPTNO"</code><code class="sql plain">)</code></div><div class="line number25 index24 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">filter(</code><code class="sql string">"OUTER"</code><code class="sql plain">.</code><code class="sql string">"SAL"</code><code class="sql plain">&gt;</code><code class="sql string">"AVG(INNER.SAL)"</code><code class="sql plain">)</code></div></div></td></tr></tbody></table></div></div>
<p style="padding-left:30px;">Подсказка <strong>NO_UNNEST</strong> меняет план, выделяя выполнение подзапроса (включая вычисление avg(inner.sal) — аггрегацию <strong>SORT AGGREGATE</strong>) по условию <strong>«INNER».»DEPTNO»=:B1</strong>:</p>
<div><div id="highlighter_901200" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql color1">outer</code><code class="sql plain">.*</code></div><div class="line number2 index1 alt1"><code class="sql plain">2&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">scott.emp </code><code class="sql color1">outer</code></div><div class="line number3 index2 alt2"><code class="sql plain">3&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql color1">outer</code><code class="sql plain">.sal &gt;</code></div><div class="line number4 index3 alt1"><code class="sql plain">4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (</code><code class="sql keyword">select</code><code class="sql comments">/*+ NO_UNNEST*/</code></div><div class="line number5 index4 alt2"><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color2">avg</code><code class="sql plain">(</code><code class="sql keyword">inner</code><code class="sql plain">.sal)</code></div><div class="line number6 index5 alt1"><code class="sql plain">6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">scott.emp </code><code class="sql keyword">inner</code></div><div class="line number7 index6 alt2"><code class="sql plain">7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql keyword">inner</code><code class="sql plain">.deptno = </code><code class="sql color1">outer</code><code class="sql plain">.deptno)</code></div><div class="line number8 index7 alt1"><code class="sql plain">8&nbsp; /</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="sql plain">Execution Plan</code></div><div class="line number11 index10 alt2"><code class="sql comments">----------------------------------------------------------</code></div><div class="line number12 index11 alt1"><code class="sql plain">Plan hash value: 2649664444</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="sql comments">----------------------------------------------------------------------------</code></div><div class="line number15 index14 alt2"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code> <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number16 index15 alt1"><code class="sql comments">----------------------------------------------------------------------------</code></div><div class="line number17 index16 alt2"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 37 |&nbsp;&nbsp;&nbsp;&nbsp; 8&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number18 index17 alt1"><code class="sql plain">|*&nbsp; 1 |&nbsp; FILTER&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number19 index18 alt2"><code class="sql plain">|&nbsp;&nbsp; 2 |&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code> <code class="sql plain">| EMP&nbsp; |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp; 518 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number20 index19 alt1"><code class="sql plain">|&nbsp;&nbsp; 3 |&nbsp;&nbsp; SORT AGGREGATE&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp; 7 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number21 index20 alt2"><code class="sql plain">|*&nbsp; 4 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code><code class="sql plain">| EMP&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 5 |&nbsp;&nbsp;&nbsp; 35 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number22 index21 alt1"><code class="sql comments">----------------------------------------------------------------------------</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="sql plain">Predicate Information (identified </code><code class="sql keyword">by</code> <code class="sql plain">operation id):</code></div><div class="line number25 index24 alt2"><code class="sql comments">---------------------------------------------------</code></div><div class="line number26 index25 alt1">&nbsp;</div><div class="line number27 index26 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">1 - filter(</code><code class="sql string">"OUTER"</code><code class="sql plain">.</code><code class="sql string">"SAL"</code><code class="sql plain">&gt; (</code><code class="sql keyword">SELECT</code> <code class="sql comments">/*+ NO_UNNEST */</code></div><div class="line number28 index27 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql color2">AVG</code><code class="sql plain">(</code><code class="sql string">"INNER"</code><code class="sql plain">.</code><code class="sql string">"SAL"</code><code class="sql plain">) </code><code class="sql keyword">FROM</code> <code class="sql string">"SCOTT"</code><code class="sql plain">.</code><code class="sql string">"EMP"</code> <code class="sql string">"INNER"</code> <code class="sql keyword">WHERE</code></div><div class="line number29 index28 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql string">"INNER"</code><code class="sql plain">.</code><code class="sql string">"DEPTNO"</code><code class="sql plain">=:B1))</code></div><div class="line number30 index29 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">4 - filter(</code><code class="sql string">"INNER"</code><code class="sql plain">.</code><code class="sql string">"DEPTNO"</code><code class="sql plain">=:B1)</code></div><div class="line number31 index30 alt2">&nbsp;</div><div class="line number32 index31 alt1"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code><code class="sql comments">/*+ NO_UNNEST(@subq1) */</code></div><div class="line number33 index32 alt2"><code class="sql plain">2&nbsp;&nbsp; </code><code class="sql color1">outer</code><code class="sql plain">.*</code></div><div class="line number34 index33 alt1"><code class="sql plain">3&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">scott.emp </code><code class="sql color1">outer</code></div><div class="line number35 index34 alt2"><code class="sql plain">4&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql color1">outer</code><code class="sql plain">.sal &gt;</code></div><div class="line number36 index35 alt1"><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (</code><code class="sql keyword">select</code><code class="sql comments">/*+ QB_NAME(subq1)*/</code></div><div class="line number37 index36 alt2"><code class="sql plain">6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color2">avg</code><code class="sql plain">(</code><code class="sql keyword">inner</code><code class="sql plain">.sal)</code></div><div class="line number38 index37 alt1"><code class="sql plain">7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">scott.emp </code><code class="sql keyword">inner</code></div><div class="line number39 index38 alt2"><code class="sql plain">8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql keyword">inner</code><code class="sql plain">.deptno = </code><code class="sql color1">outer</code><code class="sql plain">.deptno)</code></div><div class="line number40 index39 alt1"><code class="sql plain">9&nbsp; /</code></div><div class="line number41 index40 alt2">&nbsp;</div><div class="line number42 index41 alt1"><code class="sql plain">Execution Plan</code></div><div class="line number43 index42 alt2"><code class="sql comments">----------------------------------------------------------</code></div><div class="line number44 index43 alt1"><code class="sql plain">Plan hash value: 2649664444&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql comments">-- тот же план</code></div></div></td></tr></tbody></table></div></div>
<h5><a id="UNNEST"></a>/*+ UNNEST*/</h5>
<p style="padding-left:30px;">Использование подсказки <strong>UNNEST</strong>, напротив, форсирует по возможности операцию объединения (<strong>unnests specified subquery block if possible</strong>) и в этом примере план выполнения возвращается к более дешёвому плану, используемому оптимизатором по умолчанию:</p>
<div><div id="highlighter_882036" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql color1">outer</code><code class="sql plain">.*</code></div><div class="line number2 index1 alt1"><code class="sql spaces">&nbsp;</code><code class="sql plain">2&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">emp</code></div><div class="line number3 index2 alt2"><code class="sql spaces">&nbsp;</code><code class="sql plain">3&nbsp;&nbsp; </code><code class="sql color1">outer</code> <code class="sql keyword">where</code> <code class="sql color1">outer</code><code class="sql plain">.sal &gt;</code></div><div class="line number4 index3 alt1"><code class="sql spaces">&nbsp;</code><code class="sql plain">4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (</code><code class="sql keyword">select</code><code class="sql comments">/*+ UNNEST*/</code> <code class="sql color2">avg</code><code class="sql plain">(</code><code class="sql keyword">inner</code><code class="sql plain">.sal)</code></div><div class="line number5 index4 alt2"><code class="sql spaces">&nbsp;</code><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">emp</code></div><div class="line number6 index5 alt1"><code class="sql spaces">&nbsp;</code><code class="sql plain">6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">inner</code> <code class="sql keyword">where</code> <code class="sql keyword">inner</code><code class="sql plain">.deptno = </code><code class="sql color1">outer</code><code class="sql plain">.deptno)</code></div><div class="line number7 index6 alt2"><code class="sql spaces">&nbsp;</code><code class="sql plain">7&nbsp; /</code></div><div class="line number8 index7 alt1"><code class="sql comments">--------------------------------------------------------------------------------</code></div><div class="line number9 index8 alt2"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code>&nbsp;&nbsp;&nbsp; <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number10 index9 alt1"><code class="sql comments">--------------------------------------------------------------------------------</code></div><div class="line number11 index10 alt2"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 8 (100)|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number12 index11 alt1"><code class="sql plain">|*&nbsp; 1 |&nbsp; HASH </code><code class="sql color1">JOIN</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 63 |&nbsp;&nbsp;&nbsp;&nbsp; 8&nbsp; (25)| 00:00:01 |</code></div><div class="line number13 index12 alt2"><code class="sql plain">|&nbsp;&nbsp; 2 |&nbsp;&nbsp; </code><code class="sql keyword">VIEW</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">| VW_SQ_1 |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; 78 |&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp; (25)| 00:00:01 |</code></div><div class="line number14 index13 alt1"><code class="sql plain">|&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; HASH </code><code class="sql keyword">GROUP</code> <code class="sql keyword">BY</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; 30 |&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp; (25)| 00:00:01 |</code></div><div class="line number15 index14 alt2"><code class="sql plain">|&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code><code class="sql plain">| EMP&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp; 140 |&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number16 index15 alt1"><code class="sql plain">|&nbsp;&nbsp; 5 |&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code>&nbsp; <code class="sql plain">| EMP&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp; 518 |&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number17 index16 alt2"><code class="sql comments">--------------------------------------------------------------------------------</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="sql plain">Predicate Information (identified </code><code class="sql keyword">by</code> <code class="sql plain">operation id):</code></div><div class="line number20 index19 alt1"><code class="sql comments">---------------------------------------------------</code></div><div class="line number21 index20 alt2">&nbsp;</div><div class="line number22 index21 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">1 - access(</code><code class="sql string">"DEPTNO"</code><code class="sql plain">=</code><code class="sql string">"OUTER"</code><code class="sql plain">.</code><code class="sql string">"DEPTNO"</code><code class="sql plain">)</code></div><div class="line number23 index22 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">filter(</code><code class="sql string">"OUTER"</code><code class="sql plain">.</code><code class="sql string">"SAL"</code><code class="sql plain">&gt;</code><code class="sql string">"VW_COL_1"</code><code class="sql plain">)</code></div></div></td></tr></tbody></table></div></div>
<h5><a id="NO_ELIMINATE_OBY"></a>/*+ NO_ELIMINATE_OBY(@query_block) */<br>
/*+ ELIMINATE_OBY(@query_block) */</h5>
<p style="padding-left:30px;">Подсказка (<a title="http://jonathanlewis.wordpress.com" href="http://jonathanlewis.wordpress.com/2006/11/06/filter-subqueries/">совмеместно с QB_NAME</a>) запрещает оптимизатору исключать избыточные с его точки зрения сортировки (<strong>ORDER BY</strong>) из подзапроса (<strong>inline view</strong>)</p>
<div><div id="highlighter_205741" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql keyword">name</code><code class="sql plain">, sql_feature, inverse, version </code><code class="sql keyword">from</code> <code class="sql plain">v$sql_hint </code><code class="sql keyword">where</code> <code class="sql keyword">name</code> <code class="sql color1">like</code> <code class="sql string">'%ELIMINATE_OBY%'</code><code class="sql plain">;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="sql keyword">NAME</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">SQL_FEATURE&nbsp; INVERSE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; VERSION</code></div><div class="line number4 index3 alt1"><code class="sql comments">----------------- ------------ ----------------- --------</code></div><div class="line number5 index4 alt2"><code class="sql plain">ELIMINATE_OBY&nbsp;&nbsp;&nbsp;&nbsp; QKSFM_OBYE&nbsp;&nbsp; NO_ELIMINATE_OBY&nbsp; 10.2.0.1</code></div><div class="line number6 index5 alt1"><code class="sql plain">NO_ELIMINATE_OBY&nbsp; QKSFM_OBYE&nbsp;&nbsp; ELIMINATE_OBY&nbsp;&nbsp;&nbsp;&nbsp; 10.2.0.1</code></div></div></td></tr></tbody></table></div></div>
<p style="padding-left:30px;"><a title="sql.ru" href="http://sql.ru/forum/actualthread.aspx?tid=787023#9387892">Отличный пример товарища wurdu с форума sql.ru</a></p>
<div><div id="highlighter_540254" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql plain">* </code><code class="sql keyword">from</code><code class="sql plain">(</code></div><div class="line number2 index1 alt1"><code class="sql plain">2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">select</code> <code class="sql plain">* </code><code class="sql keyword">from</code> <code class="sql plain">(</code></div><div class="line number3 index2 alt2"><code class="sql plain">3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">select</code> <code class="sql plain">3, 4 </code><code class="sql keyword">from</code> <code class="sql plain">dual</code></div><div class="line number4 index3 alt1"><code class="sql plain">4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">union</code> <code class="sql color1">all</code></div><div class="line number5 index4 alt2"><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">select</code> <code class="sql plain">2, 5 </code><code class="sql keyword">from</code> <code class="sql plain">dual</code></div><div class="line number6 index5 alt1"><code class="sql plain">6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">union</code> <code class="sql color1">all</code></div><div class="line number7 index6 alt2"><code class="sql plain">7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">select</code> <code class="sql plain">1, 4 </code><code class="sql keyword">from</code> <code class="sql plain">dual) a</code></div><div class="line number8 index7 alt1"><code class="sql plain">8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">order</code> <code class="sql keyword">by</code> <code class="sql plain">1</code></div><div class="line number9 index8 alt2"><code class="sql plain">9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; )</code></div><div class="line number10 index9 alt1"><code class="sql plain">10&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">order</code> <code class="sql keyword">by</code> <code class="sql plain">2</code></div><div class="line number11 index10 alt2"><code class="sql plain">11&nbsp; /</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4</code></div><div class="line number14 index13 alt1"><code class="sql comments">---------- ----------</code></div><div class="line number15 index14 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4</code></div><div class="line number16 index15 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4</code></div><div class="line number17 index16 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="sql comments">-------------------------------------------------------------------------</code></div><div class="line number20 index19 alt1"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code> <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number21 index20 alt2"><code class="sql comments">-------------------------------------------------------------------------</code></div><div class="line number22 index21 alt1"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; 18 |&nbsp;&nbsp;&nbsp;&nbsp; 7&nbsp; (15)| 00:00:01 |</code></div><div class="line number23 index22 alt2"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; SORT </code><code class="sql keyword">ORDER</code> <code class="sql keyword">BY</code>&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; 18 |&nbsp;&nbsp;&nbsp;&nbsp; 7&nbsp; (15)| 00:00:01 | </code><code class="sql comments">-- единственный ORDER BY</code></div><div class="line number24 index23 alt1"><code class="sql plain">|&nbsp;&nbsp; 2 |&nbsp;&nbsp; </code><code class="sql keyword">VIEW</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; 18 |&nbsp;&nbsp;&nbsp;&nbsp; 6&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number25 index24 alt2"><code class="sql plain">|&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">UNION</code><code class="sql plain">-</code><code class="sql color1">ALL</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number26 index25 alt1"><code class="sql plain">|&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp;&nbsp; FAST DUAL&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number27 index26 alt2"><code class="sql plain">|&nbsp;&nbsp; 5 |&nbsp;&nbsp;&nbsp;&nbsp; FAST DUAL&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number28 index27 alt1"><code class="sql plain">|&nbsp;&nbsp; 6 |&nbsp;&nbsp;&nbsp;&nbsp; FAST DUAL&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number29 index28 alt2"><code class="sql comments">-------------------------------------------------------------------------</code></div><div class="line number30 index29 alt1">&nbsp;</div><div class="line number31 index30 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql plain">* </code><code class="sql keyword">from</code><code class="sql plain">(</code></div><div class="line number32 index31 alt1"><code class="sql plain">2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">select</code> <code class="sql comments">/*+ no_eliminate_oby */</code></div><div class="line number33 index32 alt2"><code class="sql plain">3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * </code><code class="sql keyword">from</code> <code class="sql plain">(</code></div><div class="line number34 index33 alt1"><code class="sql plain">4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">select</code> <code class="sql plain">3, 4 </code><code class="sql keyword">from</code> <code class="sql plain">dual</code></div><div class="line number35 index34 alt2"><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">union</code> <code class="sql color1">all</code></div><div class="line number36 index35 alt1"><code class="sql plain">6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">select</code> <code class="sql plain">2, 5 </code><code class="sql keyword">from</code> <code class="sql plain">dual</code></div><div class="line number37 index36 alt2"><code class="sql plain">7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">union</code> <code class="sql color1">all</code></div><div class="line number38 index37 alt1"><code class="sql plain">8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">select</code> <code class="sql plain">1, 4 </code><code class="sql keyword">from</code> <code class="sql plain">dual) a</code></div><div class="line number39 index38 alt2"><code class="sql plain">9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">order</code> <code class="sql keyword">by</code> <code class="sql plain">1</code></div><div class="line number40 index39 alt1"><code class="sql plain">10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; )</code></div><div class="line number41 index40 alt2"><code class="sql plain">11&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">order</code> <code class="sql keyword">by</code> <code class="sql plain">2</code></div><div class="line number42 index41 alt1"><code class="sql plain">12&nbsp; /</code></div><div class="line number43 index42 alt2">&nbsp;</div><div class="line number44 index43 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4</code></div><div class="line number45 index44 alt2"><code class="sql comments">---------- ----------</code></div><div class="line number46 index45 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql comments">-- другой рез-т за счёт неисключённого ORDER BY</code></div><div class="line number47 index46 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4</code></div><div class="line number48 index47 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5</code></div><div class="line number49 index48 alt2">&nbsp;</div><div class="line number50 index49 alt1"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code><code class="sql comments">/*+ no_eliminate_oby(@subq1) */</code></div><div class="line number51 index50 alt2"><code class="sql plain">2&nbsp;&nbsp; * </code><code class="sql keyword">from</code><code class="sql plain">(</code></div><div class="line number52 index51 alt1"><code class="sql plain">3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">select</code><code class="sql comments">/*+ qb_name(subq1)*/</code></div><div class="line number53 index52 alt2"><code class="sql plain">4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * </code><code class="sql keyword">from</code> <code class="sql plain">(</code></div><div class="line number54 index53 alt1"><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">select</code> <code class="sql plain">3, 4 </code><code class="sql keyword">from</code> <code class="sql plain">dual</code></div><div class="line number55 index54 alt2"><code class="sql plain">6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">union</code> <code class="sql color1">all</code></div><div class="line number56 index55 alt1"><code class="sql plain">7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">select</code> <code class="sql plain">2, 5 </code><code class="sql keyword">from</code> <code class="sql plain">dual</code></div><div class="line number57 index56 alt2"><code class="sql plain">8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">union</code> <code class="sql color1">all</code></div><div class="line number58 index57 alt1"><code class="sql plain">9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">select</code> <code class="sql plain">1, 4 </code><code class="sql keyword">from</code> <code class="sql plain">dual) a</code></div><div class="line number59 index58 alt2"><code class="sql plain">10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">order</code> <code class="sql keyword">by</code> <code class="sql plain">1)</code></div><div class="line number60 index59 alt1"><code class="sql plain">11&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">order</code> <code class="sql keyword">by</code> <code class="sql plain">2</code></div><div class="line number61 index60 alt2"><code class="sql plain">12&nbsp; /</code></div><div class="line number62 index61 alt1">&nbsp;</div><div class="line number63 index62 alt2"><code class="sql comments">-------------------------------------------------------------------------</code></div><div class="line number64 index63 alt1"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code> <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number65 index64 alt2"><code class="sql comments">-------------------------------------------------------------------------</code></div><div class="line number66 index65 alt1"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; 18 |&nbsp;&nbsp;&nbsp;&nbsp; 8&nbsp; (25)| 00:00:01 |</code></div><div class="line number67 index66 alt2"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; SORT </code><code class="sql keyword">ORDER</code> <code class="sql keyword">BY</code>&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; 18 |&nbsp;&nbsp;&nbsp;&nbsp; 8&nbsp; (25)| 00:00:01 | </code><code class="sql comments">-- ORDER BY</code></div><div class="line number68 index67 alt1"><code class="sql plain">|&nbsp;&nbsp; 2 |&nbsp;&nbsp; </code><code class="sql keyword">VIEW</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; 18 |&nbsp;&nbsp;&nbsp;&nbsp; 7&nbsp; (15)| 00:00:01 |</code></div><div class="line number69 index68 alt2"><code class="sql plain">|&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; SORT </code><code class="sql keyword">ORDER</code> <code class="sql keyword">BY</code> <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; 18 |&nbsp;&nbsp;&nbsp;&nbsp; 7&nbsp; (15)| 00:00:01 | </code><code class="sql comments">-- ORDER BY</code></div><div class="line number70 index69 alt1"><code class="sql plain">|&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">VIEW</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; 18 |&nbsp;&nbsp;&nbsp;&nbsp; 6&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number71 index70 alt2"><code class="sql plain">|&nbsp;&nbsp; 5 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">UNION</code><code class="sql plain">-</code><code class="sql color1">ALL</code>&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number72 index71 alt1"><code class="sql plain">|&nbsp;&nbsp; 6 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FAST DUAL&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number73 index72 alt2"><code class="sql plain">|&nbsp;&nbsp; 7 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FAST DUAL&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number74 index73 alt1"><code class="sql plain">|&nbsp;&nbsp; 8 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FAST DUAL&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number75 index74 alt2"><code class="sql comments">-------------------------------------------------------------------------</code></div></div></td></tr></tbody></table></div></div>
<h5><a id="MERGE"></a>/*+ MERGE([@query_block] [tablespec]) */</h5>
<h5>/*+ NO_MERGE([@query_block] [tablespec]) */</h5>
<p style="padding-left:30px;">Используются для явного разрешения <a title="docs.oracle.com" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10592/sql_elements006.htm#SQLRF50706">/*+ MERGE*/</a> или запрещения <a title="docs.oracle.com" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10592/sql_elements006.htm#SQLRF50507">/*+ NO_MERGE*/</a> использования оптимизатором механизма объединения <strong>complex view merging</strong> основного запроса и встроенных обзоров в секции FROM (<strong>inline view</strong>)</p>
<p style="padding-left:30px;">«В случае, если всроенный обзор содержит запрос с конструкцией <strong>GROUP BY</strong> или оператором <em>DISTINCT</em> оптимизатор может объединить такой обзор с основным запросом только если <strong>complex view merging</strong> разрешено. Тот же механизм <strong>complex merging</strong> может быть использован [оптимизатором] для объединения подзапроса из секции IN (<strong>IN subquery</strong>) с основным запросом, если подзапрос не зависит от основного запроса (<em>subquery is uncorrelated</em>)»</p>
<div><div id="highlighter_181350" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">SELECT</code></div><div class="line number2 index1 alt1"><code class="sql plain">2&nbsp;&nbsp; e1.ename, v.emp_by_dept</code></div><div class="line number3 index2 alt2"><code class="sql plain">3&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">FROM</code> <code class="sql plain">scott.emp e1,</code></div><div class="line number4 index3 alt1"><code class="sql plain">4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (</code><code class="sql keyword">SELECT</code> <code class="sql plain">deptno, </code><code class="sql color2">count</code><code class="sql plain">(*) </code><code class="sql keyword">as</code> <code class="sql plain">emp_by_dept</code></div><div class="line number5 index4 alt2"><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">FROM</code> <code class="sql plain">scott.emp e2</code></div><div class="line number6 index5 alt1"><code class="sql plain">6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">GROUP</code> <code class="sql keyword">BY</code> <code class="sql plain">deptno) v</code></div><div class="line number7 index6 alt2"><code class="sql plain">7&nbsp;&nbsp; </code><code class="sql keyword">WHERE</code> <code class="sql plain">e1.deptno = v.deptno</code></div><div class="line number8 index7 alt1"><code class="sql plain">8&nbsp; /</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="sql plain">SQL&gt; </code><code class="sql keyword">SELECT</code> <code class="sql comments">/*+ NO_MERGE(v) */</code></div><div class="line number11 index10 alt2"><code class="sql plain">2&nbsp;&nbsp; e1.ename, v.emp_by_dept</code></div><div class="line number12 index11 alt1"><code class="sql plain">3&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">FROM</code> <code class="sql plain">scott.emp e1,</code></div><div class="line number13 index12 alt2"><code class="sql plain">4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (</code><code class="sql keyword">SELECT</code> <code class="sql plain">deptno, </code><code class="sql color2">count</code><code class="sql plain">(*) </code><code class="sql keyword">as</code> <code class="sql plain">emp_by_dept</code></div><div class="line number14 index13 alt1"><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">FROM</code> <code class="sql plain">scott.emp e2</code></div><div class="line number15 index14 alt2"><code class="sql plain">6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">GROUP</code> <code class="sql keyword">BY</code> <code class="sql plain">deptno) v</code></div><div class="line number16 index15 alt1"><code class="sql plain">7&nbsp;&nbsp; </code><code class="sql keyword">WHERE</code> <code class="sql plain">e1.deptno = v.deptno</code></div><div class="line number17 index16 alt2"><code class="sql plain">8&nbsp; /</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="sql comments">-----------------------------------------------------------------------------</code></div><div class="line number20 index19 alt1"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code> <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number21 index20 alt2"><code class="sql comments">-----------------------------------------------------------------------------</code></div><div class="line number22 index21 alt1"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp; 490 |&nbsp;&nbsp;&nbsp;&nbsp; 6&nbsp; (34)| 00:00:01 |</code></div><div class="line number23 index22 alt2"><code class="sql plain">|*&nbsp; 1 |&nbsp; HASH </code><code class="sql color1">JOIN</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp; 490 |&nbsp;&nbsp;&nbsp;&nbsp; 6&nbsp; (34)| 00:00:01 |</code></div><div class="line number24 index23 alt1"><code class="sql plain">|&nbsp;&nbsp; 2 |&nbsp;&nbsp; </code><code class="sql keyword">VIEW</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; 78 |&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp; (34)| 00:00:01 | </code><code class="sql comments">-- операция создания INLINE VIEW</code></div><div class="line number25 index24 alt2"><code class="sql plain">|&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; HASH </code><code class="sql keyword">GROUP</code> <code class="sql keyword">BY</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp;&nbsp; 9 |&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp; (34)| 00:00:01 |</code></div><div class="line number26 index25 alt1"><code class="sql plain">|&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code><code class="sql plain">| EMP&nbsp; |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp;&nbsp; 42 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number27 index26 alt2"><code class="sql plain">|&nbsp;&nbsp; 5 |&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code>&nbsp; <code class="sql plain">| EMP&nbsp; |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp; 126 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number28 index27 alt1"><code class="sql comments">-----------------------------------------------------------------------------</code></div><div class="line number29 index28 alt2">&nbsp;</div><div class="line number30 index29 alt1"><code class="sql plain">SQL&gt; </code><code class="sql keyword">SELECT</code> <code class="sql comments">/*+ MERGE(v) */</code></div><div class="line number31 index30 alt2"><code class="sql plain">2&nbsp;&nbsp; e1.ename, v.emp_by_dept</code></div><div class="line number32 index31 alt1"><code class="sql plain">3&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">FROM</code> <code class="sql plain">scott.emp e1,</code></div><div class="line number33 index32 alt2"><code class="sql plain">4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (</code><code class="sql keyword">SELECT</code> <code class="sql plain">deptno, </code><code class="sql color2">count</code><code class="sql plain">(*) </code><code class="sql keyword">as</code> <code class="sql plain">emp_by_dept</code></div><div class="line number34 index33 alt1"><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">FROM</code> <code class="sql plain">scott.emp e2</code></div><div class="line number35 index34 alt2"><code class="sql plain">6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">GROUP</code> <code class="sql keyword">BY</code> <code class="sql plain">deptno) v</code></div><div class="line number36 index35 alt1"><code class="sql plain">7&nbsp;&nbsp; </code><code class="sql keyword">WHERE</code> <code class="sql plain">e1.deptno = v.deptno</code></div><div class="line number37 index36 alt2"><code class="sql plain">8&nbsp; /</code></div><div class="line number38 index37 alt1">&nbsp;</div><div class="line number39 index38 alt2"><code class="sql comments">----------------------------------------------------------------------------</code></div><div class="line number40 index39 alt1"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code> <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number41 index40 alt2"><code class="sql comments">----------------------------------------------------------------------------</code></div><div class="line number42 index41 alt1"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 30 |&nbsp;&nbsp; 720 |&nbsp;&nbsp;&nbsp;&nbsp; 6&nbsp; (34)| 00:00:01 | </code><code class="sql comments">--операция VIEW исключена</code></div><div class="line number43 index42 alt2"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; HASH </code><code class="sql keyword">GROUP</code> <code class="sql keyword">BY</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 30 |&nbsp;&nbsp; 720 |&nbsp;&nbsp;&nbsp;&nbsp; 6&nbsp; (34)| 00:00:01 |</code></div><div class="line number44 index43 alt1"><code class="sql plain">|*&nbsp; 2 |&nbsp;&nbsp; HASH </code><code class="sql color1">JOIN</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 65 |&nbsp; 1560 |&nbsp;&nbsp;&nbsp;&nbsp; 5&nbsp; (20)| 00:00:01 |</code></div><div class="line number45 index44 alt2"><code class="sql plain">|&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code><code class="sql plain">| EMP&nbsp; |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp; 294 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number46 index45 alt1"><code class="sql plain">|&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code><code class="sql plain">| EMP&nbsp; |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp;&nbsp; 42 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number47 index46 alt2"><code class="sql comments">----------------------------------------------------------------------------</code></div></div></td></tr></tbody></table></div></div>
<p style="padding-left:30px;"><a href="https://support.oracle.com/epmos/faces/DocContentDisplay?id=2126705.1">An Example of MERGE Hint Extended Syntax (Doc ID 2126705.1)</a></p>
<h5><a id="USE_CONCAT"></a>/*+ USE_CONCAT ([@query_block] [ OR_PREDICATES(1) [ PREDICATE_REORDERS(() ())] ] ) */</h5>
<blockquote><p>«… инструктирует оптимизатор преобразовывать дизъюнктивные запросы (OR-conditions in the WHERE clause) в объединение запросов с использованием оператора <strong>UNION ALL</strong> (<strong>CONCATENATION</strong>) [т.е. выполнять преобразование <strong>OR-Expansion</strong>]. В отсутствии подсказки трансформация выполняется на основе стоимостного подхода…»</p></blockquote>
<div><div id="highlighter_697640" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">11.2.@ SQL&gt; </code><code class="sql keyword">select</code></div><div class="line number2 index1 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">2&nbsp;&nbsp; *</code></div><div class="line number3 index2 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">3&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">FROM</code> <code class="sql plain">scott.emp e</code></div><div class="line number4 index3 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">4&nbsp;&nbsp; </code><code class="sql keyword">WHERE</code> <code class="sql plain">e.mgr &lt; 7700</code></div><div class="line number5 index4 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">OR</code> <code class="sql plain">e.empno &gt; 7700</code></div><div class="line number6 index5 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">6&nbsp; /</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="sql comments">---------------------------------------------------------------</code></div><div class="line number9 index8 alt2"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code> <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)|</code></div><div class="line number10 index9 alt1"><code class="sql comments">---------------------------------------------------------------</code></div><div class="line number11 index10 alt2"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 10 |&nbsp;&nbsp; 380 |&nbsp;&nbsp;&nbsp;&nbsp; 7&nbsp;&nbsp; (0)| </code><code class="sql comments">-- на основе стоимости UNION ALL не выбирается</code></div><div class="line number12 index11 alt1"><code class="sql plain">|*&nbsp; 1 |&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code><code class="sql plain">| EMP&nbsp; |&nbsp;&nbsp;&nbsp; 10 |&nbsp;&nbsp; 380 |&nbsp;&nbsp;&nbsp;&nbsp; 7&nbsp;&nbsp; (0)|</code></div><div class="line number13 index12 alt2"><code class="sql comments">---------------------------------------------------------------</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="sql plain">Predicate Information (identified </code><code class="sql keyword">by</code> <code class="sql plain">operation id):</code></div><div class="line number16 index15 alt1"><code class="sql comments">---------------------------------------------------</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">1 - filter(</code><code class="sql string">"E"</code><code class="sql plain">.</code><code class="sql string">"MGR"</code><code class="sql plain">7700)</code></div></div></td></tr></tbody></table></div></div>
<p style="padding-left:30px;">В виде, указанном в документации <strong>/*+ USE_CONCAT ([@query_block]) */</strong>, подсказка может не работать:</p>
<div><div id="highlighter_907410" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">11.2.@ SQL&gt; </code><code class="sql keyword">select</code> <code class="sql comments">--+ QB_NAME(qb) USE_CONCAT(@qb)</code></div><div class="line number2 index1 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">2&nbsp;&nbsp; *</code></div><div class="line number3 index2 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">3&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">FROM</code> <code class="sql plain">scott.emp e</code></div><div class="line number4 index3 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">4&nbsp;&nbsp; </code><code class="sql keyword">WHERE</code> <code class="sql plain">e.mgr &lt; 7700</code></div><div class="line number5 index4 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">OR</code> <code class="sql plain">e.empno &gt; 7700</code></div><div class="line number6 index5 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">6&nbsp; /</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="sql comments">---------------------------------------------------------------</code></div><div class="line number9 index8 alt2"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code> <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)|</code></div><div class="line number10 index9 alt1"><code class="sql comments">---------------------------------------------------------------</code></div><div class="line number11 index10 alt2"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 10 |&nbsp;&nbsp; 380 |&nbsp;&nbsp;&nbsp;&nbsp; 7&nbsp;&nbsp; (0)|</code></div><div class="line number12 index11 alt1"><code class="sql plain">|*&nbsp; 1 |&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code><code class="sql plain">| EMP&nbsp; |&nbsp;&nbsp;&nbsp; 10 |&nbsp;&nbsp; 380 |&nbsp;&nbsp;&nbsp;&nbsp; 7&nbsp;&nbsp; (0)|</code></div><div class="line number13 index12 alt2"><code class="sql comments">---------------------------------------------------------------</code></div></div></td></tr></tbody></table></div></div>
<p style="padding-left:30px;">Корректно отрабатывает с параметром <strong>OR_PREDICATES(1)</strong> на версиях &gt;= 11.2</p>
<div><div id="highlighter_105294" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">11.2.@ SQL&gt; </code><code class="sql keyword">select</code> <code class="sql comments">--+ USE_CONCAT(OR_PREDICATES(1))</code></div><div class="line number2 index1 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">2&nbsp;&nbsp; *</code></div><div class="line number3 index2 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">3&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">FROM</code> <code class="sql plain">scott.emp e</code></div><div class="line number4 index3 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">4&nbsp;&nbsp; </code><code class="sql keyword">WHERE</code> <code class="sql plain">e.mgr &lt; 7700</code></div><div class="line number5 index4 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">OR</code> <code class="sql plain">e.empno &gt; 7700</code></div><div class="line number6 index5 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">6&nbsp; /</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="sql comments">----------------------------------------------------------------------------------</code></div><div class="line number9 index8 alt2"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)|</code></div><div class="line number10 index9 alt1"><code class="sql comments">----------------------------------------------------------------------------------</code></div><div class="line number11 index10 alt2"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 10 |&nbsp;&nbsp; 380 |&nbsp;&nbsp;&nbsp; 14&nbsp;&nbsp; (0)|</code></div><div class="line number12 index11 alt1"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; CONCATENATION&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql comments">-- в соответствии с хинтом выбран UNION ALL</code></div><div class="line number13 index12 alt2"><code class="sql plain">|&nbsp;&nbsp; 2 |&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">BY</code> <code class="sql keyword">INDEX</code> <code class="sql plain">ROWID| EMP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 6 |&nbsp;&nbsp; 228 |&nbsp;&nbsp;&nbsp;&nbsp; 7&nbsp;&nbsp; (0)|</code></div><div class="line number14 index13 alt1"><code class="sql plain">|*&nbsp; 3 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql plain">RANGE SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | SYS_C0093796 |&nbsp;&nbsp;&nbsp;&nbsp; 6 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp; (0)|</code></div><div class="line number15 index14 alt2"><code class="sql plain">|*&nbsp; 4 |&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">| EMP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 4 |&nbsp;&nbsp; 152 |&nbsp;&nbsp;&nbsp;&nbsp; 7&nbsp;&nbsp; (0)|</code></div><div class="line number16 index15 alt1"><code class="sql comments">----------------------------------------------------------------------------------</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="sql plain">Outline Data</code></div><div class="line number19 index18 alt2"><code class="sql comments">-------------</code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql comments">/*+</code></div><div class="line number22 index21 alt1"><code class="sql comments">...</code></div><div class="line number23 index22 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql comments">USE_CONCAT(@"S1" OR_PREDICATES(1))</code></div><div class="line number24 index23 alt1"><code class="sql comments">...</code></div><div class="line number25 index24 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql comments">*/</code></div><div class="line number26 index25 alt1">&nbsp;</div><div class="line number27 index26 alt2"><code class="sql plain">Predicate Information (identified </code><code class="sql keyword">by</code> <code class="sql plain">operation id):</code></div><div class="line number28 index27 alt1"><code class="sql comments">---------------------------------------------------</code></div><div class="line number29 index28 alt2">&nbsp;</div><div class="line number30 index29 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">3 - access(</code><code class="sql string">"E"</code><code class="sql plain">.</code><code class="sql string">"EMPNO"</code><code class="sql plain">&gt;7700)</code></div><div class="line number31 index30 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">4 - filter(</code><code class="sql string">"E"</code><code class="sql plain">.</code><code class="sql string">"MGR"</code><code class="sql plain">7700))</code></div></div></td></tr></tbody></table></div></div>
<p style="padding-left:30px;">В данных Outline можно найти другой параметр подсказки <strong>PREDICATE_REORDERS</strong>:</p>
<div><div id="highlighter_62026" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">11.2.0.3.ORCL112@SCOTT SQL&gt; </code><code class="sql keyword">create</code> <code class="sql keyword">index</code> <code class="sql plain">IDX_MGR </code><code class="sql keyword">on</code> <code class="sql plain">scott.EMP (MGR, 0);</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="sql keyword">Index</code> <code class="sql plain">created.</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql comments">/*+ qb_name(S1)*/</code></div><div class="line number6 index5 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">2&nbsp;&nbsp; *</code></div><div class="line number7 index6 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">3&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">FROM</code> <code class="sql plain">scott.emp e</code></div><div class="line number8 index7 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">4&nbsp;&nbsp; </code><code class="sql keyword">WHERE</code> <code class="sql plain">e.empno = 7369</code></div><div class="line number9 index8 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">OR</code> <code class="sql plain">e.mgr </code><code class="sql keyword">is</code> <code class="sql color1">NULL</code></div><div class="line number10 index9 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">6&nbsp; /</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">EMPNO ENAME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; JOB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MGR HIREDATE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SAL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; COMM&nbsp;&nbsp;&nbsp;&nbsp; DEPTNO</code></div><div class="line number13 index12 alt2"><code class="sql comments">---------- ---------- --------- ---------- -------- ---------- ---------- ----------</code></div><div class="line number14 index13 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">7369 SMITH&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CLERK&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 7902 17.12.80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 800&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 20</code></div><div class="line number15 index14 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">7839 KING&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PRESIDENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 17.11.81&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">SELECT</code> <code class="sql plain">* </code><code class="sql keyword">FROM</code> <code class="sql keyword">TABLE</code><code class="sql plain">(dbms_xplan.display_cursor(</code><code class="sql string">''</code><code class="sql plain">,</code><code class="sql string">''</code><code class="sql plain">,</code><code class="sql string">'all allstats advanced -projection last'</code><code class="sql plain">));</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="sql comments">-----------------------------------------------------------------------------------------</code></div><div class="line number20 index19 alt1"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code>&nbsp;&nbsp;&nbsp; <code class="sql plain">| E-</code><code class="sql keyword">Rows</code> <code class="sql plain">|E-Bytes| Cost (%CPU)| E-</code><code class="sql keyword">Time</code>&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number21 index20 alt2"><code class="sql comments">-----------------------------------------------------------------------------------------</code></div><div class="line number22 index21 alt1"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 3 (100)|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number23 index22 alt2"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; CONCATENATION&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number24 index23 alt1"><code class="sql plain">|&nbsp;&nbsp; 2 |&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">BY</code> <code class="sql keyword">INDEX</code> <code class="sql plain">ROWID| EMP&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 38 |&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number25 index24 alt2"><code class="sql plain">|*&nbsp; 3 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql keyword">UNIQUE</code> <code class="sql plain">SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | PK_EMP&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp; (0)|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number26 index25 alt1"><code class="sql plain">|*&nbsp; 4 |&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">BY</code> <code class="sql keyword">INDEX</code> <code class="sql plain">ROWID| EMP&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 38 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number27 index26 alt2"><code class="sql plain">|*&nbsp; 5 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql plain">RANGE SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | IDX_MGR |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number28 index27 alt1"><code class="sql comments">-----------------------------------------------------------------------------------------</code></div><div class="line number29 index28 alt2">&nbsp;</div><div class="line number30 index29 alt1"><code class="sql plain">Query Block </code><code class="sql keyword">Name</code> <code class="sql plain">/ Object Alias (identified </code><code class="sql keyword">by</code> <code class="sql plain">operation id):</code></div><div class="line number31 index30 alt2"><code class="sql comments">-------------------------------------------------------------</code></div><div class="line number32 index31 alt1">&nbsp;</div><div class="line number33 index32 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">1 - S1</code></div><div class="line number34 index33 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">2 - S1_1 / E@S1</code></div><div class="line number35 index34 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">3 - S1_1 / E@S1</code></div><div class="line number36 index35 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">4 - S1_2 / E@S1_2</code></div><div class="line number37 index36 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">5 - S1_2 / E@S1_2</code></div><div class="line number38 index37 alt1">&nbsp;</div><div class="line number39 index38 alt2"><code class="sql plain">Outline Data</code></div><div class="line number40 index39 alt1"><code class="sql comments">-------------</code></div><div class="line number41 index40 alt2">&nbsp;</div><div class="line number42 index41 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql comments">/*+</code></div><div class="line number43 index42 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql comments">BEGIN_OUTLINE_DATA</code></div><div class="line number44 index43 alt1"><code class="sql comments">...</code></div><div class="line number45 index44 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql comments">USE_CONCAT(@"S1" 8 OR_PREDICATES(1) PREDICATE_REORDERS((3 2) (2 3))) -- ***</code></div><div class="line number46 index45 alt1"><code class="sql comments">...</code></div><div class="line number47 index46 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql comments">END_OUTLINE_DATA</code></div><div class="line number48 index47 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql comments">*/</code></div></div></td></tr></tbody></table></div></div>
<p style="padding-left:30px;">, позволяющий менять порядок выполнения конкатенации:</p>
<div><div id="highlighter_984203" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql comments">--+ qb_name(S1) USE_CONCAT(@"S1" 8 OR_PREDICATES(1) PREDICATE_REORDERS((1 2) (2 1))) -- с параметрами</code></div><div class="line number2 index1 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">2&nbsp;&nbsp; *</code></div><div class="line number3 index2 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">3&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">FROM</code> <code class="sql plain">scott.emp e</code></div><div class="line number4 index3 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">4&nbsp;&nbsp; </code><code class="sql keyword">WHERE</code> <code class="sql plain">e.empno = 7369</code></div><div class="line number5 index4 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">OR</code> <code class="sql plain">e.mgr </code><code class="sql keyword">is</code> <code class="sql color1">NULL</code></div><div class="line number6 index5 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">6&nbsp; /</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="sql comments">----------------------------------------------------------------------------------------</code></div><div class="line number9 index8 alt2"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code>&nbsp;&nbsp;&nbsp; <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number10 index9 alt1"><code class="sql comments">----------------------------------------------------------------------------------------</code></div><div class="line number11 index10 alt2"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 2 |&nbsp;&nbsp;&nbsp; 76 |&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number12 index11 alt1"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; CONCATENATION&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number13 index12 alt2"><code class="sql plain">|&nbsp;&nbsp; 2 |&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">BY</code> <code class="sql keyword">INDEX</code> <code class="sql plain">ROWID| EMP&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 38 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number14 index13 alt1"><code class="sql plain">|*&nbsp; 3 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql plain">RANGE SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | IDX_MGR |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number15 index14 alt2"><code class="sql plain">|*&nbsp; 4 |&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">BY</code> <code class="sql keyword">INDEX</code> <code class="sql plain">ROWID| EMP&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 38 |&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number16 index15 alt1"><code class="sql plain">|*&nbsp; 5 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql keyword">UNIQUE</code> <code class="sql plain">SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | PK_EMP&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number17 index16 alt2"><code class="sql comments">----------------------------------------------------------------------------------------</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql comments">--+ qb_name(S1) USE_CONCAT(@"S1" 8 OR_PREDICATES(1) PREDICATE_REORDERS()) -- без параметров</code></div><div class="line number20 index19 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">2&nbsp;&nbsp; *</code></div><div class="line number21 index20 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">3&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">FROM</code> <code class="sql plain">scott.emp e</code></div><div class="line number22 index21 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">4&nbsp;&nbsp; </code><code class="sql keyword">WHERE</code> <code class="sql plain">e.empno = 7369</code></div><div class="line number23 index22 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">OR</code> <code class="sql plain">e.mgr </code><code class="sql keyword">is</code> <code class="sql color1">NULL</code></div><div class="line number24 index23 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">6&nbsp; /</code></div><div class="line number25 index24 alt2">&nbsp;</div><div class="line number26 index25 alt1"><code class="sql comments">----------------------------------------------------------------------------------------</code></div><div class="line number27 index26 alt2"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code>&nbsp;&nbsp;&nbsp; <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number28 index27 alt1"><code class="sql comments">----------------------------------------------------------------------------------------</code></div><div class="line number29 index28 alt2"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 2 |&nbsp;&nbsp;&nbsp; 76 |&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number30 index29 alt1"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; CONCATENATION&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number31 index30 alt2"><code class="sql plain">|&nbsp;&nbsp; 2 |&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">BY</code> <code class="sql keyword">INDEX</code> <code class="sql plain">ROWID| EMP&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 38 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number32 index31 alt1"><code class="sql plain">|*&nbsp; 3 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql plain">RANGE SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | IDX_MGR |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number33 index32 alt2"><code class="sql plain">|*&nbsp; 4 |&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">BY</code> <code class="sql keyword">INDEX</code> <code class="sql plain">ROWID| EMP&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 38 |&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number34 index33 alt1"><code class="sql plain">|*&nbsp; 5 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql keyword">UNIQUE</code> <code class="sql plain">SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | PK_EMP&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number35 index34 alt2"><code class="sql comments">----------------------------------------------------------------------------------------</code></div></div></td></tr></tbody></table></div></div>
<p style="padding-left:30px;"><a href="https://iusoltsev.wordpress.com/2012/08/07/oracle-11g-filter-cost-or-expansion/">Oracle 11g: стоимость операции FILTER и OR-Expansion</a></p>
<p style="padding-left:30px;"><a href="https://support.oracle.com/epmos/faces/ui/km/DocContentDisplay.jspx?_afrLoop=1162392304628159&amp;id=259741.1">USE_CONCAT hint on different versions [ID 259741.1]</a></p>
<p>Кроме стимулирования использования операции CONCATENATION при явном использовании OR в условиях WHERE запроса, подсказка может быть успешно использована для директивного запрещения/отключения операции INLIST ITERATOR в случае индексного доступа — <a href="https://iusoltsev.wordpress.com/2013/11/18/concatenation-vs-inlist-iterator/">Конкатенация против INLIST ITERATOR</a></p>
<h5><a id="NO_EXPAND"></a>/*+ NO_EXPAND ( [@query_block] ) */</h5>
<p style="padding-left:30px;">Подсказка противоположная хинту <strong>USE_CONCAT</strong>: сигнализирует оптимизатору не использовать преобразование <strong>OR-expansion</strong> для запросов, содержащих дизъюнктивные условия OR или IN-lists в секции WHERE, несмотря на стоимость:</p>
<div><div id="highlighter_253150" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">create</code> <code class="sql keyword">index</code> <code class="sql plain">SCOTT.IDX_MGR </code><code class="sql keyword">on</code> <code class="sql plain">scott.EMP (MGR, 0) tablespace USERS;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="sql keyword">Index</code> <code class="sql plain">created.</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql plain">*</code></div><div class="line number6 index5 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">2&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">FROM</code> <code class="sql plain">scott.emp e</code></div><div class="line number7 index6 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">3&nbsp;&nbsp; </code><code class="sql keyword">WHERE</code> <code class="sql plain">e.empno = 7369</code></div><div class="line number8 index7 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">OR</code> <code class="sql plain">e.mgr </code><code class="sql keyword">is</code> <code class="sql color1">NULL</code></div><div class="line number9 index8 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">5&nbsp; /</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="sql comments">-----------------------------------------------------------------------------</code></div><div class="line number12 index11 alt1"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code>&nbsp;&nbsp;&nbsp; <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)|</code></div><div class="line number13 index12 alt2"><code class="sql comments">-----------------------------------------------------------------------------</code></div><div class="line number14 index13 alt1"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 2 |&nbsp;&nbsp;&nbsp; 76 |&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp; (0)|</code></div><div class="line number15 index14 alt2"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; CONCATENATION&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql comments">-- по умолчанию выполняется OR-Expansion</code></div><div class="line number16 index15 alt1"><code class="sql plain">|&nbsp;&nbsp; 2 |&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">BY</code> <code class="sql keyword">INDEX</code> <code class="sql plain">ROWID| EMP&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 38 |&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp; (0)|</code></div><div class="line number17 index16 alt2"><code class="sql plain">|*&nbsp; 3 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql keyword">UNIQUE</code> <code class="sql plain">SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | PK_EMP&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp; (0)|</code></div><div class="line number18 index17 alt1"><code class="sql plain">|*&nbsp; 4 |&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">BY</code> <code class="sql keyword">INDEX</code> <code class="sql plain">ROWID| EMP&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 38 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)|</code></div><div class="line number19 index18 alt2"><code class="sql plain">|*&nbsp; 5 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql plain">RANGE SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | IDX_MGR |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp; (0)|</code></div><div class="line number20 index19 alt1"><code class="sql comments">-----------------------------------------------------------------------------</code></div><div class="line number21 index20 alt2">&nbsp;</div><div class="line number22 index21 alt1"><code class="sql plain">Predicate Information (identified </code><code class="sql keyword">by</code> <code class="sql plain">operation id):</code></div><div class="line number23 index22 alt2"><code class="sql comments">---------------------------------------------------</code></div><div class="line number24 index23 alt1">&nbsp;</div><div class="line number25 index24 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">3 - access(</code><code class="sql string">"E"</code><code class="sql plain">.</code><code class="sql string">"EMPNO"</code><code class="sql plain">=7369)</code></div><div class="line number26 index25 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">4 - filter(LNNVL(</code><code class="sql string">"E"</code><code class="sql plain">.</code><code class="sql string">"EMPNO"</code><code class="sql plain">=7369))</code></div><div class="line number27 index26 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">5 - access(</code><code class="sql string">"E"</code><code class="sql plain">.</code><code class="sql string">"MGR"</code> <code class="sql keyword">IS</code> <code class="sql color1">NULL</code><code class="sql plain">)</code></div><div class="line number28 index27 alt1">&nbsp;</div><div class="line number29 index28 alt2"><code class="sql keyword">Statistics</code></div><div class="line number30 index29 alt1"><code class="sql comments">----------------------------------------------------------</code></div><div class="line number31 index30 alt2"><code class="sql plain">...</code></div><div class="line number32 index31 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">4&nbsp; consistent gets</code></div><div class="line number33 index32 alt2"><code class="sql plain">...</code></div><div class="line number34 index33 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">2&nbsp; </code><code class="sql keyword">rows</code> <code class="sql plain">processed</code></div><div class="line number35 index34 alt2">&nbsp;</div><div class="line number36 index35 alt1"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql comments">--+ NO_EXPAND</code></div><div class="line number37 index36 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">2&nbsp;&nbsp; *</code></div><div class="line number38 index37 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">3&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">FROM</code> <code class="sql plain">scott.emp e</code></div><div class="line number39 index38 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">4&nbsp;&nbsp; </code><code class="sql keyword">WHERE</code> <code class="sql plain">e.empno = 7369</code></div><div class="line number40 index39 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">OR</code> <code class="sql plain">e.mgr </code><code class="sql keyword">is</code> <code class="sql color1">NULL</code></div><div class="line number41 index40 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">6&nbsp; /</code></div><div class="line number42 index41 alt1">&nbsp;</div><div class="line number43 index42 alt2"><code class="sql comments">--------------------------------------------------------------------------</code></div><div class="line number44 index43 alt1"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code> <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number45 index44 alt2"><code class="sql comments">--------------------------------------------------------------------------</code></div><div class="line number46 index45 alt1"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 2 |&nbsp;&nbsp;&nbsp; 76 |&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number47 index46 alt2"><code class="sql plain">|*&nbsp; 1 |&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code><code class="sql plain">| EMP&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 2 |&nbsp;&nbsp;&nbsp; 76 |&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number48 index47 alt1"><code class="sql comments">--------------------------------------------------------------------------</code></div><div class="line number49 index48 alt2">&nbsp;</div><div class="line number50 index49 alt1"><code class="sql plain">Predicate Information (identified </code><code class="sql keyword">by</code> <code class="sql plain">operation id):</code></div><div class="line number51 index50 alt2"><code class="sql comments">---------------------------------------------------</code></div><div class="line number52 index51 alt1">&nbsp;</div><div class="line number53 index52 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">1 - filter(</code><code class="sql string">"E"</code><code class="sql plain">.</code><code class="sql string">"MGR"</code> <code class="sql keyword">IS</code> <code class="sql color1">NULL</code> <code class="sql color1">OR</code> <code class="sql string">"E"</code><code class="sql plain">.</code><code class="sql string">"EMPNO"</code><code class="sql plain">=7369)</code></div><div class="line number54 index53 alt1">&nbsp;</div><div class="line number55 index54 alt2"><code class="sql keyword">Statistics</code></div><div class="line number56 index55 alt1"><code class="sql comments">----------------------------------------------------------</code></div><div class="line number57 index56 alt2"><code class="sql plain">...</code></div><div class="line number58 index57 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">7&nbsp; consistent gets</code></div></div></td></tr></tbody></table></div></div>
<h5><a id="PUSH_PRED"></a>/*+ PUSH_PRED ( [@query_block] [tablespec] ) */<br>
/*+ NO_PUSH_PRED ( [@query_block] [tablespec] ) */</h5>
<p style="padding-left:30px;">указание использовать / не использовать CBQT <a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-access-path/#JPPD">Join Predicate Push-Down</a> с обзором / таблицей, указанными в параметрах подсказки, например:</p>
<div><div id="highlighter_604691" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">11.2.0.3.@SCOTT SQL&gt; </code><code class="sql comments">-- без хинта или</code></div><div class="line number2 index1 alt1"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql comments">--+ NO_PUSH_PRED(d)</code></div><div class="line number3 index2 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">2&nbsp;&nbsp; * </code><code class="sql keyword">from</code> <code class="sql plain">emp e,</code></div><div class="line number4 index3 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (</code><code class="sql keyword">select</code> <code class="sql plain">* </code><code class="sql keyword">from</code> <code class="sql plain">dept</code></div><div class="line number5 index4 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">union</code></div><div class="line number6 index5 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">select</code> <code class="sql plain">* </code><code class="sql keyword">from</code> <code class="sql plain">dept) d</code></div><div class="line number7 index6 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">6&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql plain">d.deptno = e.deptno</code></div><div class="line number8 index7 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">7&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">e.job = </code><code class="sql string">'SALESMAN'</code></div><div class="line number9 index8 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">8&nbsp; /</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="sql comments">------------------------------------------------------------------------------</code></div><div class="line number12 index11 alt1"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code> <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number13 index12 alt2"><code class="sql comments">------------------------------------------------------------------------------</code></div><div class="line number14 index13 alt1"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 7 |&nbsp;&nbsp; 476 |&nbsp;&nbsp;&nbsp; 12&nbsp; (25)| 00:00:01 |</code></div><div class="line number15 index14 alt2"><code class="sql plain">|*&nbsp; 1 |&nbsp; HASH </code><code class="sql color1">JOIN</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 7 |&nbsp;&nbsp; 476 |&nbsp;&nbsp;&nbsp; 12&nbsp; (25)| 00:00:01 | </code><code class="sql comments">-- JPPD не используется</code></div><div class="line number16 index15 alt1"><code class="sql plain">|*&nbsp; 2 |&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code>&nbsp;&nbsp; <code class="sql plain">| EMP&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp; 114 |&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number17 index16 alt2"><code class="sql plain">|&nbsp;&nbsp; 3 |&nbsp;&nbsp; </code><code class="sql keyword">VIEW</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 8 |&nbsp;&nbsp; 240 |&nbsp;&nbsp;&nbsp;&nbsp; 8&nbsp; (25)| 00:00:01 |</code></div><div class="line number18 index17 alt1"><code class="sql plain">|&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp; SORT </code><code class="sql keyword">UNIQUE</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 8 |&nbsp;&nbsp; 160 |&nbsp;&nbsp;&nbsp;&nbsp; 8&nbsp; (63)| 00:00:01 |</code></div><div class="line number19 index18 alt2"><code class="sql plain">|&nbsp;&nbsp; 5 |&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">UNION</code><code class="sql plain">-</code><code class="sql color1">ALL</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number20 index19 alt1"><code class="sql plain">|&nbsp;&nbsp; 6 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code><code class="sql plain">| DEPT |&nbsp;&nbsp;&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp; 80 |&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number21 index20 alt2"><code class="sql plain">|&nbsp;&nbsp; 7 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code><code class="sql plain">| DEPT |&nbsp;&nbsp;&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp; 80 |&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number22 index21 alt1"><code class="sql comments">------------------------------------------------------------------------------</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="sql plain">Predicate Information (identified </code><code class="sql keyword">by</code> <code class="sql plain">operation id):</code></div><div class="line number25 index24 alt2"><code class="sql comments">---------------------------------------------------</code></div><div class="line number26 index25 alt1">&nbsp;</div><div class="line number27 index26 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">1 - access(</code><code class="sql string">"D"</code><code class="sql plain">.</code><code class="sql string">"DEPTNO"</code><code class="sql plain">=</code><code class="sql string">"E"</code><code class="sql plain">.</code><code class="sql string">"DEPTNO"</code><code class="sql plain">)</code></div><div class="line number28 index27 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">2 - filter(</code><code class="sql string">"E"</code><code class="sql plain">.</code><code class="sql string">"JOB"</code><code class="sql plain">=</code><code class="sql string">'SALESMAN'</code><code class="sql plain">)</code></div><div class="line number29 index28 alt2">&nbsp;</div><div class="line number30 index29 alt1"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql comments">--+ PUSH_PRED(d)</code></div><div class="line number31 index30 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">2&nbsp;&nbsp; * </code><code class="sql keyword">from</code> <code class="sql plain">emp e,</code></div><div class="line number32 index31 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (</code><code class="sql keyword">select</code> <code class="sql plain">* </code><code class="sql keyword">from</code> <code class="sql plain">dept</code></div><div class="line number33 index32 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">union</code></div><div class="line number34 index33 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">select</code> <code class="sql plain">* </code><code class="sql keyword">from</code> <code class="sql plain">dept) d</code></div><div class="line number35 index34 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">6&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql plain">d.deptno = e.deptno</code></div><div class="line number36 index35 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">7&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">e.job = </code><code class="sql string">'SALESMAN'</code></div><div class="line number37 index36 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">8&nbsp; /</code></div><div class="line number38 index37 alt1">&nbsp;</div><div class="line number39 index38 alt2"><code class="sql comments">-------------------------------------------------------------------------------------------</code></div><div class="line number40 index39 alt1"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code>&nbsp;&nbsp;&nbsp; <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number41 index40 alt2"><code class="sql comments">-------------------------------------------------------------------------------------------</code></div><div class="line number42 index41 alt1"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 7 |&nbsp;&nbsp; 476 |&nbsp;&nbsp;&nbsp; 15&nbsp; (40)| 00:00:01 |</code></div><div class="line number43 index42 alt2"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; NESTED LOOPS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 7 |&nbsp;&nbsp; 476 |&nbsp;&nbsp;&nbsp; 15&nbsp; (40)| 00:00:01 |</code></div><div class="line number44 index43 alt1"><code class="sql plain">|*&nbsp; 2 |&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">| EMP&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 3 |&nbsp;&nbsp; 114 |&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number45 index44 alt2"><code class="sql plain">|&nbsp;&nbsp; 3 |&nbsp;&nbsp; </code><code class="sql keyword">VIEW</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 30 |&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp; (50)| 00:00:01 |</code></div><div class="line number46 index45 alt1"><code class="sql plain">|&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp; SORT </code><code class="sql keyword">UNIQUE</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 2 |&nbsp;&nbsp;&nbsp; 40 |&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp; (75)| 00:00:01 |</code></div><div class="line number47 index46 alt2"><code class="sql plain">|&nbsp;&nbsp; 5 |&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">UNION</code> <code class="sql color1">ALL</code> <code class="sql plain">PUSHED PREDICATE&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql comments">-- JPPD с бессмысленным UNION ALL</code></div><div class="line number48 index47 alt1"><code class="sql plain">|&nbsp;&nbsp; 6 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">BY</code> <code class="sql keyword">INDEX</code> <code class="sql plain">ROWID| DEPT&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 20 |&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number49 index48 alt2"><code class="sql plain">|*&nbsp; 7 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql keyword">UNIQUE</code> <code class="sql plain">SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | PK_DEPT |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number50 index49 alt1"><code class="sql plain">|&nbsp;&nbsp; 8 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">BY</code> <code class="sql keyword">INDEX</code> <code class="sql plain">ROWID| DEPT&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp; 20 |&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number51 index50 alt2"><code class="sql plain">|*&nbsp; 9 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql keyword">UNIQUE</code> <code class="sql plain">SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | PK_DEPT |&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number52 index51 alt1"><code class="sql comments">-------------------------------------------------------------------------------------------</code></div><div class="line number53 index52 alt2">&nbsp;</div><div class="line number54 index53 alt1"><code class="sql plain">Predicate Information (identified </code><code class="sql keyword">by</code> <code class="sql plain">operation id):</code></div><div class="line number55 index54 alt2"><code class="sql comments">---------------------------------------------------</code></div><div class="line number56 index55 alt1">&nbsp;</div><div class="line number57 index56 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">2 - filter(</code><code class="sql string">"E"</code><code class="sql plain">.</code><code class="sql string">"JOB"</code><code class="sql plain">=</code><code class="sql string">'SALESMAN'</code><code class="sql plain">)</code></div><div class="line number58 index57 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">7 - access(</code><code class="sql string">"DEPT"</code><code class="sql plain">.</code><code class="sql string">"DEPTNO"</code><code class="sql plain">=</code><code class="sql string">"E"</code><code class="sql plain">.</code><code class="sql string">"DEPTNO"</code><code class="sql plain">)</code></div><div class="line number59 index58 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">9 - access(</code><code class="sql string">"DEPT"</code><code class="sql plain">.</code><code class="sql string">"DEPTNO"</code><code class="sql plain">=</code><code class="sql string">"E"</code><code class="sql plain">.</code><code class="sql string">"DEPTNO"</code><code class="sql plain">)</code></div></div></td></tr></tbody></table></div></div>
<p style="padding-left:30px;"><a href="https://iusoltsev.wordpress.com/2013/09/22/unique-indices-jppd/">Уникальные индексы для Join Predicate Push-Down</a></p>
<h5><a id="FACTORIZE_JOIN"></a>/*+ FACTORIZE_JOIN( @query_set [tablespec@query_block1 tablespec@query_block2 […]])*/<br>
/*+ NO_FACTORIZE_JOIN( @query_set )*/</h5>
<p style="padding-left:30px;">Начиная с 11.2, для управления операцией <a href="https://iusoltsev.wordpress.com/2013/11/01/join-factorization/">Join Factorization</a></p>
<h5><a id="OR_EXPAND"></a>/*+ OR_EXPAND([@query_block] tablespec Column1 [Column2 … ]) */</h5>
<p style="padding-left:30px;">Может быть использован для инициирования OR EXPAND query transformation <a href="http://www.hellodba.com/reader.php?ID=199&amp;lang=EN">Query Transformation Hints</a></p>
<h4>Подсказки, связанные с генерацией курсоров</h4>
<h5><a id="CURSOR_SHARING_EXACT"></a>/*+ CURSOR_SHARING_EXACT */</h5>
<p style="padding-left:30px;">«При указании этой подсказки, Oracle выполняет запрос без попыток заменить текстовые значения (<strong>literals</strong>) связанными переменными (<strong>bind variables</strong>)» Несмотря на значения <strong><a href="https://iusoltsev.wordpress.com/home/individual-sql-and-cbo/oracle-parameters/#cursor_sharing">CURSOR_SHARING</a> = SIMILAR | FORCE</strong> , как минимум, для каждого нового набора <strong>literals</strong> будет выполняться разбор SQL (<strong>hard parse</strong>) — может быть приемлемым решением при нечастом выполнении сложных отчётных запросов</p>
<h5><a id="BIND_AWARE"></a>/*+ BIND_AWARE*/</h5>
<p style="padding-left:30px;">Начиная с 11.1.0.7 отключает <strong>Adaptive Cursor Sharing</strong> (фазу мониторинга для оценки необходимости последующего применения ECS), форсируя применение <strong>Extended Cursor Sharing</strong> для курсоров с отличающимися наборами связанных переменных в случаях, когда ECS не срабатывает автоматически, например, при отсутствии гистограмм:</p>
<div><div id="highlighter_328902" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">11.2.0.3.@ SQL&gt; </code><code class="sql keyword">select</code> <code class="sql plain">column_name, histogram </code><code class="sql keyword">from</code> <code class="sql plain">user_tab_col_statistics </code><code class="sql keyword">where</code> <code class="sql plain">table_name = </code><code class="sql string">'EMP'</code><code class="sql plain">;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="sql plain">COLUMN_NAME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; HISTOGRAM</code></div><div class="line number4 index3 alt1"><code class="sql comments">------------------------------ ---------------</code></div><div class="line number5 index4 alt2"><code class="sql plain">EMPNO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NONE</code></div><div class="line number6 index5 alt1"><code class="sql plain">ENAME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NONE</code></div><div class="line number7 index6 alt2"><code class="sql plain">JOB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NONE</code></div><div class="line number8 index7 alt1"><code class="sql plain">MGR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NONE</code></div><div class="line number9 index8 alt2"><code class="sql plain">HIREDATE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NONE</code></div><div class="line number10 index9 alt1"><code class="sql plain">SAL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NONE</code></div><div class="line number11 index10 alt2"><code class="sql plain">COMM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NONE</code></div><div class="line number12 index11 alt1"><code class="sql plain">DEPTNO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NONE</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="sql plain">8 </code><code class="sql keyword">rows</code> <code class="sql plain">selected.</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="sql plain">SQL&gt; var N1 number;</code></div><div class="line number17 index16 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">exec</code> <code class="sql plain">:N1 := 100;</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="sql plain">PL/SQL </code><code class="sql keyword">procedure</code> <code class="sql plain">successfully completed.</code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql comments">/*+ BIND_AWARE */</code> <code class="sql color2">sum</code><code class="sql plain">(sal) </code><code class="sql keyword">from</code> <code class="sql plain">emp </code><code class="sql keyword">where</code> <code class="sql plain">deptno &lt; :N1;</code></div><div class="line number22 index21 alt1">&nbsp;</div><div class="line number23 index22 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql color2">SUM</code><code class="sql plain">(SAL)</code></div><div class="line number24 index23 alt1"><code class="sql comments">----------</code></div><div class="line number25 index24 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">29025</code></div><div class="line number26 index25 alt1">&nbsp;</div><div class="line number27 index26 alt2"><code class="sql plain">1 row selected.</code></div><div class="line number28 index27 alt1">&nbsp;</div><div class="line number29 index28 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">SELECT</code> <code class="sql plain">* </code><code class="sql keyword">FROM</code> <code class="sql keyword">TABLE</code><code class="sql plain">(dbms_xplan.display_cursor());</code></div><div class="line number30 index29 alt1">&nbsp;</div><div class="line number31 index30 alt2"><code class="sql plain">PLAN_TABLE_OUTPUT</code></div><div class="line number32 index31 alt1"><code class="sql comments">-------------------------------------</code></div><div class="line number33 index32 alt2">&nbsp;</div><div class="line number34 index33 alt1"><code class="sql plain">SQL_ID&nbsp; 6arhfvzs91gv8, child number 0</code></div><div class="line number35 index34 alt2"><code class="sql comments">-------------------------------------</code></div><div class="line number36 index35 alt1"><code class="sql plain">...</code></div><div class="line number37 index36 alt2">&nbsp;</div><div class="line number38 index37 alt1"><code class="sql plain">SQL&gt; </code><code class="sql keyword">exec</code> <code class="sql plain">:N1 := 1;</code></div><div class="line number39 index38 alt2">&nbsp;</div><div class="line number40 index39 alt1"><code class="sql plain">PL/SQL </code><code class="sql keyword">procedure</code> <code class="sql plain">successfully completed.</code></div><div class="line number41 index40 alt2">&nbsp;</div><div class="line number42 index41 alt1"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql comments">/*+ BIND_AWARE */</code> <code class="sql color2">sum</code><code class="sql plain">(sal) </code><code class="sql keyword">from</code> <code class="sql plain">emp </code><code class="sql keyword">where</code> <code class="sql plain">deptno &lt; :N1;</code></div><div class="line number43 index42 alt2"><code class="sql plain">...</code></div><div class="line number44 index43 alt1"><code class="sql plain">1 row selected.</code></div><div class="line number45 index44 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">SELECT</code> <code class="sql plain">* </code><code class="sql keyword">FROM</code> <code class="sql keyword">TABLE</code><code class="sql plain">(dbms_xplan.display_cursor()); </code><code class="sql comments">-- при повторном выполнении запроса с отличными значениями переменной</code></div><div class="line number46 index45 alt1">&nbsp;</div><div class="line number47 index46 alt2"><code class="sql plain">PLAN_TABLE_OUTPUT</code></div><div class="line number48 index47 alt1"><code class="sql comments">-------------------------------------</code></div><div class="line number49 index48 alt2">&nbsp;</div><div class="line number50 index49 alt1"><code class="sql plain">SQL_ID&nbsp; 6arhfvzs91gv8, child number 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql comments">-- сгенерирован новый курсор</code></div><div class="line number51 index50 alt2"><code class="sql comments">-------------------------------------</code></div><div class="line number52 index51 alt1"><code class="sql plain">...</code></div><div class="line number53 index52 alt2">&nbsp;</div><div class="line number54 index53 alt1"><code class="sql plain">SQL&gt; @shared_cu 6arhfvzs91gv8</code></div><div class="line number55 index54 alt2">&nbsp;</div><div class="line number56 index55 alt1"><code class="sql plain">SQL_ID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CHILD USE_FEEDBACK_STATS OPTIMIZER_STATS&nbsp; BIND_EQ_FAILURE&nbsp; REASON</code></div><div class="line number57 index56 alt2"><code class="sql comments">------------- ------ ------------------ ---------------- ---------------- --------------------</code></div><div class="line number58 index57 alt1"><code class="sql plain">6arhfvzs91gv8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0 N&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; N&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; N&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Bind mismatch(33)&nbsp; |</code></div><div class="line number59 index58 alt2"><code class="sql plain">6arhfvzs91gv8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 N&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; N&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Y</code></div></div></td></tr></tbody></table></div></div>
<p style="padding-left:30px;"><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;doctype=PATCH&amp;id=9532657.8">Bug 9532657</a></p>
<p style="padding-left:30px;"><a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/2011/11/14/bind-aware-cursor-sharing-cardinality-feedback-elements/" rel="bookmark">Элементы технологий Bind Aware Cursor Sharing / Cardinality Feedback</a></p>
<p style="padding-left:30px;"><a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/How%20do%20I%20force%20a%20query%20to%20use%20bind-aware%20cursor%20sharing?">Oracle Optimizer Blog: How do I force a query to use bind-aware cursor sharing?</a></p>
<h5><a id="NO_BIND_AWARE"></a>/*+ NO_BIND_AWARE*/</h5>
<p style="padding-left:30px;">Отключает применение технологии <strong>Extended Cursor Sharing</strong> (и, как следствие, <strong>Adaptive Cursor Sharing</strong> за отсутствием необходимости) на уровне запроса</p>
<h4>Прочее</h4>
<h5><a id="QB_NAME"></a>/*+ QB_NAME(query_block_name) */</h5>
<p style="padding-left:30px;">Добавлен с Oracle 10g Используется для точного внешнего определения названия блока запроса</p>
<pre style="padding-left:60px;font-size:medium;">SQL&gt; SELECT /*+ QB_NAME(qb) FULL(@qb e) */ employee_id, last_name
 FROM employees e
 WHERE last_name = 'Smith';</pre>
<p style="padding-left:30px;">Название блока запроса (<em>queryblock identifier</em>) может быть либо сгенерировано Oracle, либо определено пользователем с помощью подсказки QB_NAME. Сгенерированное Oracle название блока запроса можно найти в выводе команды EXPLAIN PLAN</p>
<pre style="padding-left:60px;font-size:medium;">SQL&gt; explain plan for select count(*) from emp
2  where deptno in (select deptno from dept
3  where length(loc) &gt; 2);
SQL&gt; SELECT PLAN_TABLE_OUTPUT FROM
2  TABLE(DBMS_XPLAN.DISPLAY(NULL, NULL, 'ALL'));
...
<strong>Query Block Name</strong> / Object Alias (identified by operation id):
-------------------------------------------------------------
1 - <strong>SEL$5DA710D3</strong>
3 - SEL$5DA710D3 / DEPT@SEL$2
4 - SEL$5DA710D3 / DEPT@SEL$2
6 - SEL$5DA710D3 / EMP@SEL$1
...</pre>
<p style="padding-left:30px;">, или c помощью запроса актуального плана выполненияк из обзора v$sql_plan (QBLOCK_NAME)</p>
<pre style="padding-left:30px;font-size:medium;">SQL&gt; SELECT
lpad(' ',2*level)||pt.operation||' '||pt.options||' '||pt.object_name "QPlan"
, pt.cost
, pt.cardinality
, pt.bytes
, pt.cpu_cost
, pt.io_cost
, pt.temp_space
, pt.access_predicates
, pt.filter_predicates
, <strong>pt.QBLOCK_NAME</strong>
 FROM (select * from v$sql_plan
       where sql_id = '1234567890'
       and child_number = 0) pt
CONNECT BY PRIOR pt.id = pt.parent_id
 START WITH pt.id = 0</pre>
<h5><a id="GATHER_PLAN_STATISTICS"></a>/*+ GATHER_PLAN_STATISTICS */</h5>
<p style="padding-left:30px;">Используется для сбора [расширенной] статистики выполнения запроса в соответствии с планом выполнения (или просто статистики плана выполнения запроса). Действует аналогично установке значения параметра <em>statistics_level = ALL</em> (или <em>_rowsource_execution_statistics = TRUE</em>) на уровне сессии или системы. Данные по статистике плана выполнения при этом сохраняется в обзоре <a title="Jonathan Lewis blog" href="http://jonathanlewis.wordpress.com/2006/11/09/dbms_xplan-in-10g/" target="_blank">v$sql_plan_statistics_all</a></p>
<p style="padding-left:30px;"><a title="Metalink" href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=235530.1" target="_blank">Methods for Obtaining a Formatted Explain Plan [ID 235530.1]</a></p>
<p style="padding-left:30px;"><a title="Metalink" href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=465398.1" target="_blank">How to Display All Loaded Execution Plan for a specific sql_id [ID 465398.1]</a></p>
<p style="padding-left:30px;">Пример применения:</p>
<pre style="padding-left:60px;font-size:medium;">SQL&gt; set linesize 150
SQL&gt; set pagesize 2000
<a href="http://perumal.org/dbms_xplandisplay_cursor-results-in-error-cannot-fetch-plan-for-sql_id-9babjv8yq8ru3-child_number-0/" target="_self">SQL&gt; set serveroutput OFF</a>
SQL&gt; select /*+ gather_plan_statistics */ count(*) from emp;
SQL&gt; select * from TABLE(dbms_xplan.display_cursor('','','ALLSTATS LAST'));
PLAN_TABLE_OUTPUT
----------------------------------------------------------------------------------------------------
SQL_ID  9jjm288hx7buz, child number 2
-------------------------------------
select /*+ gather_plan_statistics */ count(*) from emp
Plan hash value: 2937609675
-------------------------------------------------------------------------------------------------------------
| Id | Operation        | Name   | Starts | E-Rows | Cost (%CPU)| E-Time   | A-Rows |   A-Time   |Buffers |
-------------------------------------------------------------------------------------------------------------
|   1|  SORT AGGREGATE  |        |      1 |      1 |            |          |      1 |00:00:00.01 |  1 |
|   2|   INDEX FULL SCAN| PK_EMP |      1 |     14 |     1   (0)| 00:00:01 |     14 |00:00:00.01 |  1 |
-------------------------------------------------------------------------------------------------------------
...</pre>
<p style="padding-left:30px;">Команда <strong>set serveroutput OFF</strong> выполняется на случай, если <strong>serveroutput</strong> был включен в сессии, т.к. в этом случае получим:</p>
<pre style="padding-left:60px;font-size:medium;">SQL&gt; show serveroutput
serveroutput ON SIZE UNLIMITED FORMAT WORD_WRAPPED
SQL&gt; select /*+ gather_plan_statistics */ count(*) from emp;
SQL&gt; select * from TABLE(dbms_xplan.display_cursor('','','ALLSTATS LAST'));

PLAN_TABLE_OUTPUT
--------------------------------------------------------------------------------
SQL_ID  9babjv8yq8ru3, child number 0

BEGIN DBMS_OUTPUT.GET_LINES(:LINES, :NUMLINES); END;

NOTE: cannot fetch plan for SQL_ID: 9babjv8yq8ru3, CHILD_NUMBER: 0
 Please verify value of SQL_ID and CHILD_NUMBER;
 It could also be that the plan is no longer in cursor cache (check v$sql_plan)</pre>
<p style="padding-left:30px;">т.е. последним в сессии SQL*PLUS будет PL/SQL блок DBMS_OUTPUT, который и будет пытаться обработать функция dbms_xplan.display_cursor(»,»,’…’) при запуске с NULL-левыми параметрами <em>sql_id</em> и <em>child_number</em>.</p>
<p style="padding-left:30px;">В случае, если запрос с подсказкой <strong>GATHER_PLAN_STATISTICS</strong> выполнялся не последним, статистику плана выполнения можно получить запросом по обзору <em>v$sql</em> (предварительно снабдив запрос оригинальным комментарием MY_QUERY_TAG для облегчения дальнейшего поиска):</p>
<pre style="padding-left:60px;font-size:medium;">select t.* from v$sql s,
table(dbms_xplan.display_cursor(s.sql_id,s.child_number,'ALL ALLSTATS LAST')) t
where s.sql_text like '%select /*+ gather_plan_statistics MY_QUERY_TAG*/ count(*)%';</pre>
<p><a title="https://iusoltsev.wordpress.com/" href="https://iusoltsev.wordpress.com/dbms_xplan/" target="_self">Описание третьего параметра (формат) и вывода функции dbms_xplan.display_cursor</a></p>
<h5><a id="OPT_PARAM"></a>/*+ OPT_PARAM(parameter_name [,] parameter_value) */</h5>
<p style="padding-left:30px;">добавлен начиная с 10g R2, согласно <a title="http://download.oracle.com/docs/" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e17118/sql_elements006.htm#SQLRF51119">документации 11g R2</a> «… позволяет установить инициализационные параметры [оптимизатора] на время выполнения запроса..:</p>
<p style="padding-left:60px;"><a title="https://iusoltsev.wordpress.com/" href="https://iusoltsev.wordpress.com/home/individual-sql-and-cbo/oracle-parameters/#optimizer_dynamic_sampling" target="_self">OPTIMIZER_DYNAMIC_SAMPLING</a></p>
<p style="padding-left:60px;"><a title="https://iusoltsev.wordpress.com/" href="https://iusoltsev.wordpress.com/home/individual-sql-and-cbo/oracle-parameters/#optimizer_index_caching" target="_self">OPTIMIZER_INDEX_CACHING</a></p>
<p style="padding-left:60px;"><a title="https://iusoltsev.wordpress.com/" href="https://iusoltsev.wordpress.com/home/individual-sql-and-cbo/oracle-parameters/#optimizer_index_cost_adj" target="_self">OPTIMIZER_INDEX_COST_ADJ</a></p>
<p style="padding-left:60px;">OPTIMIZER_SECURE_VIEW_MERGING</p>
<p style="padding-left:60px;">STAR_TRANSFORMATION_ENABLED</p>
<p style="padding-left:30px;">В документе поддержки <a title="https://support.oracle.com/" href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;doctype=HOWTO&amp;id=377333.1">OPT_PARAM Hint [ID 377333.1]</a> в примере применения дополнительно указываются след.параметры оптимизатора, доступные для корректировки на время запроса</p>
<pre style="padding-left:60px;font-size:medium;">/*+ OPT_PARAM('_always_semi_join'         'off')
    OPT_PARAM('_b_tree_bitmap_plans'      'false')
    OPT_PARAM('query_rewrite_enabled'     'false')
    OPT_PARAM('_new_initial_join_orders'  'false')
    OPT_PARAM('optimizer_dynamic_sampling' 3)
    OPT_PARAM('optimizer_index_cost_adj'   10)
    OPT_PARAM('optimizer_index_caching'    50)*/</pre>
<p style="padding-left:30px;">там же ссылаются на, к сожалению, недоступный документ <span style="text-decoration:underline;"><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=986618.1">Note:986618.1</a> Parameters useable by OPT_PARAM hint</span> с полным перечнем параметров</p>
<p style="padding-left:30px;">Также доступно изменение след.параметров оптимизатора:</p>
<pre style="padding-left:60px;font-size:medium;">--+ opt_param( '_optimizer_max_permutations' 20 )</pre>
<p style="padding-left:30px;">— для уменьшения времени разбора SQL (в случае длительного времени разбора запроса — <em>long parse time</em>, например, при большом кол-ве таблиц, используемых в запросе — от 10), доступно начиная с 10.2.0.4 по крайней мере. В трейсе 10053 при этом можно видеть:</p>
<pre style="padding-left:120px;font-size:medium;">  *************************************
  PARAMETERS WITH DEFAULT VALUES
  ******************************
...
  _optimizer_max_permutations         = 2000
...
***************************************
  PARAMETERS IN OPT_PARAM HINT
****************************
  _optimizer_max_permutations         = 20
***************************************</pre>
<pre style="padding-left:60px;font-size:medium;">--+ opt_param( 'optimizer_features_enable' '11.1.0.7' )</pre>
<p style="padding-left:30px;">— изменения параметра <a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/oracle-parameters/#optimizer_features_enable">optimizer_features_enable</a> на уровне запроса</p>
<p style="padding-left:30px;">При получении ошибок, причиной которых являются баги в реализации <strong>Cost-Based Join Predicate Push<em>:</em></strong></p>
<pre style="padding-left:90px;font-size:medium;">SQL&gt; select
...
                      *
ERROR at line 15:
ORA-00600: internal error code, arguments: [kkocxj : pjpCtx], [], [], [], [], [], [], []</pre>
<p style="padding-left:30px;">рекомендованный (<a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=9671977.8">Bug 9671977 — ORA-600 [kkocxj : pjpCtx] optimizing query with outer joins if JPPD is attempted [ID 9671977.8]</a>) для отключения проблемной фичи параметр можно установить на уровне запроса:</p>
<pre style="padding-left:90px;font-size:medium;">SQL&gt; select /*+ opt_param('_optimizer_push_pred_cost_based' 'false') */ ...</pre>
<p style="padding-left:30px;">Тот же параметр помогает при ORA-600 [qctopn1], Oracle 10.2.0.3 (<a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;doctype=PATCH&amp;id=5163554.8">Bug 5163554 — OERI[qctopn1] during join predicate pushdown [ID 5163554.8]</a>):</p>
<pre style="padding-left:90px;font-size:medium;">SQL&gt; SELECT
...
 41  /
  FROM SOME_USER_VIEW V,
       *
ERROR at line 10:
ORA-00600: internal error code, arguments: [qctopn1], [], [], [], [], [], [], []

SQL&gt; SELECT--+ opt_param('_optimizer_push_pred_cost_based' 'false')
...
 42  /

... rows selected</pre>
<p style="padding-left:30px;">Включение / отключение конкретного <strong>_fix_control</strong></p>
<p style="padding-left:30px;">Например, попробовать отключить механизм <strong>cardinality feedback</strong> через отключение <strong>_fix_control</strong>=6699059:</p>
<pre style="padding-left:60px;font-size:medium;">11.2@SQL&gt; select bugno, description, optimizer_feature_enable, value, is_default from v$session_fix_control where bugno = 6699059;

  BUGNO DESCRIPTION                                       OPTIMIZER_FEATURE_ENABLE  VALUE IS_DEFAULT
------- ------------------------------------------------- ------------------------- ----- ----------
6699059 enable cardinality feedback-based cursor sharing  11.2.0.1                      1          1</pre>
<p style="padding-left:30px;">на уровне запроса можно так:</p>
<pre style="padding-left:60px;font-size:medium;">SQL&gt; select /*+ OPT_PARAM('_fix_control' '6699059:0')*/...</pre>
<h5><a id="OPTIMIZER_FEATURES_ENABLE"></a>/*+ OPTIMIZER_FEATURES_ENABLE(‘NN.N.N.N’) */</h5>
<p style="padding-left:30px;">подсказка для уточнения/ограничения действия опций оптимизатора (<strong>optimizer features</strong>) в зависимости от версии Oracle на уровне запроса</p>
<p style="padding-left:30px;">полезна при обновлениях для получения ожидаемого плана выполнения запроса</p>
<p style="padding-left:30px;">значения версии (‘NN.N.N.N’) соответствуют значениям параметра <a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/oracle-parameters/#optimizer_features_enable">OPTIMIZER_FEATURES_ENABLE</a></p>
<p style="padding-left:30px;">Пример:</p>
<div><div id="highlighter_472748" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">11.2.0.1.ORCL112@SCOTT SQL&gt; </code><code class="sql keyword">select</code> <code class="sql comments">--+ OPTIMIZER_FEATURES_ENABLE('9.2.0')</code></div><div class="line number2 index1 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">2&nbsp;&nbsp; *</code></div><div class="line number3 index2 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">3&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">emp e</code></div><div class="line number4 index3 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">4&nbsp;&nbsp;&nbsp; natural </code><code class="sql color1">join</code> <code class="sql plain">dept d</code></div><div class="line number5 index4 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">5&nbsp;&nbsp; </code><code class="sql keyword">order</code> <code class="sql keyword">by</code> <code class="sql plain">e.ename</code></div><div class="line number6 index5 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">6&nbsp; /</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="sql comments">------------------------------------------------------------</code></div><div class="line number9 index8 alt2"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code> <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost&nbsp; |</code></div><div class="line number10 index9 alt1"><code class="sql comments">------------------------------------------------------------</code></div><div class="line number11 index10 alt2"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp; 826 |&nbsp;&nbsp;&nbsp; 15 |</code></div><div class="line number12 index11 alt1"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; SORT </code><code class="sql keyword">ORDER</code> <code class="sql keyword">BY</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp; 826 |&nbsp;&nbsp;&nbsp; 15 |</code></div><div class="line number13 index12 alt2"><code class="sql plain">|*&nbsp; 2 |&nbsp;&nbsp; HASH </code><code class="sql color1">JOIN</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp; 826 |&nbsp;&nbsp;&nbsp;&nbsp; 5 | </code><code class="sql comments">-- используется HASH JOIN</code></div><div class="line number14 index13 alt1"><code class="sql plain">|&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code><code class="sql plain">| DEPT |&nbsp;&nbsp;&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp; 80 |&nbsp;&nbsp;&nbsp;&nbsp; 2 |</code></div><div class="line number15 index14 alt2"><code class="sql plain">|&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code><code class="sql plain">| EMP&nbsp; |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp; 546 |&nbsp;&nbsp;&nbsp;&nbsp; 2 |</code></div><div class="line number16 index15 alt1"><code class="sql comments">------------------------------------------------------------</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="sql plain">Predicate Information (identified </code><code class="sql keyword">by</code> <code class="sql plain">operation id):</code></div><div class="line number19 index18 alt2"><code class="sql comments">---------------------------------------------------</code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">2 - access(</code><code class="sql string">"E"</code><code class="sql plain">.</code><code class="sql string">"DEPTNO"</code><code class="sql plain">=</code><code class="sql string">"D"</code><code class="sql plain">.</code><code class="sql string">"DEPTNO"</code><code class="sql plain">)</code></div><div class="line number22 index21 alt1">&nbsp;</div><div class="line number23 index22 alt2"><code class="sql plain">Note</code></div><div class="line number24 index23 alt1"><code class="sql comments">-----</code></div><div class="line number25 index24 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">- cpu costing </code><code class="sql keyword">is</code> <code class="sql keyword">off</code> <code class="sql plain">(consider enabling it)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql comments">-- ресурс ЦПУ не учитывается при расчёте стоимости</code></div><div class="line number26 index25 alt1">&nbsp;</div><div class="line number27 index26 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql comments">--+ OPTIMIZER_FEATURES_ENABLE('11.2.0.1')</code></div><div class="line number28 index27 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">2&nbsp;&nbsp; *</code></div><div class="line number29 index28 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">3&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">emp e</code></div><div class="line number30 index29 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">4&nbsp;&nbsp;&nbsp; natural </code><code class="sql color1">join</code> <code class="sql plain">dept d</code></div><div class="line number31 index30 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">5&nbsp;&nbsp; </code><code class="sql keyword">order</code> <code class="sql keyword">by</code> <code class="sql plain">e.ename</code></div><div class="line number32 index31 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">6&nbsp; /</code></div><div class="line number33 index32 alt2">&nbsp;</div><div class="line number34 index33 alt1"><code class="sql comments">-----------------------------------------------------------------------------------------</code></div><div class="line number35 index34 alt2"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code>&nbsp;&nbsp;&nbsp; <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number36 index35 alt1"><code class="sql comments">-----------------------------------------------------------------------------------------</code></div><div class="line number37 index36 alt2"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp; 826 |&nbsp;&nbsp;&nbsp;&nbsp; 7&nbsp; (29)| 00:00:01 |</code></div><div class="line number38 index37 alt1"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; SORT </code><code class="sql keyword">ORDER</code> <code class="sql keyword">BY</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp; 826 |&nbsp;&nbsp;&nbsp;&nbsp; 7&nbsp; (29)| 00:00:01 |</code></div><div class="line number39 index38 alt2"><code class="sql plain">|&nbsp;&nbsp; 2 |&nbsp;&nbsp; MERGE </code><code class="sql color1">JOIN</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp; 826 |&nbsp;&nbsp;&nbsp;&nbsp; 6&nbsp; (17)| 00:00:01 | </code><code class="sql comments">-- для 11.2 с учётом стоимости ЦПУ выбирается MERGE JOIN</code></div><div class="line number40 index39 alt1"><code class="sql plain">|&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">BY</code> <code class="sql keyword">INDEX</code> <code class="sql plain">ROWID| DEPT&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp; 80 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number41 index40 alt2"><code class="sql plain">|&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">INDEX</code> <code class="sql keyword">FULL</code> <code class="sql plain">SCAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | PK_DEPT |&nbsp;&nbsp;&nbsp;&nbsp; 4 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number42 index41 alt1"><code class="sql plain">|*&nbsp; 5 |&nbsp;&nbsp;&nbsp; SORT </code><code class="sql color1">JOIN</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp; 546 |&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp; (25)| 00:00:01 |</code></div><div class="line number43 index42 alt2"><code class="sql plain">|&nbsp;&nbsp; 6 |&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">| EMP&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp; 546 |&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number44 index43 alt1"><code class="sql comments">-----------------------------------------------------------------------------------------</code></div><div class="line number45 index44 alt2">&nbsp;</div><div class="line number46 index45 alt1"><code class="sql plain">Predicate Information (identified </code><code class="sql keyword">by</code> <code class="sql plain">operation id):</code></div><div class="line number47 index46 alt2"><code class="sql comments">---------------------------------------------------</code></div><div class="line number48 index47 alt1">&nbsp;</div><div class="line number49 index48 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">5 - access(</code><code class="sql string">"E"</code><code class="sql plain">.</code><code class="sql string">"DEPTNO"</code><code class="sql plain">=</code><code class="sql string">"D"</code><code class="sql plain">.</code><code class="sql string">"DEPTNO"</code><code class="sql plain">)</code></div><div class="line number50 index49 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">filter(</code><code class="sql string">"E"</code><code class="sql plain">.</code><code class="sql string">"DEPTNO"</code><code class="sql plain">=</code><code class="sql string">"D"</code><code class="sql plain">.</code><code class="sql string">"DEPTNO"</code><code class="sql plain">)</code></div></div></td></tr></tbody></table></div></div>
<h5><a id="APPEND"></a>/*+ APPEND */</h5>
<h5>/*+ NOAPPEND*/</h5>
<p style="padding-left:30px;">«Подсказка APPEND форсирует использование оптимизатором <strong>direct-path INSERT</strong> в запросах вида INSERT INTO… SELECT …</p>
<blockquote>
<ul style="padding-left:30px;">
<li>Традиционный (<strong>conventional</strong>) метод вставки в таблицу используется по умолчанию (без хинтов) в режиме непараллельной вставки. В этом режиме <strong>direct path INSERT</strong> может быть использован только при использовании подсказки APPEND.</li>
<li><strong>Direct-path INSERT</strong> используется по умолчанию в <a title="docs.oracle.com" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e17120/tables004.htm#ADMIN13321">режиме параллельной вставки</a> [работает при выполнении след.условий:</li>
</ul>
</blockquote>
<blockquote>
<blockquote>
<ol>
<li>
<blockquote><p>Oracle Enterprise Edition</p></blockquote>
</li>
<li>
<blockquote><p>ALTER SESSION { ENABLE | FORCE } PARALLEL DML;</p></blockquote>
</li>
<li>
<blockquote><p>установленный признак параллельности (USER_TABLES.DEGREE) для целевой таблицы на этапе создания/модификации (CREATE|ALTER TABLE…PARALLEL n)</p></blockquote>
</li>
</ol>
<blockquote style="padding-left:30px;"><p>или подсказкой PARALLEL во время выполнения DML</p></blockquote>
<blockquote style="padding-left:30px;"><p>или параметером <em>PARALLEL_DEGREE_POLICY</em> = AUTO (11.2+)]</p></blockquote>
</blockquote>
</blockquote>
<blockquote style="padding-left:30px;"><p>В этом случае традиционный (<em>conventional</em>) метод вставки строк в таблицу будет применяться только при использовании подсказки NOAPPEND.</p></blockquote>
<p style="padding-left:30px;">… При использовании <strong>direct-path INSERT</strong>, данные добавляются в конец таблицы [добавляя новые блоки и повышая <strong>High Water Mark</strong> (<strong>HWM</strong>)], вместо того, чтобы использовать свободное место в уже выделенных блоках таблицы. В результате <strong>direct-path INSERT</strong> может быть значительно быстрее традиционной (<strong>conventional</strong>) операции вставки»</p>
<p style="padding-left:30px;">Особенности использования подсказки APPEND в запросах вида INSERT INTO … VALUES, см. <a title="https://support.oracle.com/" href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;doctype=PROBLEM&amp;id=842374.1">APPEND Hint (Direct-Path) Insert with Values Causes Excessive Space Usage on 11G [ID 842374.1]</a>:</p>
<p style="padding-left:30px;">1. В версиях 10g, 10g R2, подсказка APPEND игнорируется</p>
<p style="padding-left:30px;">2. В 11g R1, хинт APPEND запускает режим <em>direct-path insert</em> даже в случае использования INSERT INTO … VALUES. Поведение аналогично использованию подсказки APPEND_VALUES в версиях, начиная с 11g R2.</p>
<p style="padding-left:30px;">3. Начиная с версии 11g R2, появляется новая подсказка APPEND_VALUES, позволяя т.о использовать механизм <em>direct path load</em> только в случае использования APPEND_VALUES. Подсказка APPEND игнорируется для предложений типа INSERT … VALUES…</p>
<p style="padding-left:30px;">Рекомендуется использовать хинт APPEND (режим прямой вставки) для загрузки больших объёмов данных, а не для вставки одиночных строк, т.к. в последнем случае не будет получено преимуществ</p>
<p style="padding-left:30px;">В версии 11.1 при включении режима <strong>direct-path insert</strong> в запросах типа INSERT /*+ APPEND*/ INTO … VALUES в PL/SQL конструкциях FORALL … SAVE EXCEPTIONS встречается <a title="https://support.oracle.com/" href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=BUG&amp;id=7688258&amp;productFamily=Oracle">Bug 7688258: ORA-38910 USING APPEND HINT WITH FORALL IN 11.1.0.6</a>, где для отключения режима <strong>direct-path insert</strong> предлагается использовать параметр:</p>
<pre style="padding-left:60px;font-size:medium;">alter session set "_direct_path_insert_features"=1;</pre>
<p style="padding-left:30px;">[После установки параметра] подсказка APPEND во всех запросах типа <em>insert /*+ append */…values…</em> будет игнорироваться в рамках сессии … аналогично поведению в версиях Oracle до 11g, где этот хинт игнорируется и в запросах <em>insert …values </em> always всегда используется традиционный (conventional) режим вставки независимо от наличия хинта»</p>
<p style="padding-left:30px;"><a href="http://docs.oracle.com/cd/E11882_01/server.112/e17120/tables004.htm#ADMIN11655">Документация о блокировках при операциях <strong>direct-path insert</strong></a>:</p>
<p style="padding-left:30px;">В течении <strong>direct-path INSERT</strong>, бд устанавливает исключительную блокировку [<strong>TM lock mode 6 (eXclusive)</strong>] на таблицу (либо на все партиции таблицы). В результате пользователи не могут выполнять никаких конкурентных операций insert, update, или delete на таблице, также невозможны операции создания и построения индексов [при конкурентных DML сессии будут ожидать<strong> enq: TM — contention</strong> для установки блокировки <strong>TM lock</strong> в режиме (mode) 3 — <strong>row-X (SX) Row Exclusive — SubExclusive</strong>]</p>
<p style="padding-left:30px;"><a title="Постоянная ссылка: Операции LOAD TABLE CONVENTIONAL / LOAD AS SELECT: direct-path и другие способы вставки в 11.2" href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/2012/06/02/%d0%be%d0%bf%d0%b5%d1%80%d0%b0%d1%86%d0%b8%d0%b8-load-table-conventional-load-as-select-direct-path-%d0%b8-%d0%b4%d1%80%d1%83%d0%b3%d0%b8%d0%b5-%d1%81%d0%bf%d0%be%d1%81%d0%be%d0%b1%d1%8b-%d0%b2/" rel="bookmark">Операции LOAD TABLE CONVENTIONAL / LOAD AS SELECT: direct-path и другие способы вставки в 11.2</a></p>
<h5><a id="APPEND_VALUES"></a>/*+ APPEND_VALUES */</h5>
<p style="padding-left:30px;">Подсказка APPEND_VALUES форсирует использование оптимизатором режима прямой вставки <strong>direct-path INSERT</strong> [только] в запросах вида <strong>INSERT INTO… VALUES<em> …</em></strong>, доступна с версии 11.2</p>
<h5><a id="PARALLEL"></a>/*+ PARALLEL */</h5>
<p style="padding-left:30px;"><a href="https://iusoltsev.wordpress.com/2011/10/30/hint-parallel/">Подсказка parallel</a></p>
<p style="padding-left:30px;"><a title="Постоянная ссылка: Подсказка PARALLEL в тексте обзора" href="https://iusoltsev.wordpress.com/2013/09/24/hint-parallel-in-view-source/" rel="bookmark">Подсказка PARALLEL в тексте обзора</a></p>
<h5><a id="SHARED"></a>/*+ SHARED */</h5>
<p style="padding-left:30px;">Синоним подсказки <strong>PARALLEL</strong>, обычно используемый Oracle для управления параллельным выполнением подзапроса на дальней стороне <strong>db link</strong></p>
<p style="padding-left:30px;">Работает также локально:</p>
<div><div id="highlighter_431543" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">SELECT</code> <code class="sql comments">/*+ SHARED (AUTO) OPT_ESTIMATE (TABLE "D" ROWS=2000.000000 ) */</code> <code class="sql plain">* </code><code class="sql keyword">FROM</code> <code class="sql plain">dual d;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="sql plain">D</code></div><div class="line number4 index3 alt1"><code class="sql plain">-</code></div><div class="line number5 index4 alt2"><code class="sql plain">X</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="sql plain">1 row selected.</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="sql comments">--------------------------------------------------------------------------------------------------------------</code></div><div class="line number10 index9 alt1"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp; TQ&nbsp; |</code><code class="sql color1">IN</code><code class="sql plain">-</code><code class="sql keyword">OUT</code><code class="sql plain">| PQ Distrib |</code></div><div class="line number11 index10 alt2"><code class="sql comments">--------------------------------------------------------------------------------------------------------------</code></div><div class="line number12 index11 alt1"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 2 (100)|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number13 index12 alt2"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; PX COORDINATOR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number14 index13 alt1"><code class="sql plain">|&nbsp;&nbsp; 2 |&nbsp;&nbsp; PX SEND QC (RANDOM)| :TQ10000 |&nbsp; 2000 |&nbsp; 4000 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |&nbsp; Q1,00 | P-&gt;S | QC (RAND)&nbsp; |</code></div><div class="line number15 index14 alt2"><code class="sql plain">|&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; PX BLOCK ITERATOR |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp; 2000 |&nbsp; 4000 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |&nbsp; Q1,00 | PCWC |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number16 index15 alt1"><code class="sql plain">|*&nbsp; 4 |&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code><code class="sql plain">| DUAL&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp; 2000 |&nbsp; 4000 |&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp; (0)| 00:00:01 |&nbsp; Q1,00 | PCWP |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number17 index16 alt2"><code class="sql comments">--------------------------------------------------------------------------------------------------------------</code></div></div></td></tr></tbody></table></div></div>
<h5><a id="RESULT_CACHE"></a>/*+ RESULT_CACHE*/<br>
/*+ NO_RESULT_CACHE*/</h5>
<p style="padding-left:30px;">Ручное управление кэшированием результатов запросов (или частей) на стороне сервера.</p>
<p style="padding-left:30px;"><a href="http://docs.oracle.com/cd/E11882_01/server.112/e16638/memory.htm#PFGRF95099">Примеры использования</a> для <strong>inline view</strong>:</p>
<div><div id="highlighter_829031" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql keyword">SELECT</code> <code class="sql plain">*</code></div><div class="line number2 index1 alt1"><code class="sql keyword">FROM</code>&nbsp;&nbsp; <code class="sql plain">( </code><code class="sql keyword">SELECT</code> <code class="sql comments">/*+ RESULT_CACHE */</code> <code class="sql plain">department_id, manager_id, </code><code class="sql color2">count</code><code class="sql plain">(*) </code><code class="sql color2">count</code></div><div class="line number3 index2 alt2"><code class="sql keyword">FROM</code>&nbsp;&nbsp; <code class="sql plain">hr.employees</code></div><div class="line number4 index3 alt1"><code class="sql keyword">GROUP</code> <code class="sql keyword">BY</code> <code class="sql plain">department_id, manager_id ) view1</code></div><div class="line number5 index4 alt2"><code class="sql keyword">WHERE</code>&nbsp; <code class="sql plain">department_id = 30;</code></div></div></td></tr></tbody></table></div></div>
<p style="padding-left:30px;">для <strong>WITH view</strong>:</p>
<div><div id="highlighter_736584" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql keyword">WITH</code> <code class="sql plain">view2 </code><code class="sql keyword">AS</code></div><div class="line number2 index1 alt1"><code class="sql plain">( </code><code class="sql keyword">SELECT</code> <code class="sql comments">/*+ RESULT_CACHE */</code> <code class="sql plain">department_id, manager_id, </code><code class="sql color2">count</code><code class="sql plain">(*) </code><code class="sql color2">count</code></div><div class="line number3 index2 alt2"><code class="sql keyword">FROM</code> <code class="sql plain">hr.employees</code></div><div class="line number4 index3 alt1"><code class="sql keyword">GROUP</code> <code class="sql keyword">BY</code> <code class="sql plain">department_id, manager_id )</code></div><div class="line number5 index4 alt2"><code class="sql keyword">SELECT</code> <code class="sql plain">*</code></div><div class="line number6 index5 alt1"><code class="sql keyword">FROM</code>&nbsp;&nbsp; <code class="sql plain">view2</code></div><div class="line number7 index6 alt2"><code class="sql keyword">WHERE</code>&nbsp; <code class="sql color2">count</code> <code class="sql color1">BETWEEN</code> <code class="sql plain">1 </code><code class="sql color1">and</code> <code class="sql plain">5;</code></div></div></td></tr></tbody></table></div></div>
<p style="padding-left:30px;">Использовании кэша результатов подзапросов отключает операции оптимизации (трансформации, <strong>merging</strong>) между внешними и внутренними блоками запроса</p>
<p style="padding-left:30px;">Кэширование результатов запросов логично отменяет действие подсказки <strong>DRIVING_SITE</strong></p>
<p style="padding-left:30px;">Начиная с версии 12.1.0.2 поддерживется параметр <a href="http://antognini.ch/2014/09/result_cache-hint-in-12-1-0-2/"><strong>/*+ RESULT_CACHE(snapshot=10) */</strong></a>, определяющий определяет время жизни кэша, по истечении которого статус меняется <strong>Published -&gt; Expired</strong> и который добавлен, вероятно, для смягчения влияния Automatic Dynamic Statistics судя по активному применению именно в рекурсивно генерируемых запросах ADS:</p>
<div><div id="highlighter_6880" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">12.1.0.2.@ SQL&gt; </code><code class="sql keyword">select</code> <code class="sql color2">count</code><code class="sql plain">(*)</code></div><div class="line number2 index1 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">2&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">gv$sqlarea</code></div><div class="line number3 index2 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">3&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql plain">sql_text </code><code class="sql color1">like</code></div><div class="line number4 index3 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql string">'SELECT /* DS_SVC */ /*+ dynamic_sampling(%result_cache(snapshot=3600)%'</code></div><div class="line number5 index4 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">5&nbsp; /</code></div><div class="line number6 index5 alt1"><code class="sql spaces">&nbsp;</code>&nbsp;</div><div class="line number7 index6 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql color2">COUNT</code><code class="sql plain">(*)</code></div><div class="line number8 index7 alt1"><code class="sql comments">----------</code></div><div class="line number9 index8 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="sql plain">2230</code></div></div></td></tr></tbody></table></div></div>
<p style="padding-left:30px;"><a title="Постоянная ссылка: Пример применения Result Cache на стороне сервера" href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/2012/01/28/11g-result-cache/" rel="bookmark">Пример применения Result Cache на стороне сервера</a></p>
<h5><a id="STATEMENT_QUEUING"></a>/*+ STATEMENT_QUEUING*/<br>
/*+ NO_STATEMENT_QUEUING*/</h5>
<p style="padding-left:30px;">Подсказки для управления очерёдностью и способом параллельного выполнения запросов (<strong>parallel statement queuing</strong>)</p>
<p style="padding-left:30px;">Пример использования:</p>
<div><div id="highlighter_197398" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">11.2.@ SQL&gt; </code><code class="sql keyword">select</code> <code class="sql keyword">name</code><code class="sql plain">, isdefault, value</code></div><div class="line number2 index1 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">2&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">v$ses_optimizer_env</code></div><div class="line number3 index2 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">3&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql plain">sid = sys_context(</code><code class="sql string">'USERENV'</code><code class="sql plain">, </code><code class="sql string">'SID'</code><code class="sql plain">)</code></div><div class="line number4 index3 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">4&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql keyword">name</code> <code class="sql color1">like</code> <code class="sql string">'%parallel%'</code></div><div class="line number5 index4 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">5&nbsp; /</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="sql keyword">NAME</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">ISD VALUE</code></div><div class="line number8 index7 alt1"><code class="sql comments">---------------------------------------- --- -------</code></div><div class="line number9 index8 alt2"><code class="sql plain">parallel_execution_enabled&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; YES </code><code class="sql keyword">true</code></div><div class="line number10 index9 alt1"><code class="sql plain">parallel_threads_per_cpu&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; YES 2</code></div><div class="line number11 index10 alt2"><code class="sql plain">parallel_query_mode&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; YES enabled</code></div><div class="line number12 index11 alt1"><code class="sql plain">parallel_degree_policy&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; YES manual&nbsp;&nbsp; </code><code class="sql comments">-- параметры оптимизатора в ручном режиме</code></div><div class="line number13 index12 alt2"><code class="sql plain">parallel_degree&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; YES 0</code></div><div class="line number14 index13 alt1"><code class="sql plain">parallel_min_time_threshold&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; YES 10</code></div><div class="line number15 index14 alt2"><code class="sql plain">parallel_query_default_dop&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; YES 0</code></div><div class="line number16 index15 alt1"><code class="sql plain">parallel_degree_limit&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; YES 65535</code></div><div class="line number17 index16 alt2"><code class="sql plain">parallel_max_degree&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; YES 48</code></div><div class="line number18 index17 alt1"><code class="sql plain">parallel_autodop&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; YES 0</code></div><div class="line number19 index18 alt2">&nbsp;</div><div class="line number20 index19 alt1"><code class="sql plain">SQL&gt; @param parallel%servers</code></div><div class="line number21 index20 alt2">&nbsp;</div><div class="line number22 index21 alt1"><code class="sql keyword">NAME</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">VALUE&nbsp; DSC</code></div><div class="line number23 index22 alt2"><code class="sql comments">------------------------ ------ ------------------------------------------------------</code></div><div class="line number24 index23 alt1"><code class="sql plain">parallel_max_servers&nbsp;&nbsp;&nbsp;&nbsp; 50&nbsp;&nbsp;&nbsp;&nbsp; maximum parallel query servers per instance</code></div><div class="line number25 index24 alt2"><code class="sql plain">parallel_servers_target&nbsp; 50&nbsp;&nbsp;&nbsp;&nbsp; instance target </code><code class="sql color1">in</code> <code class="sql plain">terms </code><code class="sql keyword">of</code> <code class="sql plain">number </code><code class="sql keyword">of</code> <code class="sql plain">parallel servers </code><code class="sql comments">-- минимальное кол-во доступных PX процессов для немедленного запуска параллельного выполнения</code></div><div class="line number26 index25 alt1">&nbsp;</div><div class="line number27 index26 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">alter</code> <code class="sql plain">session </code><code class="sql keyword">force</code> <code class="sql plain">parallel query parallel 30; </code><code class="sql comments">-- стимулируем DOP</code></div><div class="line number28 index27 alt1">&nbsp;</div><div class="line number29 index28 alt2"><code class="sql plain">Session altered.</code></div><div class="line number30 index29 alt1">&nbsp;</div><div class="line number31 index30 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql keyword">name</code><code class="sql plain">, isdefault, value</code></div><div class="line number32 index31 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">2&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">v$ses_optimizer_env</code></div><div class="line number33 index32 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">3&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql plain">sid = sys_context(</code><code class="sql string">'USERENV'</code><code class="sql plain">, </code><code class="sql string">'SID'</code><code class="sql plain">)</code></div><div class="line number34 index33 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">4&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql keyword">name</code> <code class="sql color1">in</code> <code class="sql plain">(</code><code class="sql string">'parallel_query_forced_dop'</code><code class="sql plain">, </code><code class="sql string">'parallel_query_mode'</code><code class="sql plain">)</code></div><div class="line number35 index34 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">5&nbsp; /</code></div><div class="line number36 index35 alt1">&nbsp;</div><div class="line number37 index36 alt2"><code class="sql keyword">NAME</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">ISD VALUE</code></div><div class="line number38 index37 alt1"><code class="sql comments">---------------------------------------- --- --------</code></div><div class="line number39 index38 alt2"><code class="sql plain">parallel_query_forced_dop&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">NO</code>&nbsp; <code class="sql plain">30&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql comments">-- изменившиеся параметры</code></div><div class="line number40 index39 alt1"><code class="sql plain">parallel_query_mode&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">NO</code>&nbsp; <code class="sql plain">forced</code></div><div class="line number41 index40 alt2">&nbsp;</div><div class="line number42 index41 alt1"><code class="sql plain">SQL&gt; </code><code class="sql keyword">SELECT</code> <code class="sql plain">...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql comments">-- выполняем ресурсоёмкий параллельный запрос</code></div><div class="line number43 index42 alt2">&nbsp;</div><div class="line number44 index43 alt1"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql plain">status,</code></div><div class="line number45 index44 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sql_id,</code></div><div class="line number46 index45 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; px_maxdop,</code></div><div class="line number47 index46 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; px_servers_requested,</code></div><div class="line number48 index47 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; px_servers_allocated</code></div><div class="line number49 index48 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">6&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">v$sql_monitor m</code></div><div class="line number50 index49 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">7&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql plain">sql_id = </code><code class="sql string">'0f4bz4kpwntas'</code></div><div class="line number51 index50 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">8&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">px_maxdop </code><code class="sql keyword">is</code> <code class="sql color1">not</code> <code class="sql color1">null</code></div><div class="line number52 index51 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">9&nbsp; /</code></div><div class="line number53 index52 alt2">&nbsp;</div><div class="line number54 index53 alt1"><code class="sql plain">STATUS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SQL_ID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PX_MAXDOP PX_SERVERS_REQUESTED PX_SERVERS_ALLOCATED</code></div><div class="line number55 index54 alt2"><code class="sql comments">------------------- ------------- ---------- -------------------- --------------------</code></div><div class="line number56 index55 alt1"><code class="sql plain">EXECUTING&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0f4bz4kpwntas&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 25&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 60&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 50 </code><code class="sql comments">-- , запросил 60=30x2 [parallel sets], получил все 50 доступных (parallel_max_servers) процессов</code></div><div class="line number57 index56 alt2">&nbsp;</div><div class="line number58 index57 alt1"><code class="sql plain">SQL&gt; </code><code class="sql keyword">SELECT</code><code class="sql comments">/*+ NO_STATEMENT_QUEUING */</code> <code class="sql plain">...&nbsp; </code><code class="sql comments">-- одновременно запустим тот же ресурсоёмкий параллельный запрос</code></div><div class="line number59 index58 alt2">&nbsp;</div><div class="line number60 index59 alt1"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql plain">ss.status,</code></div><div class="line number61 index60 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ss.sql_id,</code></div><div class="line number62 index61 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ss.sql_child_number,</code></div><div class="line number63 index62 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sa.plan_hash_value,</code></div><div class="line number64 index63 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; px_maxdop,</code></div><div class="line number65 index64 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; px_servers_requested,</code></div><div class="line number66 index65 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; px_servers_allocated,</code></div><div class="line number67 index66 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; event,</code></div><div class="line number68 index67 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; seconds_in_wait</code></div><div class="line number69 index68 alt2"><code class="sql spaces">&nbsp;</code><code class="sql plain">10&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">v$session ss, v$sqlarea sa, v$sql_monitor sm</code></div><div class="line number70 index69 alt1"><code class="sql spaces">&nbsp;</code><code class="sql plain">11&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql plain">ss.sql_id = sa.sql_id</code></div><div class="line number71 index70 alt2"><code class="sql spaces">&nbsp;</code><code class="sql plain">12&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">sa.sql_text </code><code class="sql color1">like</code> <code class="sql string">'SELECT/*+ NO_STATEMENT_QUEUING */%'</code></div><div class="line number72 index71 alt1"><code class="sql spaces">&nbsp;</code><code class="sql plain">13&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">ss.sql_id = sm.sql_id</code></div><div class="line number73 index72 alt2"><code class="sql spaces">&nbsp;</code><code class="sql plain">14&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">ss.sql_exec_id = sm.sql_exec_id</code></div><div class="line number74 index73 alt1"><code class="sql spaces">&nbsp;</code><code class="sql plain">15&nbsp; /</code></div><div class="line number75 index74 alt2">&nbsp;</div><div class="line number76 index75 alt1"><code class="sql plain">STATUS&nbsp;&nbsp; SQL_ID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SQL_CHILD_NUMBER PLAN_HASH_VALUE&nbsp; PX_MAXDOP PX_SERVERS_REQUESTED PX_SERVERS_ALLOCATED EVENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SECONDS_IN_WAIT</code></div><div class="line number77 index76 alt2"><code class="sql comments">-------- ------------- ---------------- --------------- ---------- -------------------- -------------------- --------------------- ---------------</code></div><div class="line number78 index77 alt1"><code class="sql plain">ACTIVE&nbsp;&nbsp; 3yyjf9pu39q5f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3510803162&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0 db file parallel </code><code class="sql keyword">read</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">0</code></div><div class="line number79 index78 alt2">&nbsp;</div><div class="line number80 index79 alt1"><code class="sql plain">SQL&gt; </code><code class="sql comments">-- с подсказкой NO_STATEMENT_QUEUING или без подсказки запрос будет выполняться непараллельно (PX_SERVERS_ALLOCATED=0), используя параллельный план выполнения (PX_SERVERS_REQUESTED=8)</code></div><div class="line number81 index80 alt2">&nbsp;</div><div class="line number82 index81 alt1"><code class="sql plain">SQL&gt; </code><code class="sql comments">-- Если тот же запрос запустить одновременно с подсказкой STATEMENT_QUEUING:</code></div><div class="line number83 index82 alt2">&nbsp;</div><div class="line number84 index83 alt1"><code class="sql plain">SQL&gt; </code><code class="sql keyword">SELECT</code><code class="sql comments">/*+ STATEMENT_QUEUING */</code> <code class="sql plain">...</code></div><div class="line number85 index84 alt2">&nbsp;</div><div class="line number86 index85 alt1"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql plain">ss.status,</code></div><div class="line number87 index86 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ss.sql_id,</code></div><div class="line number88 index87 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ss.sql_child_number,</code></div><div class="line number89 index88 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sa.plan_hash_value,</code></div><div class="line number90 index89 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; px_maxdop,</code></div><div class="line number91 index90 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; px_servers_requested,</code></div><div class="line number92 index91 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; px_servers_allocated,</code></div><div class="line number93 index92 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; event,</code></div><div class="line number94 index93 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; seconds_in_wait</code></div><div class="line number95 index94 alt2"><code class="sql spaces">&nbsp;</code><code class="sql plain">10&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">v$session ss, v$sqlarea sa, v$sql_monitor sm</code></div><div class="line number96 index95 alt1"><code class="sql spaces">&nbsp;</code><code class="sql plain">11&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql plain">ss.sql_id = sa.sql_id</code></div><div class="line number97 index96 alt2"><code class="sql spaces">&nbsp;</code><code class="sql plain">12&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">sa.sql_text </code><code class="sql color1">like</code> <code class="sql string">'SELECT/*+ STATEMENT_QUEUING */%'</code></div><div class="line number98 index97 alt1"><code class="sql spaces">&nbsp;</code><code class="sql plain">13&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">ss.sql_id = sm.sql_id</code></div><div class="line number99 index98 alt2"><code class="sql spaces">&nbsp;</code><code class="sql plain">14&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">ss.sql_exec_id = sm.sql_exec_id</code></div><div class="line number100 index99 alt1"><code class="sql spaces">&nbsp;</code><code class="sql plain">15&nbsp; /</code></div><div class="line number101 index100 alt2">&nbsp;</div><div class="line number102 index101 alt1"><code class="sql plain">STATUS&nbsp;&nbsp; SQL_ID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SQL_CHILD_NUMBER PLAN_HASH_VALUE&nbsp; PX_MAXDOP PX_SERVERS_REQUESTED PX_SERVERS_ALLOCATED EVENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SECONDS_IN_WAIT</code></div><div class="line number103 index102 alt2"><code class="sql comments">-------- ------------- ---------------- --------------- ---------- -------------------- -------------------- ---------------- ---------------</code></div><div class="line number104 index103 alt1"><code class="sql plain">ACTIVE&nbsp;&nbsp; 7r8fah3w0mt98&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3510803162&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; resmgr:pq queued&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 18</code></div><div class="line number105 index104 alt2">&nbsp;</div><div class="line number106 index105 alt1"><code class="sql plain">SQL&gt; </code><code class="sql comments">--&nbsp; запрос, не начиная выполнения, будет ждать освобождения требуемого кол-ва PX процессов на событии resmgr:pq queued</code></div><div class="line number107 index106 alt2">&nbsp;</div><div class="line number108 index107 alt1"><code class="sql plain">SQL&gt; </code><code class="sql comments">-- Соответствующий подсказке скрытый параметр при PARALLEL_DEGREE_POLICY = MANUAL по умолчанию запрещает очерёдность запросов:</code></div><div class="line number109 index108 alt2">&nbsp;</div><div class="line number110 index109 alt1"><code class="sql plain">SQL&gt; @param_ _parallel_statement_queuing</code></div><div class="line number111 index110 alt2">&nbsp;</div><div class="line number112 index111 alt1"><code class="sql keyword">NAME</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">VALUE&nbsp; IS_DEF&nbsp;&nbsp; IS_MOD&nbsp; IS_ADJ&nbsp; DSC</code></div><div class="line number113 index112 alt2"><code class="sql comments">------------------------------- ------ -------- ------- ------- ----------------------------------</code></div><div class="line number114 index113 alt1"><code class="sql plain">_parallel_statement_queuing&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">FALSE</code>&nbsp; <code class="sql keyword">TRUE</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql keyword">FALSE</code>&nbsp;&nbsp; <code class="sql keyword">FALSE</code>&nbsp;&nbsp; <code class="sql plain">parallel statement queuing enabled</code></div><div class="line number115 index114 alt2">&nbsp;</div><div class="line number116 index115 alt1"><code class="sql plain">SQL&gt; </code><code class="sql comments">-- При повторении теста с изменённым параметром:</code></div><div class="line number117 index116 alt2">&nbsp;</div><div class="line number118 index117 alt1"><code class="sql plain">SQL&gt; </code><code class="sql keyword">alter</code> <code class="sql plain">session </code><code class="sql keyword">set</code> <code class="sql string">"_parallel_statement_queuing"</code> <code class="sql plain">= </code><code class="sql keyword">TRUE</code><code class="sql plain">;</code></div><div class="line number119 index118 alt2">&nbsp;</div><div class="line number120 index119 alt1"><code class="sql plain">Session altered.</code></div><div class="line number121 index120 alt2">&nbsp;</div><div class="line number122 index121 alt1"><code class="sql plain">SQL&gt; </code><code class="sql keyword">SELECT</code> <code class="sql plain">... </code><code class="sql comments">-- тот же параллельный запрос, запущенный в момент когда все параллельные процессы заняты</code></div><div class="line number123 index122 alt2">&nbsp;</div><div class="line number124 index123 alt1"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql plain">sql_exec_id,</code></div><div class="line number125 index124 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; status,</code></div><div class="line number126 index125 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sql_id,</code></div><div class="line number127 index126 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sql_plan_hash_value,</code></div><div class="line number128 index127 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; px_maxdop,</code></div><div class="line number129 index128 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; px_servers_requested,</code></div><div class="line number130 index129 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; px_servers_allocated</code></div><div class="line number131 index130 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">8&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">v$sql_monitor m</code></div><div class="line number132 index131 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">9&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql plain">sql_id = </code><code class="sql string">'0f4bz4kpwntas'</code></div><div class="line number133 index132 alt2"><code class="sql spaces">&nbsp;</code><code class="sql plain">10&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">process_name </code><code class="sql color1">not</code> <code class="sql color1">like</code> <code class="sql string">'p%'</code></div><div class="line number134 index133 alt1"><code class="sql spaces">&nbsp;</code><code class="sql plain">11&nbsp; /</code></div><div class="line number135 index134 alt2">&nbsp;</div><div class="line number136 index135 alt1"><code class="sql plain">SQL_EXEC_ID STATUS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SQL_ID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SQL_PLAN_HASH_VALUE&nbsp; PX_MAXDOP PX_SERVERS_REQUESTED PX_SERVERS_ALLOCATED</code></div><div class="line number137 index136 alt2"><code class="sql comments">----------- ------------------- ------------- ------------------- ---------- -------------------- --------------------</code></div><div class="line number138 index137 alt1"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">16777221 EXECUTING&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0f4bz4kpwntas&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2021910991&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 25&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 60&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 50 </code><code class="sql comments">-- выполняющийся запрос</code></div><div class="line number139 index138 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">16777222 QUEUED&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0f4bz4kpwntas&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3510803162&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql comments">-- ожидающий освобождения PX</code></div><div class="line number140 index139 alt1">&nbsp;</div><div class="line number141 index140 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql plain">status,</code></div><div class="line number142 index141 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; state,</code></div><div class="line number143 index142 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; event,</code></div><div class="line number144 index143 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; seconds_in_wait</code></div><div class="line number145 index144 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">5&nbsp;&nbsp;&nbsp; </code><code class="sql keyword">from</code> <code class="sql plain">v$session</code></div><div class="line number146 index145 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">6&nbsp;&nbsp; </code><code class="sql keyword">where</code> <code class="sql plain">sql_id = </code><code class="sql string">'0f4bz4kpwntas'</code></div><div class="line number147 index146 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">7&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="sql color1">and</code> <code class="sql plain">sql_exec_id = 16777222</code></div><div class="line number148 index147 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">8&nbsp; /</code></div><div class="line number149 index148 alt2">&nbsp;</div><div class="line number150 index149 alt1"><code class="sql plain">STATUS&nbsp;&nbsp; STATE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EVENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SECONDS_IN_WAIT</code></div><div class="line number151 index150 alt2"><code class="sql comments">-------- ------------------- ----------------- ---------------</code></div><div class="line number152 index151 alt1"><code class="sql plain">ACTIVE&nbsp;&nbsp; WAITING&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; resmgr:pq queued&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 834</code></div><div class="line number153 index152 alt2"><code class="sql comments">-- второй одновременно запущенный параллельный запрос ожидает освобождения PX процессов точно так же, как при использовании подсказки /*+ STATEMENT_QUEUING */</code></div><div class="line number154 index153 alt1"><code class="sql comments">--</code></div></div></td></tr></tbody></table></div></div>
<p style="padding-left:30px;">Использование подсказки <strong>/*+ NO_STATEMENT_QUEUING */</strong> позволяет аналогично отключить автоматическую очерёдность выполнения запросов при <strong>PARALLEL_DEGREE_POLICY = AUTO</strong></p>
<h5><a id="TABLE_STATS"></a>/*+ TABLE_STATS(Table [SCALE|NULL] [blocks|rows=Number]) */<br>
/*+ INDEX_STATS(Table Index [SCALE|NULL] [blocks|index_rows|keys|clustering_factor=Number]) */<br>
/*+ COLUMN_STATS(Table Column [SCALE|NULL] [length|distinct|nulls|min|max=Number]) */</h5>
<p style="padding-left:30px;">— подсказки точного управления статистикой объектов на уровне запроса</p>
<p>В версии 12c правила <a href="https://twitter.com/JureBratina/status/931478027464265728">применения этих хинтов изменились</a>, Саян на примере <a href="http://orasql.org/2017/11/19/adaptive-serial-direct-path-read-decision-ignores-object-statistics-since-12-1/">Adaptive serial direct path read decision</a> разбирался в причинах,</p>
<p>пример:</p>
<div><div id="highlighter_46406" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">12.1.0.2@ SQL&gt; explain plan </code><code class="sql keyword">for</code> <code class="sql keyword">select</code> <code class="sql comments">/*+ TABLE_STATS("SCOTT"."EMP", SCALE, ROWS=1000) */</code> <code class="sql plain">* </code><code class="sql keyword">from</code> <code class="sql plain">scott.emp;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="sql plain">Explained.</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql plain">* </code><code class="sql keyword">from</code> <code class="sql keyword">table</code><code class="sql plain">(dbms_xplan.display());</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="sql plain">PLAN_TABLE_OUTPUT</code></div><div class="line number8 index7 alt1"><code class="sql comments">--------------------------------------------------------------------------</code></div><div class="line number9 index8 alt2"><code class="sql plain">Plan hash value: 3956160932</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="sql comments">--------------------------------------------------------------------------</code></div><div class="line number12 index11 alt1"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code> <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number13 index12 alt2"><code class="sql comments">--------------------------------------------------------------------------</code></div><div class="line number14 index13 alt1"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp; 546 |&nbsp;&nbsp;&nbsp;&nbsp; 7&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number15 index14 alt2"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code><code class="sql plain">| EMP&nbsp; |&nbsp;&nbsp;&nbsp; 14 |&nbsp;&nbsp; 546 |&nbsp;&nbsp;&nbsp;&nbsp; 7&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number16 index15 alt1"><code class="sql comments">--------------------------------------------------------------------------</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="sql plain">SQL&gt; explain plan </code><code class="sql keyword">for</code> <code class="sql keyword">select</code> <code class="sql comments">/*+ TABLE_STATS("SCOTT"."EMP", SCALE, ROWS=1000) TABLE_STATS("SCOTT"."EMP", SCALE, ROWS=1000) */</code> <code class="sql plain">* </code><code class="sql keyword">from</code> <code class="sql plain">scott.emp;</code></div><div class="line number19 index18 alt2">&nbsp;</div><div class="line number20 index19 alt1"><code class="sql plain">Explained.</code></div><div class="line number21 index20 alt2">&nbsp;</div><div class="line number22 index21 alt1"><code class="sql plain">SQL&gt; </code><code class="sql keyword">select</code> <code class="sql plain">* </code><code class="sql keyword">from</code> <code class="sql keyword">table</code><code class="sql plain">(dbms_xplan.display());</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="sql plain">PLAN_TABLE_OUTPUT</code></div><div class="line number25 index24 alt2"><code class="sql comments">--------------------------------------------------------------------------</code></div><div class="line number26 index25 alt1"><code class="sql plain">Plan hash value: 3956160932</code></div><div class="line number27 index26 alt2">&nbsp;</div><div class="line number28 index27 alt1"><code class="sql comments">--------------------------------------------------------------------------</code></div><div class="line number29 index28 alt2"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code> <code class="sql plain">| </code><code class="sql keyword">Rows</code>&nbsp; <code class="sql plain">| Bytes | Cost (%CPU)| </code><code class="sql keyword">Time</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|</code></div><div class="line number30 index29 alt1"><code class="sql comments">--------------------------------------------------------------------------</code></div><div class="line number31 index30 alt2"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">SELECT</code> <code class="sql plain">STATEMENT&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp; 1000 | 39000 |&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number32 index31 alt1"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; </code><code class="sql keyword">TABLE</code> <code class="sql plain">ACCESS </code><code class="sql keyword">FULL</code><code class="sql plain">| EMP&nbsp; |&nbsp; 1000 | 39000 |&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp; (0)| 00:00:01 |</code></div><div class="line number33 index32 alt2"><code class="sql comments">--------------------------------------------------------------------------</code></div></div></td></tr></tbody></table></div></div>
<p>TBD</p>
			<div id="atatags-26942-63c2d21d3ce25"></div>
			
			<script>
				__ATA.cmd.push(function() {
					__ATA.initDynamicSlot({
						id: 'atatags-26942-63c2d21d3ce25',
						location: 120,
						formFactor: '001',
						label: {
							text: 'Реклама',
						},
						creative: {
							reportAd: {
								text: 'Пожаловаться на это объявление',
							},
							privacySettings: {
								text: 'Политика конфиденциальности',
								
							}
						}
					});
				});
			</script><div id="jp-post-flair" class="sharedaddy sd-like-enabled sd-sharing-enabled"><div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-icon-text sd-sharing"><h3 class="sd-title">Поделиться ссылкой:</h3><div class="sd-content"><ul data-sharing-events-added="true"><li class="share-facebook"><a rel="nofollow noopener noreferrer" data-shared="sharing-facebook-505" class="share-facebook sd-button share-icon" href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/?share=facebook&amp;nb=1" target="_blank" title="Нажмите, чтобы открыть на Facebook"><span>Facebook</span></a></li><li class="share-twitter"><a rel="nofollow noopener noreferrer" data-shared="sharing-twitter-505" class="share-twitter sd-button share-icon" href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/?share=twitter&amp;nb=1" target="_blank" title="Нажмите, чтобы поделиться на Twitter"><span>Twitter</span></a></li><li class="share-linkedin"><a rel="nofollow noopener noreferrer" data-shared="sharing-linkedin-505" class="share-linkedin sd-button share-icon" href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/?share=linkedin&amp;nb=1" target="_blank" title="Нажмите, чтобы поделиться на LinkedIn"><span>LinkedIn</span></a></li><li class="share-end"></li></ul></div></div></div><div class="sharedaddy sd-block sd-like jetpack-likes-widget-wrapper jetpack-likes-widget-loaded" id="like-post-wrapper-4124168-505-63c2d21d3ddf5" data-src="//widgets.wp.com/likes/index.html?ver=20220105#blog_id=4124168&amp;post_id=505&amp;origin=iusoltsev.wordpress.com&amp;obj_id=4124168-505-63c2d21d3ddf5" data-name="like-post-frame-4124168-505-63c2d21d3ddf5" data-title="Нравится или перепост"><h3 class="sd-title">Понравилось это:</h3><div class="likes-widget-placeholder post-likes-widget-placeholder" style="height: 55px; display: none;"><span class="button"><span>Нравится</span></span> <span class="loading">Загрузка...</span></div><iframe class="post-likes-widget jetpack-likes-widget" name="like-post-frame-4124168-505-63c2d21d3ddf5" src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/index.html" height="55px" width="100%" frameborder="0" scrolling="no" title="Нравится или перепост"></iframe><span class="sd-text-color"></span><a class="sd-link-color"></a></div></div>	</div>

	<div class="feedback">
                        <a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#comments">13 комментариев</a>	</div>

</div>


<h2 id="comments">13 комментариев	<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#postcomment" title="Оставьте комментарий">»</a>
</h2>

<ol id="commentlist">
<li class="comment even thread-even depth-1 highlander-comment" id="comment-13153">
	<div id="div-comment-13153">
		<div class="comment-author vcard">
			<img alt="" src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/5f79b7d7c9630a4fe4e1f110d99d1a74" class="avatar avatar-32 grav-hashed grav-hijack" height="32" width="32" id="grav-5f79b7d7c9630a4fe4e1f110d99d1a74-0">			<p>Щрифт для SQL-кода очень маленький. Совершенно нечитабельный. Чтобы там что-то разобрать, надо копировать его в текстовый редактор. Это так специально сделано, чтобы жизнь медом не казалась?</p>
			<p><cite>комментарий от <span class="fn">Вася</span> — 28.04.2011 @ <a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#comment-13153">14:12</a></cite> 				<span class="reply">
					 | <a rel="nofollow" class="comment-reply-link" href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/?replytocom=13153#respond" data-commentid="13153" data-postid="505" data-belowelement="div-comment-13153" data-respondelement="respond" data-replyto="Комментарий к записи Вася" aria-label="Комментарий к записи Вася">Ответить</a>				</span>
			</p>
		</div>
	</div>
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-13258">
	<div id="div-comment-13258">
		<div class="comment-author vcard">
			<img alt="" src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/saved_resource(5)" class="avatar avatar-32 grav-hashed grav-hijack" height="32" width="32" id="grav-false-0">			<p>если шрифт очень маленький то удерживай ctrl скролл покрутите и будет вам щастье</p>
			<p><cite>комментарий от <span class="fn">Павел</span> — 04.05.2011 @ <a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#comment-13258">16:33</a></cite> 				<span class="reply">
					 | <a rel="nofollow" class="comment-reply-link" href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/?replytocom=13258#respond" data-commentid="13258" data-postid="505" data-belowelement="div-comment-13258" data-respondelement="respond" data-replyto="Комментарий к записи Павел" aria-label="Комментарий к записи Павел">Ответить</a>				</span>
			</p>
		</div>
	</div>
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1 highlander-comment" id="comment-20088">
	<div id="div-comment-20088">
		<div class="comment-author vcard">
			<img alt="" src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/saved_resource(5)" class="avatar avatar-32 grav-hashed grav-hijack" height="32" width="32" id="grav-false-1">			<p>Спасибо. Очень помогли подробные описания хинтов.</p>
			<p><cite>комментарий от <span class="fn">Аноним</span> — 12.09.2012 @ <a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#comment-20088">16:55</a></cite> 				<span class="reply">
					 | <a rel="nofollow" class="comment-reply-link" href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/?replytocom=20088#respond" data-commentid="20088" data-postid="505" data-belowelement="div-comment-20088" data-respondelement="respond" data-replyto="Комментарий к записи Аноним" aria-label="Комментарий к записи Аноним">Ответить</a>				</span>
			</p>
		</div>
	</div>
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-22698">
	<div id="div-comment-22698">
		<div class="comment-author vcard">
			<img alt="" src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/658daacd0fd28f8d185da60065e91b80.jpeg" class="avatar avatar-32 grav-hashed grav-hijack" height="32" width="32" id="grav-658daacd0fd28f8d185da60065e91b80-0">			<p>Спасиба !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</p>
			<p><cite>комментарий от <span class="fn">Петр</span> — 21.08.2013 @ <a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#comment-22698">17:39</a></cite> 				<span class="reply">
					 | <a rel="nofollow" class="comment-reply-link" href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/?replytocom=22698#respond" data-commentid="22698" data-postid="505" data-belowelement="div-comment-22698" data-respondelement="respond" data-replyto="Комментарий к записи Петр" aria-label="Комментарий к записи Петр">Ответить</a>				</span>
			</p>
		</div>
	</div>
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1 highlander-comment" id="comment-25147">
	<div id="div-comment-25147">
		<div class="comment-author vcard">
			<img alt="" src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/saved_resource(5)" class="avatar avatar-32 grav-hashed grav-hijack" height="32" width="32" id="grav-false-2">			<p>СПАСИБО БОЛЬШОЕ</p>
			<p><cite>комментарий от <span class="fn">Аноним</span> — 07.05.2014 @ <a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#comment-25147">15:48</a></cite> 				<span class="reply">
					 | <a rel="nofollow" class="comment-reply-link" href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/?replytocom=25147#respond" data-commentid="25147" data-postid="505" data-belowelement="div-comment-25147" data-respondelement="respond" data-replyto="Комментарий к записи Аноним" aria-label="Комментарий к записи Аноним">Ответить</a>				</span>
			</p>
		</div>
	</div>
</li><!-- #comment-## -->
<li class="pingback odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-25190">
	<div id="div-comment-25190">
		<div class="comment-author vcard">
						<p>[…] Подсказки (Oracle Hints) <a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/" rel="nofollow ugc">https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/</a> […]</p>
			<p><cite>Уведомление от <span class="fn"><a href="http://vprog.wordpress.com/2013/06/03/oracle-mechanics/" rel="external nofollow ugc" class="url">Oracle mechanics | programmer's blog</a></span> — 13.05.2014 @ <a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#comment-25190">17:01</a></cite> 				<span class="reply">
					 | <a rel="nofollow" class="comment-reply-link" href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/?replytocom=25190#respond" data-commentid="25190" data-postid="505" data-belowelement="div-comment-25190" data-respondelement="respond" data-replyto="Комментарий к записи Oracle mechanics | programmer&#39;s blog" aria-label="Комментарий к записи Oracle mechanics | programmer&#39;s blog">Ответить</a>				</span>
			</p>
		</div>
	</div>
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1 highlander-comment" id="comment-25330">
	<div id="div-comment-25330">
		<div class="comment-author vcard">
			<img alt="" src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/a53cfbc20e07580218fcd08fc392692d" class="avatar avatar-32 grav-hashed grav-hijack" height="32" width="32" id="grav-a53cfbc20e07580218fcd08fc392692d-0">			<p>Спасибо за проделанную работу Без лишней води и по существу</p>
			<p><cite>комментарий от <span class="fn">Андрей</span> — 29.05.2014 @ <a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#comment-25330">10:24</a></cite> 				<span class="reply">
					 | <a rel="nofollow" class="comment-reply-link" href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/?replytocom=25330#respond" data-commentid="25330" data-postid="505" data-belowelement="div-comment-25330" data-respondelement="respond" data-replyto="Комментарий к записи Андрей" aria-label="Комментарий к записи Андрей">Ответить</a>				</span>
			</p>
		</div>
	</div>
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-25728">
	<div id="div-comment-25728">
		<div class="comment-author vcard">
			<img alt="" src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/photo.jpg" class="avatar avatar-32" height="32" width="32">			<p>Статья отличная, очень помогла в работе. Спасибо!</p>
			<p><cite>комментарий от <span class="fn"><a href="https://plus.google.com/+AnastasiZhukova" rel="external nofollow ugc" class="url">Anastasi Zhukova</a></span> — 12.08.2014 @ <a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#comment-25728">08:24</a></cite> 				<span class="reply">
					 | <a rel="nofollow" class="comment-reply-link" href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/?replytocom=25728#respond" data-commentid="25728" data-postid="505" data-belowelement="div-comment-25728" data-respondelement="respond" data-replyto="Комментарий к записи Anastasi Zhukova" aria-label="Комментарий к записи Anastasi Zhukova">Ответить</a>				</span>
			</p>
		</div>
	</div>
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1 highlander-comment" id="comment-26957">
	<div id="div-comment-26957">
		<div class="comment-author vcard">
			<img alt="" src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/saved_resource(5)" class="avatar avatar-32 grav-hashed grav-hijack" height="32" width="32" id="grav-false-3">			<p>Спасибо огромное!</p>
			<p><cite>комментарий от <span class="fn">Аноним</span> — 19.08.2015 @ <a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#comment-26957">22:05</a></cite> 				<span class="reply">
					 | <a rel="nofollow" class="comment-reply-link" href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/?replytocom=26957#respond" data-commentid="26957" data-postid="505" data-belowelement="div-comment-26957" data-respondelement="respond" data-replyto="Комментарий к записи Аноним" aria-label="Комментарий к записи Аноним">Ответить</a>				</span>
			</p>
		</div>
	</div>
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1 parent highlander-comment" id="comment-28171">
	<div id="div-comment-28171">
		<div class="comment-author vcard">
			<img alt="" src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/38d0e651a0c61bdc2385be38e2acd45c" class="avatar avatar-32 grav-hashed grav-hijack" height="32" width="32" id="grav-38d0e651a0c61bdc2385be38e2acd45c-0">			<p>Игорь, спасибо большой за материал, вами проделана огромная работа!</p>
<p>Есть вопрос. Пожалуйста, дополните статью, если вам известно как действовать в таких ситуациях.<br>
Вы пишите:<br>
«DRIVING_SITE предполагает управление выполнением (mapping) всего курсора (а не отдельных подзапросов)… [однако можно перенести выполнение части курсора / подзапроса в удалённый обзор]»<br>
Это факт. Никак не получается отправить подзапрос целиком на удалённый сервер. NO_MERGE не помогает, DISTINCT и GROUP BY в подзапросе отсутствуют. В итоге каждый шаг подзапроса целиком вытягивается с удалённого на локальный и только на локальном сервере происходит отсечение по access predicates.</p>
			<p><cite>комментарий от <span class="fn">Dmitry</span> — 17.02.2016 @ <a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#comment-28171">12:32</a></cite> 				<span class="reply">
					 | <a rel="nofollow" class="comment-reply-link" href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/?replytocom=28171#respond" data-commentid="28171" data-postid="505" data-belowelement="div-comment-28171" data-respondelement="respond" data-replyto="Комментарий к записи Dmitry" aria-label="Комментарий к записи Dmitry">Ответить</a>				</span>
			</p>
		</div>
	</div>
<ul class="children">
<li class="comment byuser comment-author-iusoltsev bypostauthor even depth-2 highlander-comment" id="comment-28173">
	<div id="div-comment-28173">
		<div class="comment-author vcard">
			<img alt="" src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/d5b2ed1f8739ccaf1ed8aeaedde22744.jpeg" class="avatar avatar-32 grav-hashed grav-hijack" height="32" width="32" id="grav-d5b2ed1f8739ccaf1ed8aeaedde22744-0">			<p>Добрый день, Дмитрий</p>
<p>хорошо бы, конечно, видеть запрос/тесткейс целиком)</p>
<p>я имел в виду что-то типа <a href="https://iusoltsev.wordpress.com/2012/05/27/px-mview-refresh-dblink/" rel="nofollow">Создание небходимого обзора на удалённом сайте с последующим выполнением запроса к обзору</a></p>
			<p><cite>комментарий от <span class="fn">Игорь Усольцев</span> — 18.02.2016 @ <a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#comment-28173">13:30</a></cite> 				<span class="reply">
					 | <a rel="nofollow" class="comment-reply-link" href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/?replytocom=28173#respond" data-commentid="28173" data-postid="505" data-belowelement="div-comment-28173" data-respondelement="respond" data-replyto="Комментарий к записи Игорь Усольцев" aria-label="Комментарий к записи Игорь Усольцев">Ответить</a>				</span>
			</p>
		</div>
	</div>
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
<li class="comment byuser comment-author-sshumeev odd alt thread-even depth-1 parent highlander-comment" id="comment-31068">
	<div id="div-comment-31068">
		<div class="comment-author vcard">
			<img alt="" src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/1d948db41c6ea1b4c4273e5ea463b175.png" class="avatar avatar-32 grav-hashed grav-hijack" height="32" width="32" id="grav-1d948db41c6ea1b4c4273e5ea463b175-0">			<p>Игорь, добрый день!</p>
<p>Из описания /*+ APPEND_VALUES */ не было очевидно(мне), что этот хинт только для групповой вставки  строк.<br>
У Franck Pachot в<br>
<a href="https://blog.dbi-services.com/variations-on-1m-rows-insert-4-append_values/" rel="nofollow ugc">https://blog.dbi-services.com/variations-on-1m-rows-insert-4-append_values/</a><br>
Of course, this makes sense only with bulk insert because you don’t want to do that with only one row.</p>
<p>В документации<br>
<a href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/sqlrf/Comments.html#GUID-DD069661-D431-40F5-9303-DB8C1153D87D" rel="nofollow ugc">https://docs.oracle.com/en/database/oracle/oracle-database/12.2/sqlrf/Comments.html#GUID-DD069661-D431-40F5-9303-DB8C1153D87D</a><br>
явно не сказано, есть примеры использования.</p>
<p>   The APPEND_VALUES hint can be used to greatly enhance performance. Some examples of its uses are:<br>
      In an Oracle Call Interface (OCI) program, when using large array binds or array binds with row callbacks<br>
      In PL/SQL, when loading a large number of rows with a FORALL loop that has an INSERT statement with a VALUES clause</p>
			<p><cite>комментарий от <span class="fn"><a href="http://sshumeev.wordpress.com/" rel="external nofollow ugc" class="url">Shumeev Sergey</a></span> — 14.11.2018 @ <a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#comment-31068">17:10</a></cite> 				<span class="reply">
					 | <a rel="nofollow" class="comment-reply-link" href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/?replytocom=31068#respond" data-commentid="31068" data-postid="505" data-belowelement="div-comment-31068" data-respondelement="respond" data-replyto="Комментарий к записи Shumeev Sergey" aria-label="Комментарий к записи Shumeev Sergey">Ответить</a>				</span>
			</p>
		</div>
	</div>
<ul class="children">
<li class="comment byuser comment-author-iusoltsev bypostauthor even depth-2 highlander-comment" id="comment-31069">
	<div id="div-comment-31069">
		<div class="comment-author vcard">
			<img alt="" src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/d5b2ed1f8739ccaf1ed8aeaedde22744.jpeg" class="avatar avatar-32 grav-hashed grav-hijack" height="32" width="32" id="grav-d5b2ed1f8739ccaf1ed8aeaedde22744-1">			<p>Приветствую, Сергей,</p>
<p>Конечно, при групповой вставке строк эффект будет заметнее (<em>this makes sense only with bulk insert</em>), но и при вставке одинокой строки хинт прекрасно работает:</p>
<div><div id="highlighter_188750" class="syntaxhighlighter nogutter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql plain">12.1.0.2.@ SQL&gt; </code><code class="sql keyword">insert</code><code class="sql comments">/*+ append_values*/</code> <code class="sql keyword">into</code> <code class="sql plain">scott.emp_snapshot </code><code class="sql keyword">values</code><code class="sql plain">(8000, </code><code class="sql string">'BLACK'</code><code class="sql plain">, </code><code class="sql string">'CLERK'</code><code class="sql plain">, 7902, sysdate, 100, </code><code class="sql string">''</code><code class="sql plain">, 20);</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="sql plain">1 row created.</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="sql plain">SQL&gt; </code><code class="sql keyword">SELECT</code> <code class="sql plain">* </code><code class="sql keyword">FROM</code> <code class="sql keyword">TABLE</code><code class="sql plain">(dbms_xplan.display_cursor());</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="sql plain">PLAN_TABLE_OUTPUT</code></div><div class="line number8 index7 alt1"><code class="sql comments">-----------------------------------------------------------------------</code></div><div class="line number9 index8 alt2"><code class="sql plain">SQL_ID&nbsp; 5tdp7p36n13r8, child number 0</code></div><div class="line number10 index9 alt1"><code class="sql comments">-------------------------------------</code></div><div class="line number11 index10 alt2"><code class="sql keyword">insert</code><code class="sql comments">/*+ append_values*/</code> <code class="sql keyword">into</code> <code class="sql plain">scott.emp_snapshot </code><code class="sql keyword">values</code><code class="sql plain">(8000, </code><code class="sql string">'BLACK'</code><code class="sql plain">,</code></div><div class="line number12 index11 alt1"><code class="sql string">'CLERK'</code><code class="sql plain">, 7902, sysdate, 100, </code><code class="sql string">''</code><code class="sql plain">, 20)</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="sql plain">Plan hash value: 3581094869</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="sql comments">---------------------------------------------------------</code></div><div class="line number17 index16 alt2"><code class="sql plain">| Id&nbsp; | Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | </code><code class="sql keyword">Name</code> <code class="sql plain">| Cost&nbsp; |</code></div><div class="line number18 index17 alt1"><code class="sql comments">---------------------------------------------------------</code></div><div class="line number19 index18 alt2"><code class="sql plain">|&nbsp;&nbsp; 0 | </code><code class="sql keyword">INSERT</code> <code class="sql plain">STATEMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; 1 |</code></div><div class="line number20 index19 alt1"><code class="sql plain">|&nbsp;&nbsp; 1 |&nbsp; </code><code class="sql keyword">LOAD</code> <code class="sql keyword">AS</code> <code class="sql keyword">SELECT</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="sql plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number21 index20 alt2"><code class="sql plain">|&nbsp;&nbsp; 2 |&nbsp;&nbsp; OPTIMIZER </code><code class="sql keyword">STATISTICS</code> <code class="sql plain">GATHERING |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number22 index21 alt1"><code class="sql plain">|&nbsp;&nbsp; 3 |&nbsp;&nbsp;&nbsp; BULK BINDS GET&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</code></div><div class="line number23 index22 alt2"><code class="sql comments">---------------------------------------------------------</code></div><div class="line number24 index23 alt1">&nbsp;</div><div class="line number25 index24 alt2"><code class="sql plain">Note</code></div><div class="line number26 index25 alt1"><code class="sql comments">-----</code></div><div class="line number27 index26 alt2"><code class="sql spaces">&nbsp;&nbsp;&nbsp;</code><code class="sql plain">- cpu costing </code><code class="sql keyword">is</code> <code class="sql keyword">off</code> <code class="sql plain">(consider enabling it)</code></div></div></td></tr></tbody></table></div></div>
<p>или я неправильно понял вопрос?</p>
			<p><cite>комментарий от <span class="fn">Игорь Усольцев</span> — 14.11.2018 @ <a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#comment-31069">18:55</a></cite> 				<span class="reply">
					 | <a rel="nofollow" class="comment-reply-link" href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/?replytocom=31069#respond" data-commentid="31069" data-postid="505" data-belowelement="div-comment-31069" data-respondelement="respond" data-replyto="Комментарий к записи Игорь Усольцев" aria-label="Комментарий к записи Игорь Усольцев">Ответить</a>				</span>
			</p>
		</div>
	</div>
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ol>
	<div class="navigation">
		<div class="alignleft"></div>
		<div class="alignright"></div>
	</div>
	<br>

	<p><a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/feed/"><abbr title="Really Simple Syndication">RSS</abbr> feed for comments on this post.</a>	<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/trackback/" rel="trackback">TrackBack <abbr title="Uniform Resource Identifier">URI</abbr></a>
</p>

	<div id="respond" class="comment-respond js">
		<h3 id="reply-title" class="comment-reply-title">Добавить комментарий <small><a rel="nofollow" id="cancel-comment-reply-link" href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#respond" style="display:none;">Отменить ответ</a></small></h3><form action="https://iusoltsev.wordpress.com/wp-comments-post.php" method="post" id="commentform" class="comment-form"><input type="hidden" id="highlander_comment_nonce" name="highlander_comment_nonce" value="5b40290697"><input type="hidden" name="_wp_http_referer" value="/profile/individual-sql-and-cbo/cbo-hints/">
<input type="hidden" name="hc_post_as" id="hc_post_as" value="guest">

<div class="comment-form-field comment-textarea">
	
	<div id="comment-form-comment"><textarea id="comment" name="comment" title="Введите свой комментарий..." placeholder="Введите свой комментарий..." style="overflow: hidden; overflow-wrap: break-word; resize: none; height: 38px;"></textarea></div>
</div>

<div id="comment-form-identity" style="display: none;">
	<div id="comment-form-nascar">
		<p>Заполните поля или щелкните по значку, чтобы оставить свой комментарий:</p>
		<ul>
			<li class="selected" style="display:none;">
				<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#comment-form-guest" id="postas-guest" class="nascar-signin-link" title="Login via Гость">
									</a>
			</li>
			<li>
				<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#comment-form-load-service:WordPress.com" id="postas-wordpress" class="nascar-signin-link" title="Login via WordPress.com">
					<svg xmlns="http://www.w3.org/2000/svg" role="presentation" viewBox="0 0 24 24"><rect x="0" fill="none" width="24" height="24"></rect><g><path fill="#0087be" d="M12.158 12.786l-2.698 7.84c.806.236 1.657.365 2.54.365 1.047 0 2.05-.18 2.986-.51-.024-.037-.046-.078-.065-.123l-2.762-7.57zM3.008 12c0 3.56 2.07 6.634 5.068 8.092L3.788 8.342c-.5 1.117-.78 2.354-.78 3.658zm15.06-.454c0-1.112-.398-1.88-.74-2.48-.456-.74-.883-1.368-.883-2.11 0-.825.627-1.595 1.51-1.595.04 0 .078.006.116.008-1.598-1.464-3.73-2.36-6.07-2.36-3.14 0-5.904 1.613-7.512 4.053.21.008.41.012.58.012.94 0 2.395-.114 2.395-.114.484-.028.54.684.057.74 0 0-.487.058-1.03.086l3.275 9.74 1.968-5.902-1.4-3.838c-.485-.028-.944-.085-.944-.085-.486-.03-.43-.77.056-.742 0 0 1.484.114 2.368.114.94 0 2.397-.114 2.397-.114.486-.028.543.684.058.74 0 0-.488.058-1.03.086l3.25 9.665.897-2.997c.456-1.17.684-2.137.684-2.907zm1.82-3.86c.04.286.06.593.06.924 0 .912-.17 1.938-.683 3.22l-2.746 7.94c2.672-1.558 4.47-4.454 4.47-7.77 0-1.564-.4-3.033-1.1-4.314zM12 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10z"></path></g></svg>				</a>
			</li>
			<li>
				<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#comment-form-load-service:Twitter" id="postas-twitter" class="nascar-signin-link" title="Login via Twitter">
					<svg xmlns="http://www.w3.org/2000/svg" role="presentation" viewBox="0 0 24 24"><rect x="0" fill="none" width="24" height="24"></rect><g><path fill="#1DA1F2" d="M22.23 5.924c-.736.326-1.527.547-2.357.646.847-.508 1.498-1.312 1.804-2.27-.793.47-1.67.812-2.606.996C18.325 4.498 17.258 4 16.078 4c-2.266 0-4.103 1.837-4.103 4.103 0 .322.036.635.106.935-3.41-.17-6.433-1.804-8.457-4.287-.353.607-.556 1.312-.556 2.064 0 1.424.724 2.68 1.825 3.415-.673-.022-1.305-.207-1.86-.514v.052c0 1.988 1.415 3.647 3.293 4.023-.344.095-.707.145-1.08.145-.265 0-.522-.026-.773-.074.522 1.63 2.038 2.817 3.833 2.85-1.404 1.1-3.174 1.757-5.096 1.757-.332 0-.66-.02-.98-.057 1.816 1.164 3.973 1.843 6.29 1.843 7.547 0 11.675-6.252 11.675-11.675 0-.178-.004-.355-.012-.53.802-.578 1.497-1.3 2.047-2.124z"></path></g></svg>				</a>
			</li>
			<li>
				<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#comment-form-load-service:Facebook" id="postas-facebook" class="nascar-signin-link" title="Login via Facebook">
					<svg xmlns="http://www.w3.org/2000/svg" role="presentation" viewBox="0 0 24 24"><rect x="0" fill="none" width="24" height="24"></rect><g><path fill="#3B5998" d="M20.007 3H3.993C3.445 3 3 3.445 3 3.993v16.013c0 .55.445.994.993.994h8.62v-6.97H10.27V11.31h2.346V9.31c0-2.325 1.42-3.59 3.494-3.59.993 0 1.847.073 2.096.106v2.43h-1.438c-1.128 0-1.346.537-1.346 1.324v1.734h2.69l-.35 2.717h-2.34V21h4.587c.548 0 .993-.445.993-.993V3.993c0-.548-.445-.993-.993-.993z"></path></g></svg>				</a>
			</li>
		</ul>
	</div>

	<div id="comment-form-guest" class="comment-form-service selected">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
<a href="https://gravatar.com/site/signup/" target="_blank">				<img src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/ad516503a11cd5ca435acc9bb6523536" alt="Gravatar" width="25" class="no-grav grav-hashed" id="grav-ad516503a11cd5ca435acc9bb6523536-0">
</a>			</div>

				<div class="comment-form-fields">
				<div class="comment-form-field comment-form-email">
					<label for="email">E-mail <span class="required">(обязательно)</span> <span class="nopublish">(Адрес никогда не будет опубликован)</span></label>
					<div class="comment-form-input"><input id="email" name="email" type="email" value=""></div>
				</div>
				<div class="comment-form-field comment-form-author">
					<label for="author">Имя <span class="required">(обязательно)</span></label>
					<div class="comment-form-input"><input id="author" name="author" type="text" value=""></div>
				</div>
				<div class="comment-form-field comment-form-url">
					<label for="url">Сайт</label>
					<div class="comment-form-input"><input id="url" name="url" type="url" value=""></div>
				</div>
			</div>
			
		</div>
	</div>

	<div id="comment-form-wordpress" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/ad516503a11cd5ca435acc9bb6523536" alt="Логотип WordPress.com" width="25" class="no-grav grav-hashed grav-hijack" id="grav-ad516503a11cd5ca435acc9bb6523536-1">
			</div>

				<div class="comment-form-fields">
				<input type="hidden" name="wp_avatar" id="wordpress-avatar" class="comment-meta-wordpress" value="">
				<input type="hidden" name="wp_user_id" id="wordpress-user_id" class="comment-meta-wordpress" value="">
				<input type="hidden" name="wp_access_token" id="wordpress-access_token" class="comment-meta-wordpress" value="">
						<p class="comment-form-posting-as pa-wordpress">
			<strong></strong>
			Для комментария используется ваша учётная запись WordPress.com.			<span class="comment-form-log-out">
				(&nbsp;<a href="javascript:HighlanderComments.doExternalLogout( &#39;wordpress&#39; );">Выход</a>&nbsp;/&nbsp;
				<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#" onclick="javascript:HighlanderComments.switchAccount();return false;">Изменить</a>&nbsp;)
			</span>
			<span class="pa-icon"><svg xmlns="http://www.w3.org/2000/svg" role="presentation" viewBox="0 0 24 24"><rect x="0" fill="none" width="24" height="24"></rect><g><path fill="#0087be" d="M12.158 12.786l-2.698 7.84c.806.236 1.657.365 2.54.365 1.047 0 2.05-.18 2.986-.51-.024-.037-.046-.078-.065-.123l-2.762-7.57zM3.008 12c0 3.56 2.07 6.634 5.068 8.092L3.788 8.342c-.5 1.117-.78 2.354-.78 3.658zm15.06-.454c0-1.112-.398-1.88-.74-2.48-.456-.74-.883-1.368-.883-2.11 0-.825.627-1.595 1.51-1.595.04 0 .078.006.116.008-1.598-1.464-3.73-2.36-6.07-2.36-3.14 0-5.904 1.613-7.512 4.053.21.008.41.012.58.012.94 0 2.395-.114 2.395-.114.484-.028.54.684.057.74 0 0-.487.058-1.03.086l3.275 9.74 1.968-5.902-1.4-3.838c-.485-.028-.944-.085-.944-.085-.486-.03-.43-.77.056-.742 0 0 1.484.114 2.368.114.94 0 2.397-.114 2.397-.114.486-.028.543.684.058.74 0 0-.488.058-1.03.086l3.25 9.665.897-2.997c.456-1.17.684-2.137.684-2.907zm1.82-3.86c.04.286.06.593.06.924 0 .912-.17 1.938-.683 3.22l-2.746 7.94c2.672-1.558 4.47-4.454 4.47-7.77 0-1.564-.4-3.033-1.1-4.314zM12 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10z"></path></g></svg></span>
		</p>
					</div>
	
		</div>
	</div>

	<div id="comment-form-twitter" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/ad516503a11cd5ca435acc9bb6523536" alt="Фотография Twitter" width="25" class="no-grav grav-hashed grav-hijack" id="grav-ad516503a11cd5ca435acc9bb6523536-2">
			</div>

				<div class="comment-form-fields">
				<input type="hidden" name="twitter_avatar" id="twitter-avatar" class="comment-meta-twitter" value="">
				<input type="hidden" name="twitter_user_id" id="twitter-user_id" class="comment-meta-twitter" value="">
				<input type="hidden" name="twitter_access_token" id="twitter-access_token" class="comment-meta-twitter" value="">
						<p class="comment-form-posting-as pa-twitter">
			<strong></strong>
			Для комментария используется ваша учётная запись Twitter.			<span class="comment-form-log-out">
				(&nbsp;<a href="javascript:HighlanderComments.doExternalLogout( &#39;twitter&#39; );">Выход</a>&nbsp;/&nbsp;
				<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#" onclick="javascript:HighlanderComments.switchAccount();return false;">Изменить</a>&nbsp;)
			</span>
			<span class="pa-icon"><svg xmlns="http://www.w3.org/2000/svg" role="presentation" viewBox="0 0 24 24"><rect x="0" fill="none" width="24" height="24"></rect><g><path fill="#1DA1F2" d="M22.23 5.924c-.736.326-1.527.547-2.357.646.847-.508 1.498-1.312 1.804-2.27-.793.47-1.67.812-2.606.996C18.325 4.498 17.258 4 16.078 4c-2.266 0-4.103 1.837-4.103 4.103 0 .322.036.635.106.935-3.41-.17-6.433-1.804-8.457-4.287-.353.607-.556 1.312-.556 2.064 0 1.424.724 2.68 1.825 3.415-.673-.022-1.305-.207-1.86-.514v.052c0 1.988 1.415 3.647 3.293 4.023-.344.095-.707.145-1.08.145-.265 0-.522-.026-.773-.074.522 1.63 2.038 2.817 3.833 2.85-1.404 1.1-3.174 1.757-5.096 1.757-.332 0-.66-.02-.98-.057 1.816 1.164 3.973 1.843 6.29 1.843 7.547 0 11.675-6.252 11.675-11.675 0-.178-.004-.355-.012-.53.802-.578 1.497-1.3 2.047-2.124z"></path></g></svg></span>
		</p>
					</div>
	
		</div>
	</div>

	<div id="comment-form-facebook" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/" alt="Фотография Facebook" width="25" class="no-grav">
			</div>

				<div class="comment-form-fields">
				<input type="hidden" name="fb_avatar" id="facebook-avatar" class="comment-meta-facebook" value="">
				<input type="hidden" name="fb_user_id" id="facebook-user_id" class="comment-meta-facebook" value="">
				<input type="hidden" name="fb_access_token" id="facebook-access_token" class="comment-meta-facebook" value="">
						<p class="comment-form-posting-as pa-facebook">
			<strong></strong>
			Для комментария используется ваша учётная запись Facebook.			<span class="comment-form-log-out">
				(&nbsp;<a href="javascript:HighlanderComments.doExternalLogout( &#39;facebook&#39; );">Выход</a>&nbsp;/&nbsp;
				<a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/#" onclick="javascript:HighlanderComments.switchAccount();return false;">Изменить</a>&nbsp;)
			</span>
			<span class="pa-icon"><svg xmlns="http://www.w3.org/2000/svg" role="presentation" viewBox="0 0 24 24"><rect x="0" fill="none" width="24" height="24"></rect><g><path fill="#3B5998" d="M20.007 3H3.993C3.445 3 3 3.445 3 3.993v16.013c0 .55.445.994.993.994h8.62v-6.97H10.27V11.31h2.346V9.31c0-2.325 1.42-3.59 3.494-3.59.993 0 1.847.073 2.096.106v2.43h-1.438c-1.128 0-1.346.537-1.346 1.324v1.734h2.69l-.35 2.717h-2.34V21h4.587c.548 0 .993-.445.993-.993V3.993c0-.548-.445-.993-.993-.993z"></path></g></svg></span>
		</p>
					</div>
	
		</div>
	</div>


	<div id="comment-form-load-service" class="comment-form-service">
		<div class="comment-form-posting-as-cancel"><a href="javascript:HighlanderComments.cancelExternalWindow();">Отмена</a></div>
		<p>Connecting to %s</p>
	</div>

</div>

<script type="text/javascript">
var highlander_expando_javascript = function () {

	function hide( sel ) {
		var el = document.querySelector( sel );
		if ( el ) {
			el.style.setProperty( 'display', 'none' );
		}
	}

	function show( sel ) {
		var el = document.querySelector( sel );
		if ( el ) {
			el.style.removeProperty( 'display' );
		}
	}

	var input = document.createElement( 'input' );
	var comment = document.querySelector( '#comment' );

	if ( input && comment && 'placeholder' in input ) {
		var label = document.querySelector( '.comment-textarea label' );
		if ( label ) {
			var text = label.textContent;
			label.parentNode.removeChild( label );
			comment.setAttribute( 'placeholder', text );
		}
	}

	// Expando Mode: start small, then auto-resize on first click + text length
	hide( '#comment-form-identity' );
	hide( '#comment-form-subscribe' );
	hide( '#commentform .form-submit' );

	if ( comment ) {
		comment.style.height = '10px';

		var handler = function () {
			comment.style.height = HighlanderComments.initialHeight + 'px';
			show( '#comment-form-identity' );
			show( '#comment-form-subscribe' );
			show( '#commentform .form-submit' );
			HighlanderComments.resizeCallback();

			comment.removeEventListener( 'focus', handler );
		};

		comment.addEventListener( 'focus', handler );
	}
}

if ( document.readyState !== 'loading' ) {
	highlander_expando_javascript();
} else {
	document.addEventListener( 'DOMContentLoaded', highlander_expando_javascript );
}

</script>

<div id="comment-form-subscribe" style="display: none;">
	<p class="comment-subscription-form"><input type="checkbox" name="subscribe" id="subscribe" value="subscribe" style="width: auto;"> <label class="subscribe-label" id="subscribe-label" for="subscribe" style="display: inline;">Уведомлять меня о новых комментариях по почте.</label></p><p class="post-subscription-form"><input type="checkbox" name="subscribe_blog" id="subscribe_blog" value="subscribe" style="width: auto;"> <label class="subscribe-label" id="subscribe-blog-label" for="subscribe_blog" style="display: inline;">Уведомлять меня о новых записях по почте.</label></p></div>




<p class="form-submit" style="display: none;"><input name="submit" type="submit" id="comment-submit" class="submit button" value="Отправить комментарий"> <input type="hidden" name="comment_post_ID" value="505" id="comment_post_ID">
<input type="hidden" name="comment_parent" id="comment_parent" value="0">
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="c13f8d4513"></p>
<input type="hidden" name="genseq" value="1673712157">
<p style="display: none !important;"><label>Δ<textarea name="ak_hp_textarea" cols="45" rows="8" maxlength="100"></textarea></label><input type="hidden" id="ak_js_1" name="ak_js" value="1673712155255"><script>document.getElementById( "ak_js_1" ).setAttribute( "value", ( new Date() ).getTime() );</script></p></form>	</div><!-- #respond -->
	<div style="clear: both"></div>


<!-- begin footer -->
</div>


<!-- begin sidebar -->
<div id="menu">

<ul>
<li id="search-2" class="widget widget_search"><form role="search" method="get" id="searchform" class="searchform" action="https://iusoltsev.wordpress.com/">
				<div>
					<label class="screen-reader-text" for="s">Поиск:</label>
					<input type="text" value="" name="s" id="s">
					<input type="submit" id="searchsubmit" value="Поиск">
				</div>
			</form></li>
<li id="categories-2" class="widget widget_categories"><h2 class="widgettitle">Рубрики</h2>
<form action="https://iusoltsev.wordpress.com/" method="get"><label class="screen-reader-text" for="cat">Рубрики</label><select name="cat" id="cat" class="postform">
	<option value="-1">Выберите рубрику</option>
	<option class="level-0" value="7205">commonplace&nbsp;&nbsp;(29)</option>
	<option class="level-0" value="21854913">Блокировки&nbsp;&nbsp;(12)</option>
	<option class="level-0" value="34922710">Linux&nbsp;&nbsp;(8)</option>
	<option class="level-1" value="36169">&nbsp;&nbsp;&nbsp;LAMP&nbsp;&nbsp;(2)</option>
	<option class="level-0" value="4419">MySQL&nbsp;&nbsp;(9)</option>
	<option class="level-1" value="442348">&nbsp;&nbsp;&nbsp;optimizer&nbsp;&nbsp;(4)</option>
	<option class="level-0" value="103">news&nbsp;&nbsp;(1)</option>
	<option class="level-0" value="3766">Oracle&nbsp;&nbsp;(317)</option>
	<option class="level-1" value="23530374">&nbsp;&nbsp;&nbsp;12.2&nbsp;&nbsp;(8)</option>
	<option class="level-1" value="52614493">&nbsp;&nbsp;&nbsp;Active Session History&nbsp;&nbsp;(25)</option>
	<option class="level-1" value="448086">&nbsp;&nbsp;&nbsp;AWR&nbsp;&nbsp;(6)</option>
	<option class="level-1" value="517250">&nbsp;&nbsp;&nbsp;Backup and Recovery&nbsp;&nbsp;(14)</option>
	<option class="level-2" value="24738514">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Active Data Guard&nbsp;&nbsp;(8)</option>
	<option class="level-1" value="2420917">&nbsp;&nbsp;&nbsp;bind variables&nbsp;&nbsp;(5)</option>
	<option class="level-1" value="6354">&nbsp;&nbsp;&nbsp;bugs&nbsp;&nbsp;(30)</option>
	<option class="level-1" value="452146">&nbsp;&nbsp;&nbsp;CBO&nbsp;&nbsp;(74)</option>
	<option class="level-2" value="44665013">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Optimizer features&nbsp;&nbsp;(10)</option>
	<option class="level-1" value="475">&nbsp;&nbsp;&nbsp;database&nbsp;&nbsp;(4)</option>
	<option class="level-2" value="94259653">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;direct-path DML&nbsp;&nbsp;(2)</option>
	<option class="level-1" value="8383368">&nbsp;&nbsp;&nbsp;Диагностика системы (instance)&nbsp;&nbsp;(51)</option>
	<option class="level-1" value="11869">&nbsp;&nbsp;&nbsp;error&nbsp;&nbsp;(7)</option>
	<option class="level-1" value="11470830">&nbsp;&nbsp;&nbsp;Exadata&nbsp;&nbsp;(2)</option>
	<option class="level-1" value="52383167">&nbsp;&nbsp;&nbsp;Fixed tables&nbsp;&nbsp;(3)</option>
	<option class="level-1" value="79">&nbsp;&nbsp;&nbsp;Hardware&nbsp;&nbsp;(3)</option>
	<option class="level-1" value="398904">&nbsp;&nbsp;&nbsp;heuristics&nbsp;&nbsp;(38)</option>
	<option class="level-1" value="36263">&nbsp;&nbsp;&nbsp;hints&nbsp;&nbsp;(31)</option>
	<option class="level-1" value="9228814">&nbsp;&nbsp;&nbsp;install-config-migration&nbsp;&nbsp;(5)</option>
	<option class="level-1" value="680992">&nbsp;&nbsp;&nbsp;memory management&nbsp;&nbsp;(4)</option>
	<option class="level-1" value="1871905">&nbsp;&nbsp;&nbsp;mview&nbsp;&nbsp;(4)</option>
	<option class="level-1" value="636232">&nbsp;&nbsp;&nbsp;NLS&nbsp;&nbsp;(1)</option>
	<option class="level-1" value="71360156">&nbsp;&nbsp;&nbsp;Oracle 12c&nbsp;&nbsp;(8)</option>
	<option class="level-1" value="592363147">&nbsp;&nbsp;&nbsp;Oracle Autonomous Database&nbsp;&nbsp;(1)</option>
	<option class="level-1" value="636853">&nbsp;&nbsp;&nbsp;Oracle CRS&nbsp;&nbsp;(2)</option>
	<option class="level-1" value="8618278">&nbsp;&nbsp;&nbsp;Oracle new features&nbsp;&nbsp;(25)</option>
	<option class="level-1" value="585905">&nbsp;&nbsp;&nbsp;Parallel Execution&nbsp;&nbsp;(1)</option>
	<option class="level-1" value="162626">&nbsp;&nbsp;&nbsp;parameters&nbsp;&nbsp;(21)</option>
	<option class="level-1" value="198593">&nbsp;&nbsp;&nbsp;Partitioning&nbsp;&nbsp;(4)</option>
	<option class="level-1" value="51018">&nbsp;&nbsp;&nbsp;PL/SQL&nbsp;&nbsp;(4)</option>
	<option class="level-1" value="763403">&nbsp;&nbsp;&nbsp;PX&nbsp;&nbsp;(13)</option>
	<option class="level-1" value="505044">&nbsp;&nbsp;&nbsp;RAC&nbsp;&nbsp;(6)</option>
	<option class="level-1" value="806235">&nbsp;&nbsp;&nbsp;RBO&nbsp;&nbsp;(6)</option>
	<option class="level-1" value="118870">&nbsp;&nbsp;&nbsp;remote&nbsp;&nbsp;(6)</option>
	<option class="level-1" value="4493">&nbsp;&nbsp;&nbsp;Scripts&nbsp;&nbsp;(12)</option>
	<option class="level-1" value="119277">&nbsp;&nbsp;&nbsp;SGA&nbsp;&nbsp;(16)</option>
	<option class="level-2" value="8726081">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shared pool&nbsp;&nbsp;(15)</option>
	<option class="level-1" value="4569156">&nbsp;&nbsp;&nbsp;shared server&nbsp;&nbsp;(1)</option>
	<option class="level-1" value="10346">&nbsp;&nbsp;&nbsp;SQL&nbsp;&nbsp;(33)</option>
	<option class="level-2" value="35381409">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Plan Management&nbsp;&nbsp;(27)</option>
	<option class="level-1" value="2097598">&nbsp;&nbsp;&nbsp;SQL Tuning&nbsp;&nbsp;(27)</option>
	<option class="level-1" value="574696">&nbsp;&nbsp;&nbsp;Standby&nbsp;&nbsp;(2)</option>
	<option class="level-1" value="5849">&nbsp;&nbsp;&nbsp;statistics&nbsp;&nbsp;(15)</option>
	<option class="level-1" value="429">&nbsp;&nbsp;&nbsp;Sun&nbsp;&nbsp;(2)</option>
	<option class="level-1" value="13970016">&nbsp;&nbsp;&nbsp;temp segment&nbsp;&nbsp;(3)</option>
	<option class="level-1" value="3179397">&nbsp;&nbsp;&nbsp;wait events&nbsp;&nbsp;(21)</option>
	<option class="level-1" value="513870">&nbsp;&nbsp;&nbsp;XML DB&nbsp;&nbsp;(1)</option>
	<option class="level-0" value="21372635">persistent connection&nbsp;&nbsp;(2)</option>
	<option class="level-0" value="151">web&nbsp;&nbsp;(2)</option>
</select>
</form>
<script type="text/javascript">
/* <![CDATA[ */
(function() {
	var dropdown = document.getElementById( "cat" );
	function onCatChange() {
		if ( dropdown.options[ dropdown.selectedIndex ].value > 0 ) {
			dropdown.parentNode.submit();
		}
	}
	dropdown.onchange = onCatChange;
})();
/* ]]> */
</script>

			</li>
<li id="pages-2" class="widget widget_pages"><h2 class="widgettitle">Страницы</h2>

			<ul>
				<li class="page_item page-item-2 page_item_has_children current_page_ancestor"><a href="https://iusoltsev.wordpress.com/profile/">About</a>
<ul class="children">
	<li class="page_item page-item-5 page_item_has_children"><a href="https://iusoltsev.wordpress.com/profile/oracle_tools/">Инструменты Oracle</a>
	<ul class="children">
		<li class="page_item page-item-11"><a href="https://iusoltsev.wordpress.com/profile/oracle_tools/wait-events-and-statistics/">Ожидания, статистики, коэффициенты</a></li>
		<li class="page_item page-item-19"><a href="https://iusoltsev.wordpress.com/profile/oracle_tools/trace-events/">Trace events</a></li>
		<li class="page_item page-item-7155"><a href="https://iusoltsev.wordpress.com/profile/oracle_tools/scripts-nuvo/">Scripts</a></li>
	</ul>
</li>
	<li class="page_item page-item-226 page_item_has_children current_page_ancestor current_page_parent"><a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/">SQL запросы и&nbsp;CBO</a>
	<ul class="children">
		<li class="page_item page-item-12"><a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/oracle-parameters/">Параметры</a></li>
		<li class="page_item page-item-505 current_page_item"><a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/" aria-current="page">Подсказки (Oracle Hints)</a></li>
		<li class="page_item page-item-1299"><a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-access-path/">Операции CBO</a></li>
		<li class="page_item page-item-1251"><a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/dbms_xplan/">dbms_xplan</a></li>
		<li class="page_item page-item-2911"><a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/statistics/">Статистика бд</a></li>
	</ul>
</li>
	<li class="page_item page-item-313"><a href="https://iusoltsev.wordpress.com/profile/oracle-reference/">Oracle Words</a></li>
	<li class="page_item page-item-6728"><a href="https://iusoltsev.wordpress.com/profile/ora-00000/">Ошибки</a></li>
</ul>
</li>
			</ul>

			</li>
<li id="recent-comments-3" class="widget widget_recent_comments"><h2 class="widgettitle">Последние комментарии</h2>
				<table class="recentcommentsavatar" cellspacing="0" cellpadding="0" border="0">
					<tbody><tr><td title="Игорь Усольцев" class="recentcommentsavatartop" style="height:48px; width:48px;"><img alt="" src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/d5b2ed1f8739ccaf1ed8aeaedde22744(1).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-d5b2ed1f8739ccaf1ed8aeaedde22744-2"></td><td class="recentcommentstexttop" style="">Игорь Усольцев к записи <a href="https://iusoltsev.wordpress.com/2022/06/07/oracle-19c-bug-jppd-%d0%bd%d0%b5-%d1%80%d0%b0%d0%b1%d0%be%d1%82%d0%b0%d0%b5%d1%82-%d0%b2-%d0%bf%d1%80%d0%b8%d1%81%d1%83%d1%82%d1%81%d1%82%d0%b2%d0%b8%d0%b8-group-by-%d0%b8-table-expression/#comment-35224">Oracle 19c bug: JPPD не работа…</a></td></tr><tr><td title="Sayan Malakshinov" class="recentcommentsavatarend" style="height:48px; width:48px;"><a href="http://orasql.org/" rel="nofollow"><img alt="" src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/1f3f471596f97000d86f7851a596751a.png" class="avatar avatar-48 grav-hashed" height="48" width="48" id="grav-1f3f471596f97000d86f7851a596751a-0"></a></td><td class="recentcommentstextend" style=""><a href="http://orasql.org/" rel="nofollow">Sayan Malakshinov</a> к записи <a href="https://iusoltsev.wordpress.com/2022/06/07/oracle-19c-bug-jppd-%d0%bd%d0%b5-%d1%80%d0%b0%d0%b1%d0%be%d1%82%d0%b0%d0%b5%d1%82-%d0%b2-%d0%bf%d1%80%d0%b8%d1%81%d1%83%d1%82%d1%81%d1%82%d0%b2%d0%b8%d0%b8-group-by-%d0%b8-table-expression/#comment-35223">Oracle 19c bug: JPPD не работа…</a></td></tr><tr><td title="roliynichenko" class="recentcommentsavatarend" style="height:48px; width:48px;"><img alt="" src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/cd1891c065d22405e7a4f4d2ba554a3b.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-cd1891c065d22405e7a4f4d2ba554a3b-0"></td><td class="recentcommentstextend" style="">roliynichenko к записи <a href="https://iusoltsev.wordpress.com/2022/04/27/ora-00600-internal-error-code-arguments-6907-%d0%bf%d1%80%d0%b8-%d0%b2%d1%8b%d0%bf%d0%be%d0%bb%d0%bd%d0%b5%d0%bd%d0%b8%d0%b8-alter-table-move-partition-compress/#comment-35113">ORA-00600: internal error code…</a></td></tr><tr><td title="Georg" class="recentcommentsavatarend" style="height:48px; width:48px;"><img alt="" src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/ce05b7f68b6df9ba50d4f2f4d5ea4251" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-ce05b7f68b6df9ba50d4f2f4d5ea4251-0"></td><td class="recentcommentstextend" style="">Georg к записи <a href="https://iusoltsev.wordpress.com/2022/04/27/ora-00600-internal-error-code-arguments-6907-%d0%bf%d1%80%d0%b8-%d0%b2%d1%8b%d0%bf%d0%be%d0%bb%d0%bd%d0%b5%d0%bd%d0%b8%d0%b8-alter-table-move-partition-compress/#comment-35112">ORA-00600: internal error code…</a></td></tr><tr><td title="rbikblog" class="recentcommentsavatarend" style="height:48px; width:48px;"><a href="http://rbikblog.wordpress.com/" rel="nofollow"><img alt="" src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/7837301d9640ed5d319f86de2aa295df" class="avatar avatar-48 grav-hashed" height="48" width="48" id="grav-7837301d9640ed5d319f86de2aa295df-0"></a></td><td class="recentcommentstextend" style=""><a href="http://rbikblog.wordpress.com/" rel="nofollow">rbikblog</a> к записи <a href="https://iusoltsev.wordpress.com/2021/12/07/over-dblink-sql-plan-fix/#comment-34889">Фиксация планов импортированны…</a></td></tr>				</tbody></table>
				</li>
<li id="rss-15" class="widget widget_rss"><h2 class="widgettitle"><a class="rsswidget" href="https://jonathanlewis.wordpress.com/feed/" title="Подписаться на эту ленту"><img style="background: orange; color: white; border: none;" width="14" height="14" src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/rss.png" alt="RSS"></a> <a class="rsswidget" href="https://jonathanlewis.wordpress.com/" title="Just another Oracle weblog">Jonathan Lewis blog</a></h2>
<ul><li><a class="rsswidget" href="https://jonathanlewis.wordpress.com/2023/01/11/quiz-night-38/" title="I may have given the answers to this little puzzle elsewhere on the blog already, but if so I can’t find where, and it’s worth a little note of its own. I have a non-partitioned heap table that is a subset of all_objects, and I’m going to execute a series of calls to dbms_stats to […]">Quiz Night</a></li></ul></li>
<li id="rss-17" class="widget widget_rss"><h2 class="widgettitle"><a class="rsswidget" href="http://feeds.feedburner.com/TheOracleBaseBlog" title="Подписаться на эту ленту"><img style="background: orange; color: white; border: none;" width="14" height="14" src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/rss.png" alt="RSS"></a> <a class="rsswidget" href="https://oracle-base.com/blog" title="Oracle related rants (and lots of off-topic stuff)...">Tim Hall blog</a></h2>
<ul><li><a class="rsswidget" href="https://oracle-base.com/blog/2023/01/03/life-update-the-first-rule-of-oracle-games-console/" title="Life has been a little quiet on the publishing front recently. You may have noticed I’ve not posted many new articles or blog posts of late. This situation is likely to continue for some time, and I thought I would drop a post to let you know why… I’m currently spending most of my time … Continue reading &quot;Life Update : The first rule of Oracle Games Con […]">Life Update : The first rule of Oracle Games Console…</a></li></ul></li>
<li id="rss-13" class="widget widget_rss"><h2 class="widgettitle"><a class="rsswidget" href="https://richardfoote.wordpress.com/feed/" title="Подписаться на эту ленту"><img style="background: orange; color: white; border: none;" width="14" height="14" src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/rss.png" alt="RSS"></a> <a class="rsswidget" href="https://richardfoote.wordpress.com/" title="Focusing Specifically On Oracle Indexes, Database Administration and Some Great Music">Richard Foote’s Oracle Blog</a></h2>
<ul><li><a class="rsswidget" href="https://richardfoote.wordpress.com/2022/12/22/merry-christmas-and-happy-new-year-the-jean-genie/" title="I would like to take this opportunity to wish all my readers who celebrate the festive season a very Merry Christmas and a most happy, peaceful and prosperous New Year. 2023 promises to be a big year for me, in that I’ll be officially retiring from work early in the year, after close to 40 […]">Merry Christmas and Happy New Year!! (“The Jean Genie”)</a></li></ul></li>
<li id="linkcat-62646089" class="widget widget_links"><h2 class="widgettitle">Блоги=&gt;2read</h2>

	<ul class="xoxo blogroll">
<li><a href="http://andreynikolaev.wordpress.com/" title="Latch, mutex and beyond">Andrey S. Nikolaev</a></li>
<li><a href="http://dioncho.wordpress.com/" rel="colleague crush noopener" title="Oracle Performance Storyteller" target="_blank">Dion Cho</a></li>
<li><a href="http://orastory.wordpress.com/">Dominic Brooks</a></li>
<li><a href="https://blog.dbi-services.com/author/franckpachot/" title="Franck’s Oracle blog">Franck Pachot</a></li>
<li><a href="http://kerryosborne.oracle-guy.com/" title="Kerry Osborne’s Oracle Blog">Kerry Osborne</a></li>
<li><a href="http://kevinclosson.wordpress.com/" title="Performance Architect in Oracle’s Systems Technology Group">Kevin Closson</a></li>
<li><a href="http://externaltable.blogspot.ch/" title="Luca’s blog on Oracle and databases">Luca Canali</a></li>
<li><a href="https://blogs.oracle.com/optimizer/" title="Oracle Optimizer Group public blog">Optimizer Group blog</a></li>
<li><a href="http://oracle-randolf.blogspot.com/">Randolf Geist</a></li>
<li><a href="http://orainternals.wordpress.com/">Riyaj Shamsudeen</a></li>
<li><a href="http://orasql.org/" title="Блог Саяна Малакшинова на английском">Sayan Malakshinov</a></li>
<li><a href="http://surachartopun.com/" title="Surachart Opun’s Blog">Surachart Opun</a></li>
<li><a href="http://blog.tanelpoder.com/" title="Tanel Poder blog">Tanel Poder</a></li>
<li><a href="http://timurakhmadeev.wordpress.com/">Timur Akhmadeev</a></li>
<li><a href="https://blogs.oracle.com/wim/">Wim Coekaerts</a></li>

	</ul>
</li>

<li id="linkcat-62646358" class="widget widget_links"><h2 class="widgettitle">Сайты+Форумы=&gt;2search</h2>

	<ul class="xoxo blogroll">
<li><a href="http://www.oracle-developer.net/" title="oracle-developer.net">Adrian Billington</a></li>
<li><a href="http://asktom.oracle.com/" title="Кто не знает AskTom’а?">Ask Tom</a></li>
<li><a href="http://antognini.ch/">Christian Antognini</a></li>
<li><a href="http://www.juliandyke.com/" title="Oracle internals — интереснейшие презентации">Julian Dyke</a></li>
<li><a href="http://www.morganslibrary.org/library.html" title="Oracle Library by Daniel Morgan">Morgan's Library</a></li>
<li><a href="http://www.ixora.com.au/" title="Первый независимый исследователь Oracle internals">Steve Adams</a></li>
<li><a href="http://www.oracle-base.com/index.php" title="Полезные статьи про Oracle, Linux, VMware, NFS, etc.">Tim Hall site</a></li>

	</ul>
</li>

<li id="linkcat-94261618" class="widget widget_links"><h2 class="widgettitle">Oracle на русском</h2>

	<ul class="xoxo blogroll">
<li><a href="http://apps-oracle.ru/" title="Oracle e-Business Suite, OAF, SQL">Андрей Остапишен</a></li>
<li><a href="http://www.igormelnikov.com/">Игорь Мельников</a></li>
<li><a href="http://www.fors.ru/pressroom/journal/" title="периодическое интернет-издание компании ФОРС">Интернет-журнал «FORS»</a></li>
<li><a href="http://exadata-dba.blogspot.ru/" title="Практика работы с Oracle Exadata">Юрий Пудовченко</a></li>
<li><a href="https://forum.ora600.ru/index.php" title="форум на ora600.ru">форум на ora600.ru</a></li>
<li><a href="https://murcode.ru/forum/3-oracle/" title="Oracle форум на SQL.RU (архив)">SQL.RU архив на murcode.ru</a></li>

	</ul>
</li>

<li id="blog_subscription-3" class="widget widget_blog_subscription jetpack_subscription_widget"><h2 class="widgettitle"><label for="subscribe-field">Email подписка </label></h2>


			<div class="wp-block-jetpack-subscriptions__container">
			<form action="https://subscribe.wordpress.com/" method="post" accept-charset="utf-8" id="subscribe-blog">
								<p id="subscribe-email">
					<label id="subscribe-field-label" for="subscribe-field" class="screen-reader-text">
						Адрес электронной почты:					</label>

					<input type="email" name="email" style="width: 95%; padding: 1px 10px" placeholder="Email адрес" value="" id="subscribe-field">				</p>

				<p id="subscribe-submit">
					<input type="hidden" name="action" value="subscribe">
					<input type="hidden" name="blog_id" value="4124168">
					<input type="hidden" name="source" value="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/">
					<input type="hidden" name="sub-type" value="widget">
					<input type="hidden" name="redirect_fragment" value="subscribe-blog">
					<input type="hidden" id="_wpnonce" name="_wpnonce" value="e630384186">					<button type="submit" class="wp-block-button__link">
						Subscribe now!					</button>
				</p>
			</form>
							<div class="wp-block-jetpack-subscriptions__subscount">
					Присоединиться к еще 297 подписчикам				</div>
						</div>
			
</li>
<li id="blog-stats-2" class="widget widget_blog-stats"><h2 class="widgettitle">Статистика</h2>
		<ul>
			<li>1&nbsp;324&nbsp;932 hits</li>
		</ul>
		</li>
<li id="meta-3" class="widget widget_meta"><h2 class="widgettitle">Login | RSS</h2>

		<ul>
			<li><a href="https://wordpress.com/start/ru?ref=wplogin">Регистрация</a></li>			<li><a href="https://iusoltsev.wordpress.com/wp-login.php">Войти</a></li>
			<li><a href="https://iusoltsev.wordpress.com/feed/">Лента записей</a></li>
			<li><a href="https://iusoltsev.wordpress.com/comments/feed/">Лента комментариев</a></li>

			<li><a href="https://wordpress.com/" title="Сайт работает на WordPress — современной персональной платформе для публикаций.">WordPress.com</a></li>
		</ul>

		</li>

</ul>

</div>


<p class="credit"><cite> <a href="https://wordpress.com/?ref=footer_blog" rel="nofollow">Блог на WordPress.com.</a></cite></p>

</div>

<!--  -->
		<!-- CCPA [start] -->
		<script type="text/javascript">
			( function () {

				var setupPrivacy = function() {

					// Minimal Mozilla Cookie library
					// https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie/Simple_document.cookie_framework
					var cookieLib = window.cookieLib = {getItem:function(e){return e&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,o,n,t,r,i){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var c="";if(n)switch(n.constructor){case Number:c=n===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+n;break;case String:c="; expires="+n;break;case Date:c="; expires="+n.toUTCString()}return"rootDomain"!==r&&".rootDomain"!==r||(r=(".rootDomain"===r?".":"")+document.location.hostname.split(".").slice(-2).join(".")),document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(o)+c+(r?"; domain="+r:"")+(t?"; path="+t:"")+(i?"; secure":""),!0}};

					// Implement IAB USP API.
					window.__uspapi = function( command, version, callback ) {

						// Validate callback.
						if ( typeof callback !== 'function' ) {
							return;
						}

						// Validate the given command.
						if ( command !== 'getUSPData' || version !== 1 ) {
							callback( null, false );
							return;
						}

						// Check for GPC. If set, override any stored cookie.
						if ( navigator.globalPrivacyControl ) {
							callback( { version: 1, uspString: '1YYN' }, true );
							return;
						}

						// Check for cookie.
						var consent = cookieLib.getItem( 'usprivacy' );

						// Invalid cookie.
						if ( null === consent ) {
							callback( null, false );
							return;
						}

						// Everything checks out. Fire the provided callback with the consent data.
						callback( { version: 1, uspString: consent }, true );
					};

					// Initialization.
					document.addEventListener( 'DOMContentLoaded', function() {

						// Internal functions.
						var setDefaultOptInCookie = function() {
							var value = '1YNN';
							var domain = '.wordpress.com' === location.hostname.slice( -14 ) ? '.rootDomain' : location.hostname;
							cookieLib.setItem( 'usprivacy', value, 365 * 24 * 60 * 60, '/', domain );
						};

						var setDefaultOptOutCookie = function() {
							var value = '1YYN';
							var domain = '.wordpress.com' === location.hostname.slice( -14 ) ? '.rootDomain' : location.hostname;
							cookieLib.setItem( 'usprivacy', value, 24 * 60 * 60, '/', domain );
						};

						var setDefaultNotApplicableCookie = function() {
							var value = '1---';
							var domain = '.wordpress.com' === location.hostname.slice( -14 ) ? '.rootDomain' : location.hostname;
							cookieLib.setItem( 'usprivacy', value, 24 * 60 * 60, '/', domain );
						};

						var setCcpaAppliesCookie = function( applies ) {
							var domain = '.wordpress.com' === location.hostname.slice( -14 ) ? '.rootDomain' : location.hostname;
							cookieLib.setItem( 'ccpa_applies', applies, 24 * 60 * 60, '/', domain );
						}

						var maybeCallDoNotSellCallback = function() {
							if ( 'function' === typeof window.doNotSellCallback ) {
								return window.doNotSellCallback();
							}

							return false;
						}

						// Look for usprivacy cookie first.
						var usprivacyCookie = cookieLib.getItem( 'usprivacy' );

						// Found a usprivacy cookie.
						if ( null !== usprivacyCookie ) {

							// If the cookie indicates that CCPA does not apply, then bail.
							if ( '1---' === usprivacyCookie ) {
								return;
							}

							// CCPA applies, so call our callback to add Do Not Sell link to the page.
							maybeCallDoNotSellCallback();

							// We're all done, no more processing needed.
							return;
						}

						// We don't have a usprivacy cookie, so check to see if we have a CCPA applies cookie.
						var ccpaCookie = cookieLib.getItem( 'ccpa_applies' );

						// No CCPA applies cookie found, so we'll need to geolocate if this visitor is from California.
						// This needs to happen client side because we do not have region geo data in our $SERVER headers,
						// only country data -- therefore we can't vary cache on the region.
						if ( null === ccpaCookie ) {

							var request = new XMLHttpRequest();
							request.open( 'GET', 'https://public-api.wordpress.com/geo/', true );

							request.onreadystatechange = function () {
								if ( 4 === this.readyState ) {
									if ( 200 === this.status ) {

										// Got a geo response. Parse out the region data.
										var data = JSON.parse( this.response );
										var region      = data.region ? data.region.toLowerCase() : '';
										var ccpa_applies = ['california', 'colorado', 'connecticut', 'utah', 'virginia'].indexOf( region ) > -1;
										// Set CCPA applies cookie. This keeps us from having to make a geo request too frequently.
										setCcpaAppliesCookie( ccpa_applies );

										// Check if CCPA applies to set the proper usprivacy cookie.
										if ( ccpa_applies ) {
											if ( maybeCallDoNotSellCallback() ) {
												// Do Not Sell link added, so set default opt-in.
												setDefaultOptInCookie();
											} else {
												// Failed showing Do Not Sell link as required, so default to opt-OUT just to be safe.
												setDefaultOptOutCookie();
											}
										} else {
											// CCPA does not apply.
											setDefaultNotApplicableCookie();
										}
									} else {
										// Could not geo, so let's assume for now that CCPA applies to be safe.
										setCcpaAppliesCookie( true );
										if ( maybeCallDoNotSellCallback() ) {
											// Do Not Sell link added, so set default opt-in.
											setDefaultOptInCookie();
										} else {
											// Failed showing Do Not Sell link as required, so default to opt-OUT just to be safe.
											setDefaultOptOutCookie();
										}
									}
								}
							};

							// Send the geo request.
							request.send();
						} else {
							// We found a CCPA applies cookie.
							if ( ccpaCookie === 'true' ) {
								if ( maybeCallDoNotSellCallback() ) {
									// Do Not Sell link added, so set default opt-in.
									setDefaultOptInCookie();
								} else {
									// Failed showing Do Not Sell link as required, so default to opt-OUT just to be safe.
									setDefaultOptOutCookie();
								}
							} else {
								// CCPA does not apply.
								setDefaultNotApplicableCookie();
							}
						}
					} );
				};

				// Kickoff initialization.
				if ( window.defQueue && defQueue.isLOHP && defQueue.isLOHP === 2020 ) {
					defQueue.items.push( setupPrivacy );
				} else {
					setupPrivacy();
				}

			} )();
		</script>

		<!-- CCPA [end] -->
		<script src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/gprofiles.js.Без названия" id="grofiles-cards-js"></script>
<script id="wpgroho-js-extra">
var WPGroHo = {"my_hash":""};
</script>
<script crossorigin="anonymous" type="text/javascript" src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/wpgroho.js.Без названия"></script>

	<script>
		// Initialize and attach hovercards to all gravatars
		( function() {
			function init() {
				if ( typeof Gravatar === 'undefined' ) {
					return;
				}

				if ( typeof Gravatar.init !== 'function' ) {
					return;
				}

				Gravatar.profile_cb = function ( hash, id ) {
					WPGroHo.syncProfileData( hash, id );
				};

				Gravatar.my_hash = WPGroHo.my_hash;
				Gravatar.init( 'body', '#wp-admin-bar-my-account' );
			}

			if ( document.readyState !== 'loading' ) {
				init();
			} else {
				document.addEventListener( 'DOMContentLoaded', init );
			}
		} )();
	</script>

		<div style="display:none">
	<div class="grofile-hash-map-5f79b7d7c9630a4fe4e1f110d99d1a74">
	</div>
	<div class="grofile-hash-map-d41d8cd98f00b204e9800998ecf8427e">
	</div>
	<div class="grofile-hash-map-658daacd0fd28f8d185da60065e91b80">
	</div>
	<div class="grofile-hash-map-a53cfbc20e07580218fcd08fc392692d">
	</div>
	<div class="grofile-hash-map-20541cab514bcb5af4cd526c8485574a">
	</div>
	<div class="grofile-hash-map-38d0e651a0c61bdc2385be38e2acd45c">
	</div>
	<div class="grofile-hash-map-d5b2ed1f8739ccaf1ed8aeaedde22744">
	</div>
	<div class="grofile-hash-map-1d948db41c6ea1b4c4273e5ea463b175">
	</div>
	<div class="grofile-hash-map-1f3f471596f97000d86f7851a596751a">
	</div>
	<div class="grofile-hash-map-cd1891c065d22405e7a4f4d2ba554a3b">
	</div>
	<div class="grofile-hash-map-ce05b7f68b6df9ba50d4f2f4d5ea4251">
	</div>
	<div class="grofile-hash-map-7837301d9640ed5d319f86de2aa295df">
	</div>
	</div>
<script id="highlander-comments-js-extra">
var HighlanderComments = {"loggingInText":"\u0412\u0445\u043e\u0434 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443\u2026","submittingText":"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f\u2026","postCommentText":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439","connectingToText":"Connecting to %s","commentingAsText":"%1$s: \u0414\u043b\u044f \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0432\u0430\u0448\u0430 \u0443\u0447\u0451\u0442\u043d\u0430\u044f \u0437\u0430\u043f\u0438\u0441\u044c %2$s.","logoutText":"\u0412\u044b\u0439\u0442\u0438","loginText":"\u0412\u043e\u0439\u0442\u0438","connectURL":"https:\/\/iusoltsev.wordpress.com\/public.api\/connect\/?action=request","logoutURL":"https:\/\/iusoltsev.wordpress.com\/wp-login.php?action=logout&_wpnonce=5bcdcd4c51","homeURL":"https:\/\/iusoltsev.wordpress.com\/","postID":"505","gravDefault":"identicon","enterACommentError":"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439","enterEmailError":"Please enter your email address here","invalidEmailError":"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0430\u0434\u0440\u0435\u0441 e-mail","enterAuthorError":"Please enter your name here","gravatarFromEmail":"This picture will show whenever you leave a comment. Click to customize it.","logInToExternalAccount":"Log in to use details from one of these accounts.","change":"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c","changeAccount":"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0443\u0447\u0435\u0442\u043d\u0443\u044e \u0437\u0430\u043f\u0438\u0441\u044c","comment_registration":"","userIsLoggedIn":"","isJetpack":"","text_direction":"ltr"};
</script>
<script crossorigin="anonymous" type="text/javascript" src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/saved_resource(6)"></script>
	<div id="actionbar" class="actnbr-pub-rubric actnbr-has-follow">
		<ul>
								<li class="actnbr-btn actnbr-hidden">
								<a class="actnbr-action actnbr-actn-follow " href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/">
			<svg class="gridicon gridicons-reader-follow" height="24" width="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><path d="M23 16v2h-3v3h-2v-3h-3v-2h3v-3h2v3h3zM20 2v9h-4v3h-3v4H4c-1.1 0-2-.9-2-2V2h18zM8 13v-1H4v1h4zm3-3H4v1h7v-1zm0-2H4v1h7V8zm7-4H4v2h14V4z"></path></g></svg><span>Отслеживать</span>
		</a>
		<a class="actnbr-action actnbr-actn-following  no-display" href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/">
			<svg class="gridicon gridicons-reader-following" height="24" width="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><path d="M23 13.482L15.508 21 12 17.4l1.412-1.388 2.106 2.188 6.094-6.094L23 13.482zm-7.455 1.862L20 10.89V2H2v14c0 1.1.9 2 2 2h4.538l4.913-4.832 2.095 2.176zM8 13H4v-1h4v1zm3-2H4v-1h7v1zm0-2H4V8h7v1zm7-3H4V4h14v2z"></path></g></svg><span>Отслеживаемые сайты</span>
		</a>
							<div class="actnbr-popover tip tip-top-left actnbr-notice" id="follow-bubble">
							<div class="tip-arrow"></div>
							<div class="tip-inner actnbr-follow-bubble">
															<ul>
											<li class="actnbr-sitename actnbr-hidden">
			<a href="https://iusoltsev.wordpress.com/">
				<img alt="" src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/oracle_mechanics.png" class="avatar avatar-50" height="50" width="50">				Oracle mechanics			</a>
		</li>
										<form method="post" action="https://subscribe.wordpress.com/" accept-charset="utf-8" style="display: none;">
																						<div class="actnbr-follow-count">Присоединиться к ещё 195 подписчикам</div>
																					<div>
										<input type="email" name="email" placeholder="Введите свой адрес электронной почты" class="actnbr-email-field" aria-label="Введите свой адрес электронной почты">
										</div>
										<input type="hidden" name="action" value="subscribe">
										<input type="hidden" name="blog_id" value="4124168">
										<input type="hidden" name="source" value="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/">
										<input type="hidden" name="sub-type" value="actionbar-follow">
										<input type="hidden" id="_wpnonce" name="_wpnonce" value="e630384186">										<div class="actnbr-button-wrap">
											<button type="submit" value="Подписаться">
												Подписаться											</button>
										</div>
									</form>
									<li class="actnbr-login-nudge actnbr-hidden">
										<div>
											Уже есть учётная запись WordPress.com? <a href="https://wordpress.com/log-in?redirect_to=https%3A%2F%2Fiusoltsev.wordpress.com%2Fprofile%2Findividual-sql-and-cbo%2Fcbo-hints%2F&amp;signup_flow=account">Войдите в систему.</a>										</div>
									</li>
								</ul>
															</div>
						</div>
					</li>
							<li class="actnbr-ellipsis actnbr-hidden">
				<svg class="gridicon gridicons-ellipsis" height="24" width="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><path d="M7 12c0 1.104-.896 2-2 2s-2-.896-2-2 .896-2 2-2 2 .896 2 2zm12-2c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2zm-7 0c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2z"></path></g></svg>				<div class="actnbr-popover tip tip-top-left actnbr-more">
					<div class="tip-arrow"></div>
					<div class="tip-inner">
						<ul>
									<li class="actnbr-sitename actnbr-hidden">
			<a href="https://iusoltsev.wordpress.com/">
				<img alt="" src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/oracle_mechanics.png" class="avatar avatar-50" height="50" width="50">				Oracle mechanics			</a>
		</li>
								<li class="actnbr-folded-customize actnbr-hidden">
								<a href="https://iusoltsev.wordpress.com/wp-admin/customize.php?url=https%3A%2F%2Fiusoltsev.wordpress.com%2Fprofile%2Findividual-sql-and-cbo%2Fcbo-hints%2F">
									<svg class="gridicon gridicons-customize" height="20" width="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><path d="M2 6c0-1.505.78-3.08 2-4 0 .845.69 2 2 2 1.657 0 3 1.343 3 3 0 .386-.08.752-.212 1.09.74.594 1.476 1.19 2.19 1.81L8.9 11.98c-.62-.716-1.214-1.454-1.807-2.192C6.753 9.92 6.387 10 6 10c-2.21 0-4-1.79-4-4zm12.152 6.848l1.34-1.34c.607.304 1.283.492 2.008.492 2.485 0 4.5-2.015 4.5-4.5 0-.725-.188-1.4-.493-2.007L18 9l-2-2 3.507-3.507C18.9 3.188 18.225 3 17.5 3 15.015 3 13 5.015 13 7.5c0 .725.188 1.4.493 2.007L3 20l2 2 6.848-6.848c1.885 1.928 3.874 3.753 5.977 5.45l1.425 1.148 1.5-1.5-1.15-1.425c-1.695-2.103-3.52-4.092-5.448-5.977z"></path></g></svg>									<span>Настроить</span>
								</a>
							</li>
																<li class="actnbr-folded-follow actnbr-hidden">
												<a class="actnbr-action actnbr-actn-follow " href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/">
			<svg class="gridicon gridicons-reader-follow" height="24" width="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><path d="M23 16v2h-3v3h-2v-3h-3v-2h3v-3h2v3h3zM20 2v9h-4v3h-3v4H4c-1.1 0-2-.9-2-2V2h18zM8 13v-1H4v1h4zm3-3H4v1h7v-1zm0-2H4v1h7V8zm7-4H4v2h14V4z"></path></g></svg><span>Отслеживать</span>
		</a>
		<a class="actnbr-action actnbr-actn-following  no-display" href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/">
			<svg class="gridicon gridicons-reader-following" height="24" width="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><path d="M23 13.482L15.508 21 12 17.4l1.412-1.388 2.106 2.188 6.094-6.094L23 13.482zm-7.455 1.862L20 10.89V2H2v14c0 1.1.9 2 2 2h4.538l4.913-4.832 2.095 2.176zM8 13H4v-1h4v1zm3-2H4v-1h7v1zm0-2H4V8h7v1zm7-3H4V4h14v2z"></path></g></svg><span>Отслеживаемые сайты</span>
		</a>
										</li>
																	<li class="actnbr-signup actnbr-hidden"><a href="https://wordpress.com/start/">Регистрация</a></li>
									<li class="actnbr-login actnbr-hidden"><a href="https://wordpress.com/log-in?redirect_to=https%3A%2F%2Fiusoltsev.wordpress.com%2Fprofile%2Findividual-sql-and-cbo%2Fcbo-hints%2F&amp;signup_flow=account">Войти</a></li>
																	<li class="actnbr-shortlink actnbr-hidden"><a href="https://wp.me/PhiSQ-89">Копировать ссылку</a></li>
																	<li class="flb-report actnbr-hidden"><a href="http://en.wordpress.com/abuse/">Сообщить об этом содержимом</a></li>
																	<li class="actnbr-reader actnbr-hidden">
										<a href="https://wordpress.com/read/blogs/4124168/posts/505">
											View post in Reader										</a>
									</li>
																	<li class="actnbr-subs actnbr-hidden">
										<a href="https://subscribe.wordpress.com/">Управление подписками</a>
									</li>
																		<li class="actnbr-fold actnbr-hidden"><a href="https://iusoltsev.wordpress.com/profile/individual-sql-and-cbo/cbo-hints/">Свернуть эту панель</a></li>
															</ul>
					</div>
				</div>
			</li>
		</ul>
	</div>
	
<script>
window.addEventListener( "load", function( event ) {
	var link = document.createElement( "link" );
	link.href = "https://s0.wp.com/wp-content/mu-plugins/actionbar/actionbar.css?v=20210915";
	link.type = "text/css";
	link.rel = "stylesheet";
	document.head.appendChild( link );

	var script = document.createElement( "script" );
	script.src = "https://s0.wp.com/wp-content/mu-plugins/actionbar/actionbar.js?v=20220329";
	script.defer = true;
	document.body.appendChild( script );
} );
</script>

	
	<script type="text/javascript">
		window.WPCOM_sharing_counts = {"https:\/\/iusoltsev.wordpress.com\/profile\/individual-sql-and-cbo\/cbo-hints\/":505};
	</script>
				<script crossorigin="anonymous" type="text/javascript" src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/saved_resource(7)"></script>
<script type="text/javascript">
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "https://s0.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.head.appendChild( corecss );
		var themecssurl = "https://s0.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?m=1363304414h&amp;ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		document.head.appendChild( themecss );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ показать код';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();

	// Infinite scroll support
	if ( typeof( jQuery ) !== 'undefined' ) {
		jQuery( function( $ ) {
			$( document.body ).on( 'post-load', function() {
				SyntaxHighlighter.highlight();
			} );
		} );
	}
</script>
<script id="sharing-js-js-extra">
var sharing_js_options = {"lang":"en","counts":"1","is_stats_active":"1"};
</script>
<script crossorigin="anonymous" type="text/javascript" src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/saved_resource(8)"></script>
<script type="text/javascript">
var windowOpen;
			( function () {
				function matches( el, sel ) {
					return !! (
						el.matches && el.matches( sel ) ||
						el.msMatchesSelector && el.msMatchesSelector( sel )
					);
				}

				document.body.addEventListener( 'click', function ( event ) {
					if ( ! event.target ) {
						return;
					}

					var el;
					if ( matches( event.target, 'a.share-facebook' ) ) {
						el = event.target;
					} else if ( event.target.parentNode && matches( event.target.parentNode, 'a.share-facebook' ) ) {
						el = event.target.parentNode;
					}

					if ( el ) {
						event.preventDefault();

						// If there's another sharing window open, close it.
						if ( typeof windowOpen !== 'undefined' ) {
							windowOpen.close();
						}
						windowOpen = window.open( el.getAttribute( 'href' ), 'wpcomfacebook', 'menubar=1,resizable=1,width=600,height=400' );
						return false;
					}
				} );
			} )();
var windowOpen;
			( function () {
				function matches( el, sel ) {
					return !! (
						el.matches && el.matches( sel ) ||
						el.msMatchesSelector && el.msMatchesSelector( sel )
					);
				}

				document.body.addEventListener( 'click', function ( event ) {
					if ( ! event.target ) {
						return;
					}

					var el;
					if ( matches( event.target, 'a.share-twitter' ) ) {
						el = event.target;
					} else if ( event.target.parentNode && matches( event.target.parentNode, 'a.share-twitter' ) ) {
						el = event.target.parentNode;
					}

					if ( el ) {
						event.preventDefault();

						// If there's another sharing window open, close it.
						if ( typeof windowOpen !== 'undefined' ) {
							windowOpen.close();
						}
						windowOpen = window.open( el.getAttribute( 'href' ), 'wpcomtwitter', 'menubar=1,resizable=1,width=600,height=350' );
						return false;
					}
				} );
			} )();
var windowOpen;
			( function () {
				function matches( el, sel ) {
					return !! (
						el.matches && el.matches( sel ) ||
						el.msMatchesSelector && el.msMatchesSelector( sel )
					);
				}

				document.body.addEventListener( 'click', function ( event ) {
					if ( ! event.target ) {
						return;
					}

					var el;
					if ( matches( event.target, 'a.share-linkedin' ) ) {
						el = event.target;
					} else if ( event.target.parentNode && matches( event.target.parentNode, 'a.share-linkedin' ) ) {
						el = event.target.parentNode;
					}

					if ( el ) {
						event.preventDefault();

						// If there's another sharing window open, close it.
						if ( typeof windowOpen !== 'undefined' ) {
							windowOpen.close();
						}
						windowOpen = window.open( el.getAttribute( 'href' ), 'wpcomlinkedin', 'menubar=1,resizable=1,width=580,height=450' );
						return false;
					}
				} );
			} )();
</script>
<script type="text/javascript">
// <![CDATA[
(function() {
try{
  if ( window.external &&'msIsSiteMode' in window.external) {
    if (window.external.msIsSiteMode()) {
      var jl = document.createElement('script');
      jl.type='text/javascript';
      jl.async=true;
      jl.src='/wp-content/plugins/ie-sitemode/custom-jumplist.php';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jl, s);
    }
  }
}catch(e){}
})();
// ]]>
</script>	<iframe src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/master.html" scrolling="no" id="likes-master" name="likes-master" style="display:none;"></iframe>
	<div id="likes-other-gravatars" style="display: none;">
		<div class="likes-text">
			<span>%d</span> такие блоггеры, как:		</div>
		<ul class="wpl-avatars sd-like-gravatars"></ul>
	</div>

		<script src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/w.js.Без названия" defer=""></script> <script type="text/javascript">
_tkq = window._tkq || [];
_stq = window._stq || [];
_tkq.push(['storeContext', {'blog_id':'4124168','blog_tz':'3','user_lang':'ru','blog_lang':'ru','user_id':'0'}]);
_stq.push(['view', {'blog':'4124168','v':'wpcom','tz':'3','user_id':'0','post':'505','subd':'iusoltsev'}]);
_stq.push(['extra', {'crypt':'UE40eW5QN0p8M2Y/RE0/bU8yQkx3RTR3RmZTSndoTltKYUtEYz9mTHN3MlJ2cWh3ZmwzZGYubUxraS83bFJ8by9SUXlTXWIrWEkxPVl5XzIlVmljT0Q5PU44ZnBlT1JvbEd3LFdtcndNX1ZaNU5ZJUt3X28zP1ZsYSY1VCthazB4TEJDZTl+LTFybWF3TS9MP0JoWiwtW1dnampaLGpIZ1BXdm4yeDFdOTFrXU50dmZZQ2NJeVouS3JUWXosLStlRCZEVHptV1J1LUpvZy9tVnJhbUJRUl1Ea3w0T1F5fi1yV0J+bU5UcVNJdzdraEZlUnlrcnI4eWxMMUhuWEd0RVJmVkUmRyVhSmdkYnV6YjQ2UXF2cT14MFtNQUoyZkk9VkhoOUsrSWRlRXU/SQ=='}]);
_stq.push([ 'clickTrackerInit', '4124168', '505' ]);
	</script>
<noscript><img src="https://pixel.wp.com/b.gif?v=noscript" style="height:1px;width:1px;overflow:hidden;position:absolute;bottom:1px;" alt="" /></noscript>
<script defer="" id="bilmur" data-customproperties="{&quot;logged_in&quot;:&quot;0&quot;,&quot;wptheme&quot;:&quot;pub\/rubric&quot;}" data-provider="wordpress.com" data-service="simple" src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/bilmur.min.js.Без названия"></script><script>
if ( 'object' === typeof wpcom_mobile_user_agent_info ) {

	wpcom_mobile_user_agent_info.init();
	var mobileStatsQueryString = "";
	
	if( false !== wpcom_mobile_user_agent_info.matchedPlatformName )
		mobileStatsQueryString += "&x_" + 'mobile_platforms' + '=' + wpcom_mobile_user_agent_info.matchedPlatformName;
	
	if( false !== wpcom_mobile_user_agent_info.matchedUserAgentName )
		mobileStatsQueryString += "&x_" + 'mobile_devices' + '=' + wpcom_mobile_user_agent_info.matchedUserAgentName;
	
	if( wpcom_mobile_user_agent_info.isIPad() )
		mobileStatsQueryString += "&x_" + 'ipad_views' + '=' + 'views';

	if( "" != mobileStatsQueryString ) {
		new Image().src = document.location.protocol + '//pixel.wp.com/g.gif?v=wpcom-no-pv' + mobileStatsQueryString + '&baba=' + Math.random();
	}
	
}
</script>

<style>img#wpstats {
			position: absolute !important;
			clip: rect(0, 0, 0, 0);
			padding: 0 !important;
			border: 0 !important;
			height: 0 !important;
			width: 0 !important;
			overflow: hidden;
		}</style><img src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/g.gif" alt="" id="wpstats"><script src="./Подсказки (Oracle Hints) _ Oracle mechanics_files/actionbar.js.Без названия" defer=""></script></body></html>