Структура индекса B-дерева показана в файле .jpeg.

Листовые узлы (leaf blocks) - Самый нижний уровень блоков дерева. Которые содержат индексный ключ и ROWID.
Ответвляющиеся блоки - блоки над листовыми узлами.

Как работает: 
  1. Нам нужно найти значение 11.
  2. Поиск начинается с верхней части дерева.
  3. 11 входит в 0..40, значит переходим в самый левый блок.
  4. 11 входит в 11..19, значит переходит в правый листовой узел.
  5. Находим значение 11 и берем ROWID. Чтобы в дальше найти строку в таблице.


Когда B-дерево индексы использовать:
  - Для индексации столбцов, только если вы собираетесь получать доступ через индекс к небольшому % строк таблицы. (от 1% до 20%)
    - Например вы читаете индекс, чтобы получить строку таблицы. Здесь вас необходим доступ к очень небольшому % строк в таблице.
  - Так же если вы планируете обрабатывать много строк таблицы, и индекс может использоваться вместо таблицы.
    - Например индекс содержит достаточно информации чтобы ответить на целый запрос. При этом обращаться к таблице вообще не нужно.

Тонкая таблица: Мало столбцов или они небольшого размера
Толстая таблица: Много стообцов или они большого размера


Когда лучше индекс использовать, а когда полное сканирование таблицы:
  - Допустим у нас есть тонкая таблица 100 000 строк.
  - Нам нужно прочитать 20%. Это 20 000 строк. 
  - На блок 8 кбайл, приходится около 100 строк.
  - Значит таблица имеет приблизительно 1000 блоков.
  - Т.к. нам надо прочитать 20 000 строк, это 20 000 блоков.
  - Но в таблице всего 1000 блоков. Это значит каждый блок будет обработан 20 раз
  - В этом случае полное сканирование таблицы будет лучше. Мы прочитаем блок всего 1 раз.


